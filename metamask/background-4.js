LavaPack.loadBundle([[4382,{_process:5423},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){
/*
 * [hi-base32]{@link https://github.com/emn178/hi-base32}
 *
 * @version 0.5.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */
!function(){var n="object"==typeof window?window:{};!n.HI_BASE32_NO_NODE_JS&&"object"==typeof e&&e.versions&&e.versions.node&&(n=global);var r=!n.HI_BASE32_NO_COMMON_JS&&"object"==typeof t&&t.exports,s="function"==typeof define&&define.amd,i="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".split(""),o={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,2:26,3:27,4:28,5:29,6:30,7:31},a=[0,0,0,0,0,0,0,0],c=function(e,t){t.length>10&&(t="..."+t.substr(-10));var n=new Error("Decoded data is not valid UTF-8."+" Maybe try base32.decode.asBytes()?"+" Partial data after reading "+e+" bytes: "+t+" <-");throw n.position=e,n},u=function(e){if(!/^[A-Z2-7=]+$/.test(e))throw new Error("Invalid base32 characters");for(var t,n,r,s,i,a,c,u,l=[],d=0,h=(e=e.replace(/=/g,"")).length,f=0,p=h>>3<<3;f<p;)t=o[e.charAt(f++)],n=o[e.charAt(f++)],r=o[e.charAt(f++)],s=o[e.charAt(f++)],i=o[e.charAt(f++)],a=o[e.charAt(f++)],c=o[e.charAt(f++)],u=o[e.charAt(f++)],l[d++]=255&(t<<3|n>>>2),l[d++]=255&(n<<6|r<<1|s>>>4),l[d++]=255&(s<<4|i>>>1),l[d++]=255&(i<<7|a<<2|c>>>3),l[d++]=255&(c<<5|u);var m=h-p;return 2===m?(t=o[e.charAt(f++)],n=o[e.charAt(f++)],l[d++]=255&(t<<3|n>>>2)):4===m?(t=o[e.charAt(f++)],n=o[e.charAt(f++)],r=o[e.charAt(f++)],s=o[e.charAt(f++)],l[d++]=255&(t<<3|n>>>2),l[d++]=255&(n<<6|r<<1|s>>>4)):5===m?(t=o[e.charAt(f++)],n=o[e.charAt(f++)],r=o[e.charAt(f++)],s=o[e.charAt(f++)],i=o[e.charAt(f++)],l[d++]=255&(t<<3|n>>>2),l[d++]=255&(n<<6|r<<1|s>>>4),l[d++]=255&(s<<4|i>>>1)):7===m&&(t=o[e.charAt(f++)],n=o[e.charAt(f++)],r=o[e.charAt(f++)],s=o[e.charAt(f++)],i=o[e.charAt(f++)],a=o[e.charAt(f++)],c=o[e.charAt(f++)],l[d++]=255&(t<<3|n>>>2),l[d++]=255&(n<<6|r<<1|s>>>4),l[d++]=255&(s<<4|i>>>1),l[d++]=255&(i<<7|a<<2|c>>>3)),l},l=function(e,t){if(!t)return function(e){for(var t,n,r="",s=e.length,i=0,o=0;i<s;)if((t=e[i++])<=127)r+=String.fromCharCode(t);else{t>191&&t<=223?(n=31&t,o=1):t<=239?(n=15&t,o=2):t<=247?(n=7&t,o=3):c(i,r);for(var a=0;a<o;++a)((t=e[i++])<128||t>191)&&c(i,r),n<<=6,n+=63&t;n>=55296&&n<=57343&&c(i,r),n>1114111&&c(i,r),n<=65535?r+=String.fromCharCode(n):(n-=65536,r+=String.fromCharCode(55296+(n>>10)),r+=String.fromCharCode(56320+(1023&n)))}return r}(u(e));if(!/^[A-Z2-7=]+$/.test(e))throw new Error("Invalid base32 characters");var n,r,s,i,a,l,d,h,f="",p=e.indexOf("=");-1===p&&(p=e.length);for(var m=0,g=p>>3<<3;m<g;)n=o[e.charAt(m++)],r=o[e.charAt(m++)],s=o[e.charAt(m++)],i=o[e.charAt(m++)],a=o[e.charAt(m++)],l=o[e.charAt(m++)],d=o[e.charAt(m++)],h=o[e.charAt(m++)],f+=String.fromCharCode(255&(n<<3|r>>>2))+String.fromCharCode(255&(r<<6|s<<1|i>>>4))+String.fromCharCode(255&(i<<4|a>>>1))+String.fromCharCode(255&(a<<7|l<<2|d>>>3))+String.fromCharCode(255&(d<<5|h));var y=p-g;return 2===y?(n=o[e.charAt(m++)],r=o[e.charAt(m++)],f+=String.fromCharCode(255&(n<<3|r>>>2))):4===y?(n=o[e.charAt(m++)],r=o[e.charAt(m++)],s=o[e.charAt(m++)],i=o[e.charAt(m++)],f+=String.fromCharCode(255&(n<<3|r>>>2))+String.fromCharCode(255&(r<<6|s<<1|i>>>4))):5===y?(n=o[e.charAt(m++)],r=o[e.charAt(m++)],s=o[e.charAt(m++)],i=o[e.charAt(m++)],a=o[e.charAt(m++)],f+=String.fromCharCode(255&(n<<3|r>>>2))+String.fromCharCode(255&(r<<6|s<<1|i>>>4))+String.fromCharCode(255&(i<<4|a>>>1))):7===y&&(n=o[e.charAt(m++)],r=o[e.charAt(m++)],s=o[e.charAt(m++)],i=o[e.charAt(m++)],a=o[e.charAt(m++)],l=o[e.charAt(m++)],d=o[e.charAt(m++)],f+=String.fromCharCode(255&(n<<3|r>>>2))+String.fromCharCode(255&(r<<6|s<<1|i>>>4))+String.fromCharCode(255&(i<<4|a>>>1))+String.fromCharCode(255&(a<<7|l<<2|d>>>3))),f},d={encode:function(e,t){var n="string"!=typeof e;return n&&e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),n?function(e){for(var t,n,r,s,o,a="",c=e.length,u=0,l=5*parseInt(c/5);u<l;)t=e[u++],n=e[u++],r=e[u++],s=e[u++],o=e[u++],a+=i[t>>>3]+i[31&(t<<2|n>>>6)]+i[n>>>1&31]+i[31&(n<<4|r>>>4)]+i[31&(r<<1|s>>>7)]+i[s>>>2&31]+i[31&(s<<3|o>>>5)]+i[31&o];var d=c-l;return 1===d?(t=e[u],a+=i[t>>>3]+i[t<<2&31]+"======"):2===d?(t=e[u++],n=e[u],a+=i[t>>>3]+i[31&(t<<2|n>>>6)]+i[n>>>1&31]+i[n<<4&31]+"===="):3===d?(t=e[u++],n=e[u++],r=e[u],a+=i[t>>>3]+i[31&(t<<2|n>>>6)]+i[n>>>1&31]+i[31&(n<<4|r>>>4)]+i[r<<1&31]+"==="):4===d&&(t=e[u++],n=e[u++],r=e[u++],s=e[u],a+=i[t>>>3]+i[31&(t<<2|n>>>6)]+i[n>>>1&31]+i[31&(n<<4|r>>>4)]+i[31&(r<<1|s>>>7)]+i[s>>>2&31]+i[s<<3&31]+"="),a}(e):t?function(e){for(var t,n,r,s,o,a="",c=e.length,u=0,l=5*parseInt(c/5);u<l;)t=e.charCodeAt(u++),n=e.charCodeAt(u++),r=e.charCodeAt(u++),s=e.charCodeAt(u++),o=e.charCodeAt(u++),a+=i[t>>>3]+i[31&(t<<2|n>>>6)]+i[n>>>1&31]+i[31&(n<<4|r>>>4)]+i[31&(r<<1|s>>>7)]+i[s>>>2&31]+i[31&(s<<3|o>>>5)]+i[31&o];var d=c-l;return 1===d?(t=e.charCodeAt(u),a+=i[t>>>3]+i[t<<2&31]+"======"):2===d?(t=e.charCodeAt(u++),n=e.charCodeAt(u),a+=i[t>>>3]+i[31&(t<<2|n>>>6)]+i[n>>>1&31]+i[n<<4&31]+"===="):3===d?(t=e.charCodeAt(u++),n=e.charCodeAt(u++),r=e.charCodeAt(u),a+=i[t>>>3]+i[31&(t<<2|n>>>6)]+i[n>>>1&31]+i[31&(n<<4|r>>>4)]+i[r<<1&31]+"==="):4===d&&(t=e.charCodeAt(u++),n=e.charCodeAt(u++),r=e.charCodeAt(u++),s=e.charCodeAt(u),a+=i[t>>>3]+i[31&(t<<2|n>>>6)]+i[n>>>1&31]+i[31&(n<<4|r>>>4)]+i[31&(r<<1|s>>>7)]+i[s>>>2&31]+i[s<<3&31]+"="),a}(e):function(e){var t,n,r,s,o,c,u,l=!1,d="",h=0,f=0,p=e.length;do{for(a[0]=a[5],a[1]=a[6],a[2]=a[7],u=f;h<p&&u<5;++h)(c=e.charCodeAt(h))<128?a[u++]=c:c<2048?(a[u++]=192|c>>6,a[u++]=128|63&c):c<55296||c>=57344?(a[u++]=224|c>>12,a[u++]=128|c>>6&63,a[u++]=128|63&c):(c=65536+((1023&c)<<10|1023&e.charCodeAt(++h)),a[u++]=240|c>>18,a[u++]=128|c>>12&63,a[u++]=128|c>>6&63,a[u++]=128|63&c);f=u-5,h===p&&++h,h>p&&u<6&&(l=!0),t=a[0],u>4?(n=a[1],r=a[2],s=a[3],o=a[4],d+=i[t>>>3]+i[31&(t<<2|n>>>6)]+i[n>>>1&31]+i[31&(n<<4|r>>>4)]+i[31&(r<<1|s>>>7)]+i[s>>>2&31]+i[31&(s<<3|o>>>5)]+i[31&o]):1===u?d+=i[t>>>3]+i[t<<2&31]+"======":2===u?(n=a[1],d+=i[t>>>3]+i[31&(t<<2|n>>>6)]+i[n>>>1&31]+i[n<<4&31]+"===="):3===u?(n=a[1],r=a[2],d+=i[t>>>3]+i[31&(t<<2|n>>>6)]+i[n>>>1&31]+i[31&(n<<4|r>>>4)]+i[r<<1&31]+"==="):(n=a[1],r=a[2],s=a[3],d+=i[t>>>3]+i[31&(t<<2|n>>>6)]+i[n>>>1&31]+i[31&(n<<4|r>>>4)]+i[31&(r<<1|s>>>7)]+i[s>>>2&31]+i[s<<3&31]+"=")}while(!l);return d}(e)},decode:l};l.asBytes=u,r?t.exports=d:(n.base32=d,s&&define((function(){return d})))}()}).call(this)}).call(this,e("_process"))}}},{package:"hi-base32",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/hi-base32/src/base32.js"}],[4420,{buffer:2084,os:5366},function(){with(this)return function(){"use strict";return function(e,t,n){var r=n,s=e("buffer").Buffer,i=e("os");r.toBuffer=function(e,t,n){var r;if(n=~~n,this.isV4Format(e))r=t||new s(n+4),e.split(/\./g).map((function(e){r[n++]=255&parseInt(e,10)}));else if(this.isV6Format(e)){var i,o=e.split(":",8);for(i=0;i<o.length;i++){var a;this.isV4Format(o[i])&&(a=this.toBuffer(o[i]),o[i]=a.slice(0,2).toString("hex")),a&&++i<8&&o.splice(i,0,a.slice(2,4).toString("hex"))}if(""===o[0])for(;o.length<8;)o.unshift("0");else if(""===o[o.length-1])for(;o.length<8;)o.push("0");else if(o.length<8){for(i=0;i<o.length&&""!==o[i];i++);var c=[i,1];for(i=9-o.length;i>0;i--)c.push("0");o.splice.apply(o,c)}for(r=t||new s(n+16),i=0;i<o.length;i++){var u=parseInt(o[i],16);r[n++]=u>>8&255,r[n++]=255&u}}if(!r)throw Error("Invalid ip address: "+e);return r},r.toString=function(e,t,n){t=~~t;var r=[];if(4===(n=n||e.length-t)){for(var s=0;s<n;s++)r.push(e[t+s]);r=r.join(".")}else if(16===n){for(s=0;s<n;s+=2)r.push(e.readUInt16BE(t+s).toString(16));r=(r=(r=r.join(":")).replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3")).replace(/:{3,4}/,"::")}return r};var o=/^(\d{1,3}\.){3,3}\d{1,3}$/,a=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;function c(e){return e?e.toLowerCase():"ipv4"}r.isV4Format=function(e){return o.test(e)},r.isV6Format=function(e){return a.test(e)},r.fromPrefixLen=function(e,t){var n=4;"ipv6"===(t=e>32?"ipv6":c(t))&&(n=16);for(var i=new s(n),o=0,a=i.length;o<a;++o){var u=8;e<8&&(u=e),e-=u,i[o]=255&~(255>>u)}return r.toString(i)},r.mask=function(e,t){e=r.toBuffer(e),t=r.toBuffer(t);var n=new s(Math.max(e.length,t.length)),i=0;if(e.length===t.length)for(i=0;i<e.length;i++)n[i]=e[i]&t[i];else if(4===t.length)for(i=0;i<t.length;i++)n[i]=e[e.length-4+i]&t[i];else{for(i=0;i<n.length-6;i++)n[i]=0;for(n[10]=255,n[11]=255,i=0;i<e.length;i++)n[i+12]=e[i]&t[i+12];i+=12}for(;i<n.length;i++)n[i]=0;return r.toString(n)},r.cidr=function(e){var t=e.split("/"),n=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+n);var s=r.fromPrefixLen(parseInt(t[1],10));return r.mask(n,s)},r.subnet=function(e,t){for(var n=r.toLong(r.mask(e,t)),s=r.toBuffer(t),i=0,o=0;o<s.length;o++)if(255===s[o])i+=8;else for(var a=255&s[o];a;)a=a<<1&255,i++;var c=Math.pow(2,32-i);return{networkAddress:r.fromLong(n),firstAddress:c<=2?r.fromLong(n):r.fromLong(n+1),lastAddress:c<=2?r.fromLong(n+c-1):r.fromLong(n+c-2),broadcastAddress:r.fromLong(n+c-1),subnetMask:t,subnetMaskLength:i,numHosts:c<=2?c:c-2,length:c,contains:function(e){return n===r.toLong(r.mask(e,t))}}},r.cidrSubnet=function(e){var t=e.split("/"),n=t[0];if(2!==t.length)throw new Error("invalid CIDR subnet: "+n);var s=r.fromPrefixLen(parseInt(t[1],10));return r.subnet(n,s)},r.not=function(e){for(var t=r.toBuffer(e),n=0;n<t.length;n++)t[n]=255^t[n];return r.toString(t)},r.or=function(e,t){if(e=r.toBuffer(e),t=r.toBuffer(t),e.length===t.length){for(var n=0;n<e.length;++n)e[n]|=t[n];return r.toString(e)}var s=e,i=t;t.length>e.length&&(s=t,i=e);var o=s.length-i.length;for(n=o;n<s.length;++n)s[n]|=i[n-o];return r.toString(s)},r.isEqual=function(e,t){if(e=r.toBuffer(e),t=r.toBuffer(t),e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}if(4===t.length){var s=t;t=e,e=s}for(n=0;n<10;n++)if(0!==t[n])return!1;var i=t.readUInt16BE(10);if(0!==i&&65535!==i)return!1;for(n=0;n<4;n++)if(e[n]!==t[n+12])return!1;return!0},r.isPrivate=function(e){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^f[cd][0-9a-f]{2}:/i.test(e)||/^fe80:/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)},r.isPublic=function(e){return!r.isPrivate(e)},r.isLoopback=function(e){return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(e)||/^fe80::1$/.test(e)||/^::1$/.test(e)||/^::$/.test(e)},r.loopback=function(e){if("ipv4"!==(e=c(e))&&"ipv6"!==e)throw new Error("family must be ipv4 or ipv6");return"ipv4"===e?"127.0.0.1":"fe80::1"},r.address=function(e,t){var n,s=i.networkInterfaces();if(t=c(t),e&&"private"!==e&&"public"!==e){var o=s[e].filter((function(e){return e.family.toLowerCase()===t}));return 0===o.length?undefined:o[0].address}return(n=Object.keys(s).map((function(n){var i=s[n].filter((function(n){return n.family=n.family.toLowerCase(),n.family===t&&!r.isLoopback(n.address)&&(!e||("public"===e?r.isPrivate(n.address):r.isPublic(n.address)))}));return i.length?i[0].address:undefined})).filter(Boolean)).length?n[0]:r.loopback(t)},r.toLong=function(e){var t=0;return e.split(".").forEach((function(e){t<<=8,t+=parseInt(e)})),t>>>0},r.fromLong=function(e){return(e>>>24)+"."+(e>>16&255)+"."+(e>>8&255)+"."+(255&e)}}}},{package:"ip",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ip/lib/ip.js"}],[4699,{"ip-regex":4419},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("ip-regex"),s=t.exports=e=>r({exact:!0}).test(e);s.v4=e=>r.v4({exact:!0}).test(e),s.v6=e=>r.v6({exact:!0}).test(e)}}},{package:"is-ip",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/is-ip/index.js"}],[5258,{},function(){with(this)return function(){"use strict";return function(e,t,n){!function(e,r){var s={version:"3.0.1",x86:{},x64:{}};function i(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function o(e,t){return e<<t|e>>>32-t}function a(e){return e=i(e^=e>>>16,2246822507),e=i(e^=e>>>13,3266489909),e^=e>>>16}function c(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function u(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function l(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function d(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function h(e,t){return[e[0]^t[0],e[1]^t[1]]}function f(e){return e=h(e,[0,e[0]>>>1]),e=h(e=u(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=h(e=u(e,[3301882366,444984403]),[0,e[0]>>>1])}s.x86.hash32=function(e,t){t=t||0;for(var n=(e=e||"").length%4,r=e.length-n,s=t,c=0,u=3432918353,l=461845907,d=0;d<r;d+=4)c=i(c=255&e.charCodeAt(d)|(255&e.charCodeAt(d+1))<<8|(255&e.charCodeAt(d+2))<<16|(255&e.charCodeAt(d+3))<<24,u),c=i(c=o(c,15),l),s=i(s=o(s^=c,13),5)+3864292196;switch(c=0,n){case 3:c^=(255&e.charCodeAt(d+2))<<16;case 2:c^=(255&e.charCodeAt(d+1))<<8;case 1:c=i(c^=255&e.charCodeAt(d),u),s^=c=i(c=o(c,15),l)}return(s=a(s^=e.length))>>>0},s.x86.hash128=function(e,t){t=t||0;for(var n=(e=e||"").length%16,r=e.length-n,s=t,c=t,u=t,l=t,d=0,h=0,f=0,p=0,m=597399067,g=2869860233,y=951274213,_=2716044179,b=0;b<r;b+=16)d=255&e.charCodeAt(b)|(255&e.charCodeAt(b+1))<<8|(255&e.charCodeAt(b+2))<<16|(255&e.charCodeAt(b+3))<<24,h=255&e.charCodeAt(b+4)|(255&e.charCodeAt(b+5))<<8|(255&e.charCodeAt(b+6))<<16|(255&e.charCodeAt(b+7))<<24,f=255&e.charCodeAt(b+8)|(255&e.charCodeAt(b+9))<<8|(255&e.charCodeAt(b+10))<<16|(255&e.charCodeAt(b+11))<<24,p=255&e.charCodeAt(b+12)|(255&e.charCodeAt(b+13))<<8|(255&e.charCodeAt(b+14))<<16|(255&e.charCodeAt(b+15))<<24,d=o(d=i(d,m),15),s=o(s^=d=i(d,g),19),s=i(s+=c,5)+1444728091,h=o(h=i(h,g),16),c=o(c^=h=i(h,y),17),c=i(c+=u,5)+197830471,f=o(f=i(f,y),17),u=o(u^=f=i(f,_),15),u=i(u+=l,5)+2530024501,p=o(p=i(p,_),18),l=o(l^=p=i(p,m),13),l=i(l+=s,5)+850148119;switch(d=0,h=0,f=0,p=0,n){case 15:p^=e.charCodeAt(b+14)<<16;case 14:p^=e.charCodeAt(b+13)<<8;case 13:p=i(p^=e.charCodeAt(b+12),_),l^=p=i(p=o(p,18),m);case 12:f^=e.charCodeAt(b+11)<<24;case 11:f^=e.charCodeAt(b+10)<<16;case 10:f^=e.charCodeAt(b+9)<<8;case 9:f=i(f^=e.charCodeAt(b+8),y),u^=f=i(f=o(f,17),_);case 8:h^=e.charCodeAt(b+7)<<24;case 7:h^=e.charCodeAt(b+6)<<16;case 6:h^=e.charCodeAt(b+5)<<8;case 5:h=i(h^=e.charCodeAt(b+4),g),c^=h=i(h=o(h,16),y);case 4:d^=e.charCodeAt(b+3)<<24;case 3:d^=e.charCodeAt(b+2)<<16;case 2:d^=e.charCodeAt(b+1)<<8;case 1:d=i(d^=e.charCodeAt(b),m),s^=d=i(d=o(d,15),g)}return s^=e.length,s+=c^=e.length,s+=u^=e.length,c+=s+=l^=e.length,u+=s,l+=s,s=a(s),s+=c=a(c),s+=u=a(u),c+=s+=l=a(l),u+=s,l+=s,("00000000"+(s>>>0).toString(16)).slice(-8)+("00000000"+(c>>>0).toString(16)).slice(-8)+("00000000"+(u>>>0).toString(16)).slice(-8)+("00000000"+(l>>>0).toString(16)).slice(-8)},s.x64.hash128=function(e,t){t=t||0;for(var n=(e=e||"").length%16,r=e.length-n,s=[0,t],i=[0,t],o=[0,0],a=[0,0],p=[2277735313,289559509],m=[1291169091,658871167],g=0;g<r;g+=16)o=[255&e.charCodeAt(g+4)|(255&e.charCodeAt(g+5))<<8|(255&e.charCodeAt(g+6))<<16|(255&e.charCodeAt(g+7))<<24,255&e.charCodeAt(g)|(255&e.charCodeAt(g+1))<<8|(255&e.charCodeAt(g+2))<<16|(255&e.charCodeAt(g+3))<<24],a=[255&e.charCodeAt(g+12)|(255&e.charCodeAt(g+13))<<8|(255&e.charCodeAt(g+14))<<16|(255&e.charCodeAt(g+15))<<24,255&e.charCodeAt(g+8)|(255&e.charCodeAt(g+9))<<8|(255&e.charCodeAt(g+10))<<16|(255&e.charCodeAt(g+11))<<24],o=l(o=u(o,p),31),s=c(s=l(s=h(s,o=u(o,m)),27),i),s=c(u(s,[0,5]),[0,1390208809]),a=l(a=u(a,m),33),i=c(i=l(i=h(i,a=u(a,p)),31),s),i=c(u(i,[0,5]),[0,944331445]);switch(o=[0,0],a=[0,0],n){case 15:a=h(a,d([0,e.charCodeAt(g+14)],48));case 14:a=h(a,d([0,e.charCodeAt(g+13)],40));case 13:a=h(a,d([0,e.charCodeAt(g+12)],32));case 12:a=h(a,d([0,e.charCodeAt(g+11)],24));case 11:a=h(a,d([0,e.charCodeAt(g+10)],16));case 10:a=h(a,d([0,e.charCodeAt(g+9)],8));case 9:a=u(a=h(a,[0,e.charCodeAt(g+8)]),m),i=h(i,a=u(a=l(a,33),p));case 8:o=h(o,d([0,e.charCodeAt(g+7)],56));case 7:o=h(o,d([0,e.charCodeAt(g+6)],48));case 6:o=h(o,d([0,e.charCodeAt(g+5)],40));case 5:o=h(o,d([0,e.charCodeAt(g+4)],32));case 4:o=h(o,d([0,e.charCodeAt(g+3)],24));case 3:o=h(o,d([0,e.charCodeAt(g+2)],16));case 2:o=h(o,d([0,e.charCodeAt(g+1)],8));case 1:o=u(o=h(o,[0,e.charCodeAt(g)]),p),s=h(s,o=u(o=l(o,31),m))}return s=c(s=h(s,[0,e.length]),i=h(i,[0,e.length])),i=c(i,s),s=c(s=f(s),i=f(i)),i=c(i,s),("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)+("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)},void 0!==n?(void 0!==t&&t.exports&&(n=t.exports=s),n.murmurHash3=s):"function"==typeof define&&define.amd?define([],(function(){return s})):(s._murmurHash3=e.murmurHash3,s.noConflict=function(){return e.murmurHash3=s._murmurHash3,s._murmurHash3=r,s.noConflict=r,s},e.murmurHash3=s)}(this)}}},{package:"murmurhash3js",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/murmurhash3js/lib/murmurHash3js.js"}],[2037,{"./blake2b":2035,"./blake2s":2036},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./blake2b"),s=e("./blake2s");t.exports={blake2b:r.blake2b,blake2bHex:r.blake2bHex,blake2bInit:r.blake2bInit,blake2bUpdate:r.blake2bUpdate,blake2bFinal:r.blake2bFinal,blake2s:s.blake2s,blake2sHex:s.blake2sHex,blake2sInit:s.blake2sInit,blake2sUpdate:s.blake2sUpdate,blake2sFinal:s.blake2sFinal}}}},{package:"blakejs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/blakejs/index.js"}],[5297,{_process:5423,"is-promise":4704,promise:5426,timers:5938},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n,r){(function(){var s,i=e("promise"),o=e("is-promise");function a(e,t){return"function"!=typeof t?e:e.then((function(e){s((function(){t(null,e)}))}),(function(e){s((function(){t(e)}))}))}function c(e){return a(this,e)}function u(e){if(e&&o(e)){e.nodeify=c;var t=e.then;return e.then=function(){return u(t.apply(this,arguments))},e}"function"==typeof e?e.prototype.nodeify=c:i.prototype.nodeify=c}function l(e){if(!(this instanceof l))return new l(e);i.call(this,e),u(this)}s="function"==typeof r?r:"object"==typeof n&&n&&n.nextTick?n.nextTick:function(e){setTimeout(e,0)},t.exports=a,a.extend=u,a.Promise=l,l.prototype=Object.create(i.prototype),l.prototype.constructor=l}).call(this)}).call(this,e("_process"),e("timers").setImmediate)}}},{package:"nodeify",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/nodeify/index.js"}],[5273,{"./forge":5272,"./md":5275,"./util":5294},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./forge");e("./md"),e("./util"),(t.exports=r.hmac=r.hmac||{}).create=function(){var e=null,t=null,n=null,s=null,i={start:function(i,o){if(null!==i)if("string"==typeof i){if(!((i=i.toLowerCase())in r.md.algorithms))throw new Error('Unknown hash algorithm "'+i+'"');t=r.md.algorithms[i].create()}else t=i;if(null===o)o=e;else{if("string"==typeof o)o=r.util.createBuffer(o);else if(r.util.isArray(o)){var a=o;o=r.util.createBuffer();for(var c=0;c<a.length;++c)o.putByte(a[c])}var u=o.length();u>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),n=r.util.createBuffer(),s=r.util.createBuffer(),u=o.length();for(c=0;c<u;++c){a=o.at(c);n.putByte(54^a),s.putByte(92^a)}if(u<t.blockLength)for(a=t.blockLength-u,c=0;c<a;++c)n.putByte(54),s.putByte(92);e=o,n=n.bytes(),s=s.bytes()}t.start(),t.update(n)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(s),t.update(e),t.digest()}};return i.digest=i.getMac,i}}}},{package:"node-forge",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/node-forge/lib/hmac.js"}],[5268,{buffer:2083},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){var n={};t.exports=n;var r={};n.encode=function(e,t,n){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(n!==undefined&&"number"!=typeof n)throw new TypeError('"maxline" must be a number.');var r="";if(e instanceof Uint8Array){var s=0,i=t.length,o=t.charAt(0),a=[0];for(s=0;s<e.length;++s){for(var c=0,u=e[s];c<a.length;++c)u+=a[c]<<8,a[c]=u%i,u=u/i|0;for(;u>0;)a.push(u%i),u=u/i|0}for(s=0;0===e[s]&&s<e.length-1;++s)r+=o;for(s=a.length-1;s>=0;--s)r+=t[a[s]]}else r=function(e,t){var n=0,r=t.length,s=t.charAt(0),i=[0];for(n=0;n<e.length();++n){for(var o=0,a=e.at(n);o<i.length;++o)a+=i[o]<<8,i[o]=a%r,a=a/r|0;for(;a>0;)i.push(a%r),a=a/r|0}var c="";for(n=0;0===e.at(n)&&n<e.length()-1;++n)c+=s;for(n=i.length-1;n>=0;--n)c+=t[i[n]];return c}(e,t);if(n){var l=new RegExp(".{1,"+n+"}","g");r=r.match(l).join("\r\n")}return r},n.decode=function(t,n){if("string"!=typeof t)throw new TypeError('"input" must be a string.');if("string"!=typeof n)throw new TypeError('"alphabet" must be a string.');var s=r[n];if(!s){s=r[n]=[];for(var i=0;i<n.length;++i)s[n.charCodeAt(i)]=i}t=t.replace(/\s/g,"");var o=n.length,a=n.charAt(0),c=[0];for(i=0;i<t.length;i++){var u=s[t.charCodeAt(i)];if(u===undefined)return;for(var l=0,d=u;l<c.length;++l)d+=c[l]*o,c[l]=255&d,d>>=8;for(;d>0;)c.push(255&d),d>>=8}for(var h=0;t[h]===a&&h<t.length-1;++h)c.push(0);return void 0!==e?e.from(c.reverse()):new Uint8Array(c.reverse())}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"node-forge",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/node-forge/lib/baseN.js"}],[5493,{"./count":5490,"./empty":5491,"./error":5492,"./infinite":5494,"./keys":5495,"./once":5496,"./values":5497},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={keys:e("./keys"),once:e("./once"),values:e("./values"),count:e("./count"),infinite:e("./infinite"),empty:e("./empty"),error:e("./error")}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/sources/index.js"}],[5486,{"./collect":5482,"./concat":5483,"./drain":5484,"./find":5485,"./log":5487,"./on-end":5488,"./reduce":5489},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={drain:e("./drain"),onEnd:e("./on-end"),log:e("./log"),find:e("./find"),reduce:e("./reduce"),collect:e("./collect"),concat:e("./concat")}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/sinks/index.js"}],[5502,{"./async-map":5498,"./filter":5500,"./filter-not":5499,"./flatten":5501,"./map":5503,"./non-unique":5504,"./take":5505,"./through":5506,"./unique":5507},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={map:e("./map"),asyncMap:e("./async-map"),filter:e("./filter"),filterNot:e("./filter-not"),through:e("./through"),take:e("./take"),unique:e("./unique"),nonUnique:e("./non-unique"),flatten:e("./flatten")}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/throughs/index.js"}],[4541,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports="message Data {\n  enum DataType {\n    Raw = 0;\n    Directory = 1;\n    File = 2;\n    Metadata = 3;\n    Symlink = 4;\n    HAMTShard = 5;\n  }\n\n  required DataType Type = 1;\n  optional bytes Data = 2;\n  optional uint64 filesize = 3;\n  repeated uint64 blocksizes = 4;\n\n  optional uint64 hashType = 5;\n  optional uint64 fanout = 6;\n}\n\nmessage Metadata {\n  optional string MimeType = 1;\n}"}}},{package:"ipfs-unixfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-unixfs/src/unixfs.proto.js"}],[1746,{"./breakLoop":1745,"lodash/noop":5178},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return function(n,i,o,a){a=a||r.default;var c,u=!1;n(i,(function(n,r,i){o(n,(function(r,o){r?i(r):e(o)&&!c?(u=!0,c=t(!0,n),i(null,s.default)):i()}))}),(function(e){e?a(e):a(null,u?c:t(!1))}))}};var r=i(e("lodash/noop")),s=i(e("./breakLoop"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default}}},{package:"async",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async/internal/createTester.js"}],[1757,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return!e},t.exports=n.default}}},{package:"async",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async/internal/notId.js"}],[4313,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){if(e){if("function"==typeof e[Symbol.iterator])return e[Symbol.iterator]();if("function"==typeof e[Symbol.asyncIterator])return e[Symbol.asyncIterator]();if("function"==typeof e.next)return e}throw new Error("argument is not an iterator or iterable")}}}},{package:"get-iterator",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/get-iterator/index.js"}],[4649,{buffer:2084,"class-is":2124,"datastore-pubsub":2251,debug:2256,"err-code":2358,ipns:4685,multihashes:5237},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("ipns"),{fromB58String:s,toB58String:i}=e("multihashes"),o=e("datastore-pubsub"),a=e("class-is"),c=e("err-code"),u=e("debug"),l=u("ipfs:ipns:pubsub");l.error=u("ipfs:ipns:pubsub:error");t.exports=a(class{constructor(e,t,n){this._pubsub=e,this._subscriptions={},this._handleSubscriptionKey=this._handleSubscriptionKey.bind(this),this._pubsubDs=new o(e,t,n,r.validator,this._handleSubscriptionKey)}put(e,t,n){this._pubsubDs.put(e,t,n)}get(e,t){this._pubsubDs.get(e,((n,s)=>{if(e.slice(0,r.namespaceLength).toString()===r.namespace){const t=e.toString(),n=i(e.slice(r.namespaceLength));this._subscriptions[t]=n,l(`subscribed pubsub ${t}: ${n}`)}if(n)return t(n);t(null,s)}))}_handleSubscriptionKey(e,t){const n=this._subscriptions[e];if(!n){const n=`key ${e} does not correspond to a subscription`;return l.error(n),t(c(new Error(n),"ERR_INVALID_KEY"))}let i;try{i=r.getIdKeys(s(n))}catch(e){return l.error(e),t(e)}t(null,i.routingKey.toBuffer())}getSubscriptions(e){return e(null,Object.values(this._subscriptions).filter(Boolean).map((e=>`${r.namespace}${e}`)))}cancel(e,t){if("string"!=typeof e){const e="received subscription name is not valid";return l.error(e),t(c(new Error(e),"ERR_INVALID_SUBSCRIPTION_NAME"))}e.startsWith(r.namespace)&&(e=e.substring(r.namespaceLength));const s=Object.keys(this._subscriptions).find((t=>this._subscriptions[t]===e));if(!s)return t(null,{canceled:!1});try{const e=n.from(s);this._pubsubDs.unsubscribe(e)}catch(e){return t(e)}this._subscriptions[s]=undefined,l(`unsubscribed pubsub ${s}: ${e}`),t(null,{canceled:!0})}},{className:"IpnsPubsubDatastore",symbolName:"@js-ipfs/ipns/IpnsPubsubDatastore"})}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ipfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/src/core/ipns/routing/pubsub-datastore.js"}],[1768,{"./internal/doParallelLimit":1749,"./internal/map":1756},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=i(e("./internal/doParallelLimit")),s=i(e("./internal/map"));function i(e){return e&&e.__esModule?e:{default:e}}n.default=(0,r.default)(s.default),t.exports=n.default}}},{package:"async",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async/mapLimit.js"}],[4415,{buffer:2084,"class-is":2124,"uuid/v4":4412},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("uuid/v4"),s=e("class-is"),i="/",o=n.from(i),a=o[0];class c{constructor(e,t){if("string"==typeof e?this._buf=n.from(e):n.isBuffer(e)&&(this._buf=e),null==t&&(t=!0),t&&this.clean(),0===this._buf.length||this._buf[0]!==a)throw new Error(`Invalid key: ${this.toString()}`)}toString(e){return this._buf.toString(e||"utf8")}toBuffer(){return this._buf}get[Symbol.toStringTag](){return`[Key ${this.toString()}]`}static withNamespaces(e){return new u(e.join(i))}static random(){return new u(r().replace(/-/g,""))}clean(){for(this._buf&&0!==this._buf.length||(this._buf=n.from(i)),this._buf[0]!==a&&(this._buf=n.concat([o,this._buf]));this._buf.length>1&&this._buf[this._buf.length-1]===a;)this._buf=this._buf.slice(0,-1)}less(e){const t=this.list(),n=e.list();for(let e=0;e<t.length;e++){if(n.length<e+1)return!1;const r=t[e],s=n[e];if(r<s)return!0;if(r>s)return!1}return t.length<n.length}reverse(){return c.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const e=this.namespaces();return e[e.length-1]}list(){return this.toString().split(i).slice(1)}type(){return function(e){const t=e.split(":");if(t.length<2)return"";return t.slice(0,-1).join(":")}(this.baseNamespace())}name(){return function(e){const t=e.split(":");return t[t.length-1]}(this.baseNamespace())}instance(e){return new u(this.toString()+":"+e)}path(){let e=this.parent().toString();return e.endsWith(i)||(e+=i),e+=this.type(),new u(e)}parent(){const e=this.list();return 1===e.length?new u(i):new u(e.slice(0,-1).join(i))}child(e){return this.toString()===i?e:e.toString()===i?this:new u(this.toString()+e.toString(),!1)}isAncestorOf(e){return e.toString()!==this.toString()&&e.toString().startsWith(this.toString())}isDecendantOf(e){return e.toString()!==this.toString()&&this.toString().startsWith(e.toString())}isTopLevel(){return 1===this.list().length}}const u=s(c,{className:"Key",symbolName:"@ipfs/interface-datastore/key"});t.exports=u}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"interface-datastore",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/interface-datastore/src/key.js"}],[4413,{"err-code":2358},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("err-code");t.exports.dbOpenFailedError=e=>(e=e||new Error("Cannot open database"),r(e,"ERR_DB_OPEN_FAILED")),t.exports.dbDeleteFailedError=e=>(e=e||new Error("Delete failed"),r(e,"ERR_DB_DELETE_FAILED")),t.exports.dbWriteFailedError=e=>(e=e||new Error("Write failed"),r(e,"ERR_DB_WRITE_FAILED")),t.exports.notFoundError=e=>(e=e||new Error("Not Found"),r(e,"ERR_NOT_FOUND"))}}},{package:"interface-datastore",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/interface-datastore/src/errors.js"}],[4417,{os:5366,path:5399,"pull-defer/source":5457,"pull-stream":5480,"uuid/v4":4412},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("pull-stream"),s=e("pull-defer/source"),i=e("path"),o=e("os"),a=e("uuid/v4");n.asyncFilter=function(e){let t,n,r=!1;return function(s){return function i(o,a){if(n)return a(n);o?(n=o,s(o,r?()=>{r?t=a:a(o)}:a)):s(null,((s,o)=>{s?a(s):n?a(n):(r=!0,e(o,((e,s)=>{r=!1,n?(a(n),t(n)):e?i(e,a):s?a(null,o):i(null,a)})))}))}}},n.asyncSort=function(e){const t=s(),n=r.collect(((n,s)=>{if(n)return t.abort(n);e(s,((e,n)=>{if(e)return t.abort(e);t.resolve(r.values(s))}))}));return function(e){return n(e),t}},n.replaceStartWith=function(e,t){const n=new RegExp("^"+t);return e.replace(n,"")},n.tmpdir=()=>i.join(o.tmpdir(),a())}}},{package:"interface-datastore",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/interface-datastore/src/utils.js"}],[4416,{"./errors":4413,"./key":4415,"./utils":4417,"async/setImmediate":1776,"pull-stream":5480},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("pull-stream"),s=e("async/setImmediate"),i=e("./utils").asyncFilter,o=e("./utils").asyncSort,a=e("./key"),c=e("./errors");t.exports=class{constructor(){this.data={}}open(e){s(e)}put(e,t,n){this.data[e.toString()]=t,s(n)}get(e,t){this.has(e,((n,r)=>n?t(n):r?void t(null,this.data[e.toString()]):t(c.notFoundError())))}has(e,t){s((()=>{t(null,this.data[e.toString()]!==undefined)}))}delete(e,t){delete this.data[e.toString()],s((()=>{t()}))}batch(){let e=[],t=[];return{put(t,n){e.push([t,n])},delete(e){t.push(e)},commit:n=>{e.forEach((e=>{this.data[e[0].toString()]=e[1]})),e=[],t.forEach((e=>{delete this.data[e.toString()]})),t=[],s(n)}}}query(e){let t=[r.keys(this.data),r.map((e=>({key:new a(e),value:this.data[e]})))],n=[];if(null!=e.prefix){const t=e.prefix;n.push(((e,n)=>n(null,e.key.toString().startsWith(t))))}if(null!=e.filters&&(n=n.concat(e.filters)),t=t.concat(n.map((e=>i(e)))),null!=e.orders&&(t=t.concat(e.orders.map((e=>o(e))))),null!=e.offset){let n=0;t.push(r.filter((()=>n++>=e.offset)))}return null!=e.limit&&t.push(r.take(e.limit)),!0===e.keysOnly&&t.push(r.map((e=>({key:e.key})))),r.apply(null,t)}close(e){s(e)}}}}},{package:"interface-datastore",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/interface-datastore/src/memory.js"}],[1752,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return t},t.exports=n.default}}},{package:"async",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async/internal/findGetResult.js"}],[1749,{"./eachOfLimit":1750,"./wrapAsync":1766},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t,n,i,o){return e((0,r.default)(n),t,(0,s.default)(i),o)}};var r=i(e("./eachOfLimit")),s=i(e("./wrapAsync"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default}}},{package:"async",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async/internal/doParallelLimit.js"}],[4627,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports='\n  syntax = "proto2";\n\n  package ipfs.pin;\n\n  option go_package = "pb";\n\n  message Set {\n    optional uint32 version = 1;\n    optional uint32 fanout = 2;\n    optional fixed32 seed = 3;\n  }\n'}}},{package:"ipfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/src/core/components/pin.proto.js"}],[4303,{},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){for(var t=r.BASE,n=0,s=e.length;n<s;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}r.BASE=2166136261,t.exports=r}}},{package:"fnv1a",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/fnv1a/index.js"}],[1779,{"./internal/doLimit":1747,"./someLimit":1778},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=i(e("./someLimit")),s=i(e("./internal/doLimit"));function i(e){return e&&e.__esModule?e:{default:e}}n.default=(0,s.default)(r.default,1),t.exports=n.default}}},{package:"async",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async/someSeries.js"}],[4909,{"./cms":4907,"err-code":2358,"interface-datastore":4414,"libp2p-crypto":4853,"merge-options":5196,"pull-stream/pull":5481,"pull-stream/sinks/collect":5482,"sanitize-filename":5744},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("sanitize-filename"),s=e("merge-options"),i=e("libp2p-crypto"),o=e("interface-datastore"),a=e("pull-stream/sinks/collect"),c=e("pull-stream/pull"),u=e("./cms"),l=e("err-code"),d="/info/",h=14,f=16,p=1e3,m={dek:{keyLength:64,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function g(e){return!!e&&("string"==typeof e&&e===r(e.trim()))}function y(e,t){const n=800*Math.random()+200;setTimeout(e,n,t,null)}function _(e){return new o.Key("/pkcs8/"+e)}function b(e){return new o.Key(d+e)}t.exports=class{constructor(e,t){if(!e)throw new Error("store is required");this.store=e;const n=s(m,t);if(!n.passPhrase||n.passPhrase.length<20)throw new Error("passPhrase must be least 20 characters");if(n.dek.keyLength<h)throw new Error(`dek.keyLength must be least ${h} bytes`);if(n.dek.salt.length<f)throw new Error(`dek.saltLength must be least ${f} bytes`);if(n.dek.iterationCount<p)throw new Error(`dek.iterationCount must be least ${p}`);const r=i.pbkdf2(n.passPhrase,n.dek.salt,n.dek.iterationCount,n.dek.keyLength,n.dek.hash);Object.defineProperty(this,"_",{value:()=>r})}get cms(){return new u(this)}static generateOptions(){const e=Object.assign({},m),t=3*Math.ceil(f/3);return e.dek.salt=i.randomBytes(t).toString("base64"),e}static get options(){return m}createKey(e,t,n,r){const s=this;if(!g(e)||"self"===e)return y(r,l(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));if("string"!=typeof t)return y(r,l(new Error(`Invalid key type '${t}'`),"ERR_INVALID_KEY_TYPE"));if(!Number.isSafeInteger(n))return y(r,l(new Error(`Invalid key size '${n}'`),"ERR_INVALID_KEY_SIZE"));const o=_(e);s.store.has(o,((a,c)=>{if(a)return y(r,a);if(c)return y(r,l(new Error(`Key '${e}' already exists`),"ERR_KEY_ALREADY_EXISTS"));if("rsa"===t.toLowerCase())if(n<2048)return y(r,l(new Error(`Invalid RSA key size ${n}`),"ERR_INVALID_KEY_SIZE"));i.keys.generateKeyPair(t,n,((t,n)=>{if(t)return y(r,t);n.id(((t,i)=>{if(t)return y(r,t);n.export(this._(),((t,n)=>{if(t)return y(r,t);const a={name:e,id:i},c=s.store.batch();c.put(o,n),c.put(b(e),JSON.stringify(a)),c.commit((e=>{if(e)return y(r,e);r(null,a)}))}))}))}))}))}listKeys(e){const t={prefix:d};c(this.store.query(t),a(((t,n)=>{if(t)return y(e,t);const r=n.map((e=>JSON.parse(e.value)));e(null,r)})))}findKeyById(e,t){this.listKeys(((n,r)=>{if(n)return y(t,n);const s=r.find((t=>t.id===e));t(null,s)}))}findKeyByName(e,t){if(!g(e))return y(t,l(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));const n=b(e);this.store.get(n,((n,r)=>{if(n)return y(t,l(new Error(`Key '${e}' does not exist. ${n.message}`),"ERR_KEY_NOT_FOUND"));t(null,JSON.parse(r.toString()))}))}removeKey(e,t){const n=this;if(!g(e)||"self"===e)return y(t,l(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));const r=_(e);n.findKeyByName(e,((s,i)=>{if(s)return y(t,s);const o=n.store.batch();o.delete(r),o.delete(b(e)),o.commit((e=>{if(e)return y(t,e);t(null,i)}))}))}renameKey(e,t,n){const r=this;if(!g(e)||"self"===e)return y(n,l(new Error(`Invalid old key name '${e}'`),"ERR_OLD_KEY_NAME_INVALID"));if(!g(t)||"self"===t)return y(n,l(new Error(`Invalid new key name '${t}'`),"ERR_NEW_KEY_NAME_INVALID"));const s=_(e),i=_(t),o=b(e),a=b(t);this.store.get(s,((c,u)=>{if(c)return y(n,l(new Error(`Key '${e}' does not exist. ${c.message}`),"ERR_KEY_NOT_FOUND"));const d=u.toString();r.store.has(i,((e,c)=>e?y(n,e):c?y(n,l(new Error(`Key '${t}' already exists`),"ERR_KEY_ALREADY_EXISTS")):void r.store.get(o,((e,c)=>{if(e)return y(n,e);const u=JSON.parse(c.toString());u.name=t;const l=r.store.batch();l.put(i,d),l.put(a,JSON.stringify(u)),l.delete(s),l.delete(o),l.commit((e=>{if(e)return y(n,e);n(null,u)}))}))))}))}exportKey(e,t,n){if(!g(e))return y(n,l(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));if(!t)return y(n,l(new Error("Password is required"),"ERR_PASSWORD_REQUIRED"));const r=_(e);this.store.get(r,((r,s)=>{if(r)return y(n,l(new Error(`Key '${e}' does not exist. ${r.message}`),"ERR_KEY_NOT_FOUND"));const o=s.toString();i.keys.__import__(o,this._(),((e,r)=>{if(e)return y(n,e);r.export(t,n)}))}))}importKey(e,t,n,r){const s=this;if(!g(e)||"self"===e)return y(r,l(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));if(!t)return y(r,"PEM encoded key is required");const o=_(e);s.store.has(o,((a,c)=>a?y(r,a):c?y(r,l(new Error(`Key '${e}' already exists`),"ERR_KEY_ALREADY_EXISTS")):void i.keys.__import__(t,n,((t,n)=>{if(t)return y(r,l(new Error("Cannot read the key, most likely the password is wrong"),"ERR_CANNOT_READ_KEY"));n.id(((t,i)=>{if(t)return y(r,t);n.export(this._(),((t,n)=>{if(t)return y(r,t);const a={name:e,id:i},c=s.store.batch();c.put(o,n),c.put(b(e),JSON.stringify(a)),c.commit((e=>{if(e)return y(r,e);r(null,a)}))}))}))}))))}importPeer(e,t,n){const r=this;if(!g(e))return y(n,l(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));if(!t||!t.privKey)return y(n,l(new Error("Peer.privKey is required"),"ERR_MISSING_PRIVATE_KEY"));const s=t.privKey,i=_(e);r.store.has(i,((t,o)=>t?y(n,t):o?y(n,l(new Error(`Key '${e}' already exists`),"ERR_KEY_ALREADY_EXISTS")):void s.id(((t,o)=>{if(t)return y(n,t);s.export(this._(),((t,s)=>{if(t)return y(n,t);const a={name:e,id:o},c=r.store.batch();c.put(i,s),c.put(b(e),JSON.stringify(a)),c.commit((e=>{if(e)return y(n,e);n(null,a)}))}))}))))}_getPrivateKey(e,t){if(!g(e))return y(t,l(new Error(`Invalid key name '${e}'`),"ERR_INVALID_KEY_NAME"));this.store.get(_(e),((n,r)=>{if(n)return y(t,l(new Error(`Key '${e}' does not exist. ${n.message}`),"ERR_KEY_NOT_FOUND"));t(null,r.toString())}))}}}}},{package:"libp2p-keychain",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-keychain/src/keychain.js"}],[4646,{debug:2256,"err-code":2358,ipns:4685,"libp2p-crypto":4853,"peer-id":5413},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("ipns"),s=e("libp2p-crypto"),i=e("peer-id"),o=e("err-code"),a=e("debug"),c=a("ipfs:ipns:resolver");c.error=a("ipfs:ipns:resolver:error");t.exports=class{constructor(e){this._routing=e}resolve(e,t,n){if("function"==typeof t&&(n=t,t={}),"string"!=typeof e){const e="one or more of the provided parameters are not valid";return c.error(e),n(o(new Error(e),"ERR_INVALID_PARAMETER"))}const r=(t=t||{}).recursive&&"true"===t.recursive.toString(),s=e.split("/");if(3!==s.length||""!==s[0]){const t=`invalid name syntax for ${e}`;return c.error(t),n(o(new Error(t),"ERR_INVALID_NAME_SYNTAX"))}const i=s[2];let a;r&&(a=32),this.resolver(i,a,((t,r)=>{if(t)return n(t);c(`${e} was locally resolved correctly`),n(null,r)}))}resolver(e,t,n){if(0===t){const e="could not resolve name (recursion limit of 32 exceeded)";return c.error(e),n(o(new Error(e),"ERR_RESOLVE_RECURSION_LIMIT"))}this._resolveName(e,((e,r)=>{if(e)return n(e);const s=r.split("/");if("ipfs"===s[1]||!t)return n(null,r);this.resolver(s[2],t-1,n)}))}_resolveName(e,t){let n;try{n=i.createFromB58String(e)}catch(e){return t(e)}const{routingKey:a,routingPubKey:u}=r.getIdKeys(n.toBytes());this._routing.get(a.toBuffer(),((i,l)=>{if(i){if("ERR_NOT_FOUND"!==i.code){const e=`unexpected error getting the ipns record ${n.id}`;return c.error(e),t(o(new Error(e),"ERR_UNEXPECTED_ERROR_GETTING_RECORD"))}const r=`record requested was not found for ${e} (${a}) in the network`;return c.error(r),t(o(new Error(r),"ERR_NO_RECORD_FOUND"))}let d;try{d=r.unmarshal(l)}catch(i){const e="found ipns record that we couldn't convert to a value";return c.error(e),t(o(new Error(e),"ERR_INVALID_RECORD_RECEIVED"))}if(d.pubKey)return this._validateRecord(n,d,t);this._routing.get(a.toBuffer(),((r,i)=>{if(r){if("ERR_NOT_FOUND"!==r.code){const e=`unexpected error getting the public key for the ipns record ${n.id}`;return c.error(e),t(o(new Error(e),"ERR_UNEXPECTED_ERROR_GETTING_PUB_KEY"))}const s=`public key requested was not found for ${e} (${u}) in the network`;return c.error(s),t(o(new Error(s),"ERR_NO_RECORD_FOUND"))}try{n.pubKey=s.keys.unmarshalPublicKey(i)}catch(r){const e="found public key record that we couldn't convert to a value";return c.error(e),t(o(new Error(e),"ERR_INVALID_PUB_KEY_RECEIVED"))}this._validateRecord(n,d,t)}))}))}_validateRecord(e,t,n){r.extractPublicKey(e,t,((e,s)=>{if(e)return n(e);r.validate(s,t,(e=>{if(e)return n(e);n(null,t.value.toString())}))}))}}}}},{package:"ipfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/src/core/ipns/resolver.js"}],[5722,{ms:5207},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=o;var r=e("ms"),s=o.prototype,i=new Date%1e9;function o(e){e=e||{},this.id=e.id||(1e9*Math.random()>>>0)+i++,this.max=e.max||Infinity,this.items=e.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(e.lastModified||new Date);for(var t,n,r=this.items.length;r--;)t=this.items[r],n=new Date(t.expires)-new Date,this._lookup[t.key]=t,n>0?this.expire(t.key,n):n<=0&&this.delete(t.key)}s.has=function(e){return e in this._lookup},s.get=function(e){if(!this.has(e))return null;var t=this._lookup[e];return t.refresh&&this.expire(e,t.refresh),this.items.splice(this.items.indexOf(t),1),this.items.push(t),t.value},s.meta=function(e){if(!this.has(e))return null;var t=this._lookup[e];return"meta"in t?t.meta:null},s.set=function(e,t,n){var r=this._lookup[e],s=this._lookup[e]={key:e,value:t};return this.lastModified=new Date,r?(clearTimeout(r.timeout),this.items.splice(this.items.indexOf(r),1,s)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(s),this.size++),n&&("ttl"in n&&this.expire(e,n.ttl),"meta"in n&&(s.meta=n.meta),n.refresh&&(s.refresh=n.ttl)),this},s.delete=function(e){var t=this._lookup[e];return!!t&&(this.lastModified=new Date,this.items.splice(this.items.indexOf(t),1),clearTimeout(t.timeout),delete this._lookup[e],this.size--,this)},s.expire=function(e,t){var n=t||0,s=this._lookup[e];if(!s)return this;if("string"==typeof n&&(n=r(t)),"number"!=typeof n)throw new TypeError("Expiration time must be a string or number.");return clearTimeout(s.timeout),s.timeout=setTimeout(this.delete.bind(this,s.key),n),s.expires=Number(new Date)+n,this},s.clear=function(){for(var e=this.items.length;e--;)this.delete(this.items[e].key);return this},s.toJSON=function(){for(var e,t=new Array(this.items.length),n=t.length;n--;)e=this.items[n],t[n]={key:e.key,meta:e.meta,value:e.value,expires:e.expires,refresh:e.refresh};return{id:this.id,max:isFinite(this.max)?this.max:undefined,lastModified:this.lastModified,items:t}}}}},{package:"receptacle",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/receptacle/index.js"}],[4644,{"async/series":1775,debug:2256,"err-code":2358,"interface-datastore":4414,ipns:4685,"peer-id":5413},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("peer-id"),{Key:s}=e("interface-datastore"),i=e("async/series"),o=e("err-code"),a=e("debug"),c=a("ipfs:ipns:publisher");c.error=a("ipfs:ipns:publisher:error");const u=e("ipns");t.exports=class{constructor(e,t){this._routing=e,this._datastore=t}publishWithEOL(e,t,n,s){if(!e||!e.bytes){const e="one or more of the provided parameters are not defined";return c.error(e),s(o(new Error(e),"ERR_UNDEFINED_PARAMETER"))}r.createFromPrivKey(e.bytes,((r,i)=>{if(r)return s(r);this._updateOrCreateRecord(e,t,n,i,((e,t)=>{if(e)return s(e);this._putRecordToRouting(t,i,s)}))}))}publish(e,t,n){this.publishWithEOL(e,t,36e5,n)}_putRecordToRouting(e,t,n){if(!r.isPeerId(t)){const e="peerId received is not valid";return c.error(e),n(o(new Error(e),"ERR_INVALID_PEER_ID"))}const s=t._pubKey;u.embedPublicKey(s,e,((r,o)=>{if(r)return n(r);let a;try{a=u.getIdKeys(t.toBytes())}catch(r){return c.error(r),n(r)}i([n=>this._publishEntry(a.routingKey,o||e,t,n),e=>this._publishPublicKey(a.routingPubKey,s,t,e)],(t=>{if(t)return c.error(t),n(t);n(null,o||e)}))}))}_publishEntry(e,t,n,r){if(!s.isKey(e)){const e="datastore key does not have a valid format";return c.error(e),r(o(new Error(e),"ERR_INVALID_DATASTORE_KEY"))}let i;try{i=u.marshal(t)}catch(e){return c.error(e),r(e)}this._routing.put(e.toBuffer(),i,((t,n)=>{if(t){const t=`ipns record for ${e.toString()} could not be stored in the routing`;return c.error(t),r(o(new Error(t),"ERR_PUTTING_TO_ROUTING"))}c(`ipns record for ${e.toString()} was stored in the routing`),r(null,n)}))}_publishPublicKey(e,t,n,r){if(!s.isKey(e)){const e="datastore key does not have a valid format";return c.error(e),r(o(new Error(e),"ERR_INVALID_DATASTORE_KEY"))}if(!t||!t.bytes){const e="one or more of the provided parameters are not defined";return c.error(e),r(o(new Error(e),"ERR_UNDEFINED_PARAMETER"))}this._routing.put(e.toBuffer(),t.bytes,((t,n)=>{if(t){const t=`public key for ${e.toString()} could not be stored in the routing`;return c.error(t),r(o(new Error(t),"ERR_PUTTING_TO_ROUTING"))}c(`public key for ${e.toString()} was stored in the routing`),r(null,n)}))}_getPublished(e,t,n){if(!r.isPeerId(e)){const e="peerId received is not valid";return c.error(e),n(o(new Error(e),"ERR_INVALID_PEER_ID"))}const s=!1!==(t=t||{}).checkRouting;this._datastore.get(u.getLocalKey(e.id),((t,r)=>{if(t){if("ERR_NOT_FOUND"!==t.code){const t=`unexpected error getting the ipns record ${e.id} from datastore`;return c.error(t),n(o(new Error(t),"ERR_UNEXPECTED_DATASTORE_RESPONSE"))}if(!s)return n(o(t));let r;try{r=u.getIdKeys(e.toBytes())}catch(t){return c.error(t),n(t)}this._routing.get(r.routingKey.toBuffer(),((e,t)=>{if(e)return n(e);this._unmarshalData(t,n)}))}else this._unmarshalData(r,n)}))}_unmarshalData(e,t){let n;try{n=u.unmarshal(e)}catch(e){return c.error(e),t(o(e,"ERR_INVALID_RECORD_DATA"))}t(null,n)}_updateOrCreateRecord(e,t,n,s,i){if(!r.isPeerId(s)){const e="peerId received is not valid";return c.error(e),i(o(new Error(e),"ERR_INVALID_PEER_ID"))}this._getPublished(s,{checkRouting:!0},((r,a)=>{if(r&&"ERR_NOT_FOUND"!==r.code){const e=`unexpected error when determining the last published IPNS record for ${s.id}`;return c.error(e),i(o(new Error(e),"ERR_DETERMINING_PUBLISHED_RECORD"))}let l=0;a&&a.sequence!==undefined&&(l=a.value.toString()!==t?a.sequence+1:a.sequence),u.create(e,t,l,n,((e,n)=>{if(e){const e=`ipns record for ${t} could not be created`;return c.error(e),i(o(new Error(e),"ERR_CREATING_IPNS_RECORD"))}const r=u.marshal(n);this._datastore.put(u.getLocalKey(s.id),r,((e,r)=>{if(e){const e=`ipns record for ${t} could not be stored in the datastore`;return c.error(e),i(o(new Error(e),"ERR_STORING_IN_DATASTORE"))}c(`ipns record for ${t} was stored in the datastore`),i(null,n)}))}))}))}}}}},{package:"ipfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/src/core/ipns/publisher.js"}],[4645,{"../../../../is-buffer/index.js":4689,"async/each":1736,"async/waterfall":1782,debug:2256,"err-code":2358,ipns:4685,"libp2p-crypto":4853,"peer-id":5413},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("ipns"),s=e("libp2p-crypto"),i=e("peer-id"),o=e("err-code"),a=e("debug"),c=e("async/each"),u=e("async/waterfall"),l=a("ipfs:ipns:republisher");l.error=a("ipfs:ipns:republisher:error");t.exports=class{constructor(e,t,n,r,s){this._publisher=e,this._datastore=t,this._peerInfo=n,this._keychain=r,this._options=s,this._republishHandle=null}start(){if(this._republishHandle){const e="already running";throw l.error(e),o(new Error(e),"ERR_REPUBLISH_ALREADY_RUNNING")}const e={_onCancel:null,_timeoutId:null,runPeriodically:(t,n)=>{e._timeoutId=setTimeout((()=>{e._timeoutId=null,t((r=>{if(e._onCancel)return e._onCancel();e.runPeriodically(t,r||n)}))}),n)},cancel:t=>{if(e._timeoutId)return clearTimeout(e._timeoutId),t();e._onCancel=t}},{privKey:t}=this._peerInfo.id,{pass:n}=this._options;e.runPeriodically((e=>{this._republishEntries(t,n,(()=>e(144e5)))}),6e4),this._republishHandle=e}stop(e){const t=this._republishHandle;if(!t){const t="not running";return l.error(t),e(o(new Error(t),"ERR_REPUBLISH_NOT_RUNNING"))}this._republishHandle=null,t.cancel(e)}_republishEntries(e,t,n){this._republishEntry(e,(e=>{if(e){const e="cannot republish entry for the node's private key";l.error(e)}else t?this._keychain.listKeys(((e,r)=>{e?l.error(e):c(r,((e,n)=>{u([n=>this._keychain.exportKey(e.name,t,n),(e,n)=>s.keys.__import__(e,t,n)],((e,t)=>{e?l.error(e):this._republishEntry(t,n)}))}),(e=>{e&&l.error(e),n(null)}))})):n(null)}))}_republishEntry(e,t){if(!e||!e.bytes){const e="one or more of the provided parameters are not defined";return l.error(e),t(o(new Error(e),"ERR_UNDEFINED_PARAMETER"))}u([t=>i.createFromPrivKey(e.bytes,t),(e,t)=>this._getPreviousValue(e,t)],((n,r)=>{if(n)return t("ERR_NO_ENTRY_FOUND"===n.code?null:n);this._publisher.publishWithEOL(e,r,864e5,t)}))}_getPreviousValue(e,t){if(!i.isPeerId(e)){const e="peerId received is not valid";return l.error(e),t(o(new Error(e),"ERR_INVALID_PEER_ID"))}this._datastore.get(r.getLocalKey(e.id),((s,i)=>{if(s&&s.notFound){const n=`no previous entry for record with id: ${e.id}`;return l.error(n),t(o(new Error(n),"ERR_NO_ENTRY_FOUND"))}if(s)return t(s);if(!n.isBuffer(i)){const e="found ipns record that we couldn't process";return l.error(e),t(o(new Error(e),"ERR_INVALID_IPNS_RECORD"))}let a;try{a=r.unmarshal(i)}catch(s){const e="found ipns record that we couldn't convert to a value";return l.error(e),t(o(new Error(e),"ERR_INVALID_IPNS_RECORD"))}t(null,a.value)}))}}}).call(this)}).call(this,{isBuffer:e("../../../../is-buffer/index.js")})}}},{package:"ipfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/src/core/ipns/republisher.js"}],[4432,{"./constants":4427,"./utils":4440,events:2085},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("events").EventEmitter,s=e("./constants"),i=e("./utils").logger,o=e=>`unwant:${e}`,a=e=>`block:${e}`;t.exports=class extends r{constructor(e){super(),this.setMaxListeners(s.maxListeners),this._log=i(e,"notif"),this._unwantListeners={},this._blockListeners={}}hasBlock(e){const t=`block:${e.cid.buffer.toString()}`;this._log(t),this.emit(t,e)}wantBlock(e,t,n){const r=e.buffer.toString();this._log(`wantBlock:${r}`),this._unwantListeners[r]=()=>{this._log(`manual unwant: ${r}`),this._cleanup(r),n()},this._blockListeners[r]=e=>{this._cleanup(r),t(e)},this.once(o(r),this._unwantListeners[r]),this.once(a(r),this._blockListeners[r])}unwantBlock(e){const t=`unwant:${e.buffer.toString()}`;this._log(t),this.emit(t)}_cleanup(e){this._unwantListeners[e]&&(this.removeListener(o(e),this._unwantListeners[e]),delete this._unwantListeners[e]),this._blockListeners[e]&&(this.removeListener(a(e),this._blockListeners[e]),delete this._blockListeners[e])}}}}},{package:"ipfs-bitswap",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-bitswap/src/notifications.js"}],[4440,{debug:2256},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("debug"),s=(e,t,n)=>{let r=0;const s=n.length;for(;r<s;){if(e(t,n[r]))return!0;r+=1}return!1};t.exports={logger:(e,t)=>{const n=["bitswap"];t&&n.push(t),e&&n.push(`${e.toB58String().slice(0,8)}`);const s=r(n.join(":"));return s.error=r(n.concat(["error"]).join(":")),s},includesWith:s,uniqWith:(e,t)=>{let n=0;const r=t.length,i=[];let o;for(;n<r;)o=t[n],s(e,o,i)||(i[i.length]=o),n+=1;return i},groupBy:(e,t)=>t.reduce(((t,n)=>{const r=e(n);return t[r]?t[r].push(n):t[r]=[n],t}),{}),pullAllWith:(e,t,n)=>t.filter((t=>!s(e,t,n))),sortBy:(e,t)=>Array.prototype.slice.call(t,0).sort(((t,n)=>{const r=e(t),s=e(n);return r<s?-1:r>s?1:0}))}}}},{package:"ipfs-bitswap",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-bitswap/src/utils.js"}],[4428,{"../types/message":4436,"../types/wantlist":4439,"../utils":4440,"./ledger":4429,"async/each":1736,"async/eachSeries":1741,"async/map":1767,"async/nextTick":1770,"async/waterfall":1782,"just-debounce-it":4754},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("async/each"),s=e("async/eachSeries"),i=e("async/waterfall"),o=e("async/nextTick"),a=e("async/map"),c=e("just-debounce-it"),u=e("../types/message"),l=e("../types/wantlist"),d=e("./ledger"),{logger:h,groupBy:f,pullAllWith:p,uniqWith:m}=e("../utils"),g=524288;t.exports=class{constructor(e,t,n,r){this._log=h(e,"engine"),this.blockstore=t,this.network=n,this._stats=r,this.ledgerMap=new Map,this._running=!1,this._tasks=[],this._outbox=c(this._processTasks.bind(this),100)}_sendBlocks(e,t,n){if(t.reduce(((e,t)=>e+t.data.byteLength),0)<g)return this._sendSafeBlocks(e,t,n);let r=0,i=[],a=t.length;s(t,((t,n)=>{if(a--,i.push(t),r+=t.data.byteLength,r>=g||0===a){r=0;const t=i.slice();i=[],this._sendSafeBlocks(e,t,(e=>{e&&this._log("sendblock error: %s",e.message),n()}))}else o(n)}),n)}_sendSafeBlocks(e,t,n){const r=new u(!1);t.forEach((e=>r.addBlock(e))),this.network.sendMessage(e,r,n)}_processTasks(){if(!this._running||!this._tasks.length)return;const e=this._tasks;this._tasks=[];const t=e.map((e=>e.entry)).map((e=>e.cid)),n=m(((e,t)=>e.equals(t)),t),s=f((e=>e.target.toB58String()),e);i([e=>a(n,((e,t)=>{this.blockstore.get(e,t)}),e),(e,n)=>r(Object.values(s),((n,r)=>{const s=n[0].target,i=t.map((t=>e.find((e=>e.cid.equals(t)))));this._sendBlocks(s,i,(e=>{e?this._log.error("should never happen: ",e):i.forEach((e=>this.messageSent(s,e))),r()}))}),n)],(e=>{this._tasks=[],e&&this._log.error(e)}))}wantlistForPeer(e){const t=e.toB58String();return this.ledgerMap.has(t)?this.ledgerMap.get(t).wantlist.sortedEntries():new Map}ledgerForPeer(e){const t=e.toB58String(),n=this.ledgerMap.get(t);return n?{peer:n.partner.toPrint(),value:n.debtRatio(),sent:n.accounting.bytesSent,recv:n.accounting.bytesRecv,exchanged:n.exchangeCount}:null}peers(){return Array.from(this.ledgerMap.values()).map((e=>e.partner))}receivedBlocks(e){e.length&&(this.ledgerMap.forEach((t=>{e.map((e=>t.wantlistContains(e))).filter(Boolean).forEach((e=>{this._tasks.push({entry:e,target:t.partner})}))})),this._outbox())}messageReceived(e,t,n){const r=this._findOrCreate(e);if(t.empty)return o(n);if(t.full&&(r.wantlist=new l),this._processBlocks(t.blocks,r),0===t.wantlist.size)return o(n);let s=[],i=[];t.wantlist.forEach((e=>{e.cancel?(r.cancelWant(e.cid),s.push(e)):(r.wants(e.cid,e.priority),i.push(e))})),this._cancelWants(r,e,s),this._addWants(r,e,i,n)}_cancelWants(e,t,n){const r=t.toB58String();this._tasks=p(((e,t)=>{const n=e.target.toB58String()===r,s=e.entry.cid.equals(t.cid);return n&&s}),this._tasks,n)}_addWants(e,t,n,s){r(n,((e,n)=>{this.blockstore.has(e.cid,((r,s)=>{r?this._log.error("failed existence check"):s&&this._tasks.push({entry:e.entry,target:t}),n()}))}),(()=>{this._outbox(),s()}))}_processBlocks(e,t,n){const r=[];e.forEach(((e,n)=>{this._log("got block (%s bytes)",e.data.length),t.receivedBytes(e.data.length),r.push(e.cid)})),this.receivedBlocks(r)}messageSent(e,t){const n=this._findOrCreate(e);n.sentBytes(t?t.data.length:0),t&&t.cid&&n.wantlist.remove(t.cid)}numBytesSentTo(e){return this._findOrCreate(e).accounting.bytesSent}numBytesReceivedFrom(e){return this._findOrCreate(e).accounting.bytesRecv}peerDisconnected(e){}_findOrCreate(e){const t=e.toB58String();if(this.ledgerMap.has(t))return this.ledgerMap.get(t);const n=new d(e);return this.ledgerMap.set(t,n),this._stats&&this._stats.push(t,"peerCount",1),n}start(e){this._running=!0,o((()=>e()))}stop(e){this._running=!1,o((()=>e()))}}}}},{package:"ipfs-bitswap",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-bitswap/src/decision-engine/index.js"}],[4433,{"./stat":4434,events:2085},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("events"),s=e("./stat"),i={movingAverageIntervals:[6e4,3e5,9e5]};t.exports=class extends r{constructor(e,t){super();const n=Object.assign({},i,t);if("number"!=typeof n.computeThrottleTimeout)throw new Error("need computeThrottleTimeout");if("number"!=typeof n.computeThrottleMaxQueueSize)throw new Error("need computeThrottleMaxQueueSize");this._initialCounters=e,this._options=n,this._enabled=this._options.enabled,this._global=new s(e,n),this._global.on("update",(e=>this.emit("update",e))),this._peers=new Map}enable(){this._enabled=!0,this._options.enabled=!0,this._global.enable()}disable(){this._enabled=!1,this._options.enabled=!1,this._global.disable()}stop(){this._enabled=!1,this._global.stop();for(let e of this._peers)e[1].stop()}get snapshot(){return this._global.snapshot}get movingAverages(){return this._global.movingAverages}forPeer(e){return e.toB58String&&(e=e.toB58String()),this._peers.get(e)}push(e,t,n){if(this._enabled&&(this._global.push(t,n),e)){let r=this._peers.get(e);r||(r=new s(this._initialCounters,this._options),this._peers.set(e,r)),r.push(t,n)}}disconnected(e){const t=e.toB58String(),n=this._peers.get(t);n&&(n.stop(),this._peers.delete(t))}}}}},{package:"ipfs-bitswap",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-bitswap/src/stats/index.js"}],[4441,{"../constants":4427,"../types/message":4436,"../types/wantlist":4439,"../utils":4440,"./msg-queue":4442,"async/nextTick":1770},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("async/nextTick"),s=e("../types/message"),i=e("../types/wantlist"),o=e("../constants"),a=e("./msg-queue"),c=e("../utils").logger;t.exports=class{constructor(e,t,n){this.peers=new Map,this.wantlist=new i(n),this.network=t,this._stats=n,this._peerId=e,this._log=c(e,"want")}_addEntries(e,t,n){const r=e.map(((e,n)=>new s.Entry(e,o.kMaxPriority-n,t)));r.forEach((e=>{e.cancel?n?this.wantlist.removeForce(e.cid):this.wantlist.remove(e.cid):(this._log("adding to wl"),this.wantlist.add(e.cid,e.priority))}));for(let e of this.peers.values())e.addEntries(r)}_startPeerHandler(e){let t=this.peers.get(e.toB58String());if(t)return void t.refcnt++;t=new a(this._peerId,e,this.network);const n=new s(!0);for(let e of this.wantlist.entries())n.addEntry(e[1].cid,e[1].priority);return t.addMessage(n),this.peers.set(e.toB58String(),t),t}_stopPeerHandler(e){const t=this.peers.get(e.toB58String());t&&(t.refcnt--,t.refcnt>0||this.peers.delete(e.toB58String()))}wantBlocks(e){this._addEntries(e,!1)}unwantBlocks(e){this._log("unwant blocks: %s",e.length),this._addEntries(e,!0,!0)}cancelWants(e){this._log("cancel wants: %s",e.length),this._addEntries(e,!0)}connectedPeers(){return Array.from(this.peers.keys())}connected(e){this._startPeerHandler(e)}disconnected(e){this._stopPeerHandler(e)}start(e){this.timer=setInterval((()=>{this._log("resend full-wantlist");const e=new s(!0);this.wantlist.forEach((t=>{e.addEntry(t.cid,t.priority)})),this.peers.forEach((t=>t.addMessage(e)))}),6e4),r((()=>e()))}stop(e){this.peers.forEach((e=>this.disconnected(e.peerId))),clearInterval(this.timer),r((()=>e()))}}}}},{package:"ipfs-bitswap",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-bitswap/src/want-manager/index.js"}],[4431,{"./constants":4427,"./types/message":4436,"./utils":4440,"async/each":1736,"async/nextTick":1770,"async/waterfall":1782,"pull-length-prefixed":5462,"pull-stream":5480},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("pull-length-prefixed"),s=e("pull-stream"),i=e("async/waterfall"),o=e("async/each"),a=e("async/nextTick"),c=e("./types/message"),u=e("./constants"),l=e("./utils").logger,d="/ipfs/bitswap/1.0.0",h="/ipfs/bitswap/1.1.0";t.exports=class{constructor(e,t,n,r){this._log=l(e.peerInfo.id,"network"),n=n||{},this.libp2p=e,this.bitswap=t,this.b100Only=n.b100Only||!1,this._stats=r,this._running=!1}start(e){this._running=!0,this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._onConnection=this._onConnection.bind(this),this.libp2p.handle(d,this._onConnection),this.b100Only||this.libp2p.handle(h,this._onConnection),this.libp2p.on("peer:connect",this._onPeerConnect),this.libp2p.on("peer:disconnect",this._onPeerDisconnect),this.libp2p.peerBook.getAllArray().filter((e=>e.isConnected())).forEach((e=>this._onPeerConnect(e))),a((()=>e()))}stop(e){this._running=!1,this.libp2p.unhandle(d),this.b100Only||this.libp2p.unhandle(h),this.libp2p.removeListener("peer:connect",this._onPeerConnect),this.libp2p.removeListener("peer:disconnect",this._onPeerDisconnect),a((()=>e()))}_onConnection(e,t){this._running&&(this._log("incomming new bitswap connection: %s",e),s(t,r.decode(),s.asyncMap(((e,t)=>c.deserialize(e,t))),s.asyncMap(((e,n)=>{t.getPeerInfo(((t,r)=>{if(t)return n(t);this.bitswap._receiveMessage(r.id,e,n)}))})),s.onEnd((e=>{this._log("ending connection"),e&&this.bitswap._receiveError(e)}))))}_onPeerConnect(e){this._running&&this.bitswap._onPeerConnected(e.id)}_onPeerDisconnect(e){this._running&&this.bitswap._onPeerDisconnected(e.id)}findProviders(e,t,n){this.libp2p.contentRouting.findProviders(e,{maxTimeout:u.providerRequestTimeout,maxNumProviders:t},n)}findAndConnect(e,t){i([t=>this.findProviders(e,u.maxProvidersPerRequest,t),(e,t)=>{this._log("connecting to providers",e.map((e=>e.id.toB58String()))),o(e,((e,t)=>this.connectTo(e,t)))}],t)}provide(e,t){this.libp2p.contentRouting.provide(e,t)}sendMessage(e,t,n){if(!this._running)return n(new Error("network isn't running"));const i=e.toB58String()?e.toB58String():e.id.toB58String();this._log("sendMessage to %s",i,t),this._dialPeer(e,((i,o,a)=>{if(i)return n(i);let c;switch(a){case d:c=t.serializeToBitswap100();break;case h:c=t.serializeToBitswap110();break;default:return n(new Error("Unkown protocol: "+a))}!function(e,t,n){s(s.values([t]),r.encode(),e,s.onEnd(n))}(o,c,(e=>{e&&this._log.error(e)})),n(),this._updateSentStats(e,t.blocks)}))}connectTo(e,t){if(!this._running)return t(new Error("network isn't running"));this.libp2p.dial(e,t)}_dialPeer(e,t){this.libp2p.dialProtocol(e,h,((n,r)=>{n?this.libp2p.dialProtocol(e,d,((e,n)=>{if(e)return t(e);t(null,n,d)})):t(null,r,h)}))}_updateSentStats(e,t){const n=e.toB58String();this._stats&&(t.forEach((e=>this._stats.push(n,"dataSent",e.data.length))),this._stats.push(n,"blocksSent",t.size))}}}}},{package:"ipfs-bitswap",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-bitswap/src/network.js"}],[4928,{"./record":4929,"./selection":4931,"./validator":4935},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={Record:e("./record"),validator:e("./validator"),selection:e("./selection")}}}},{package:"libp2p-record",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-record/src/index.js"}],[4685,{"./errors":4684,"./pb/ipns.proto":4686,"./utils":4687,"base32-encode":1954,buffer:2084,debug:2256,"interface-datastore":4414,"libp2p-crypto":4853,multihashes:5237,"peer-id":5413,"timestamp-nano":5939},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("base32-encode"),s=e("timestamp-nano"),{Key:i}=e("interface-datastore"),o=e("libp2p-crypto"),a=e("peer-id"),c=e("multihashes"),u=e("debug"),l=u("jsipns");l.error=u("jsipns:error");const d=e("./pb/ipns.proto"),{parseRFC3339:h}=e("./utils"),f=e("./errors"),p=c.names.id,m="/ipns/",g=(e,t,n,r,s,i)=>{v(e,t,s,r,((e,o)=>{if(e)return l.error("record signature creation failed"),i(Object.assign(new Error("record signature verification failed"),{code:f.ERR_SIGNATURE_CREATION}));const a={value:t,signature:o,validityType:s,validity:r,sequence:n};return l(`ipns entry for ${t} created`),i(null,a)}))},y=(e,t,n)=>{const{value:r,validityType:s,validity:i}=t,o=w(r,s,i);e.verify(o,t.signature,((e,t)=>{if(e||!t)return l.error("record signature verification failed"),n(Object.assign(new Error("record signature verification failed"),{code:f.ERR_SIGNATURE_VERIFICATION}));if(s===d.ValidityType.EOL){let e;try{e=h(i.toString())}catch(e){return l.error("unrecognized validity format (not an rfc3339 format)"),n(Object.assign(new Error("unrecognized validity format (not an rfc3339 format)"),{code:f.ERR_UNRECOGNIZED_FORMAT}))}if(e<Date.now())return l.error("record has expired"),n(Object.assign(new Error("record has expired"),{code:f.ERR_IPNS_EXPIRED_RECORD}))}else if(s)return l.error("unrecognized validity type"),n(Object.assign(new Error("unrecognized validity type"),{code:f.ERR_UNRECOGNIZED_VALIDITY}));return l(`ipns entry for ${r} is valid`),n(null,null)}))},_=(e,t,n)=>{if(!t||!e){const e="one or more of the provided parameters are not defined";return l.error(e),n(Object.assign(new Error(e),{code:f.ERR_UNDEFINED_PARAMETER}))}if(t.pubKey){let e;try{e=o.keys.unmarshalPublicKey(t.pubKey)}catch(e){return l.error(e),n(e)}return n(null,e)}e.pubKey?n(null,e.pubKey):n(Object.assign(new Error("no public key is available"),{code:f.ERR_UNDEFINED_PARAMETER}))},b=e=>r(e,"RFC4648",{padding:!1}),v=(e,t,n,r,s)=>{const i=w(t,n,r);e.sign(i,((e,t)=>e?s(e):s(null,t)))},w=(e,t,r)=>{const s=n.from(e),i=n.from((e=>{if("0"===e.toString())return"EOL";{const t=`unrecognized validity type ${e.toString()}`;throw l.error(t),Object.assign(new Error(t),{code:f.ERR_UNRECOGNIZED_VALIDITY})}})(t)),o=n.from(r);return n.concat([s,o,i])},k=e=>{const t=c.decode(e.id);return t.code!==p?null:o.keys.unmarshalPublicKey(t.digest)},E=d.encode,S=d.decode,x={validate:(e,t,n)=>{const r=S(e),s=t.slice("/ipns/".length);let i;try{i=a.createFromBytes(s)}catch(e){return n(e)}_(i,r,((e,t)=>{if(e)return n(e);y(t,r,(e=>{if(e)return n(e);n(null,!0)}))}))},select:(e,t,n)=>{const r=S(e),s=S(t),i=r.sequence>s.sequence?0:1;if("function"!=typeof n)return i;n(null,i)}};t.exports={create:(e,t,n,r,i)=>{const o=new s(Date.now()+Number(r)).toString(),a=d.ValidityType.EOL;g(e,t,n,o,a,i)},createWithExpiration:(e,t,n,r,s)=>{const i=d.ValidityType.EOL;g(e,t,n,r,i,s)},validate:y,embedPublicKey:(e,t,n)=>{if(!e||!e.bytes||!t){const e="one or more of the provided parameters are not defined";return l.error(e),n(Object.assign(new Error(e),{code:f.ERR_UNDEFINED_PARAMETER}))}a.createFromPubKey(e.bytes,((r,s)=>{if(r)return l.error(r),n(Object.assign(new Error(r),{code:f.ERR_PEER_ID_FROM_PUBLIC_KEY}));let i;try{i=k(s)}catch(r){return l.error(r),n(Object.assign(new Error(r),{code:f.ERR_PUBLIC_KEY_FROM_ID}))}if(i)return n(null,null);try{t.pubKey=o.keys.marshalPublicKey(e)}catch(r){return l.error(r),n(r)}n(null,t)}))},extractPublicKey:_,getLocalKey:e=>new i(`/ipns/${b(e)}`),getIdKeys:e=>{const t=n.from("/pk/"),r=n.from("/ipns/");return{routingPubKey:new i(n.concat([t,e])),pkKey:new i(b(n.concat([t,e]))),routingKey:new i(n.concat([r,e])),ipnsKey:new i(b(n.concat([r,e])))}},marshal:E,unmarshal:S,validator:x,namespace:m,namespaceLength:m.length}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ipns",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipns/src/index.js"}],[4814,{"async/nextTick":1770,debug:2256,events:2085,mafmt:5193,multiaddr:5211,"peer-id":5413,"peer-info":5414},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("peer-id"),s=e("peer-info"),i=e("multiaddr"),o=e("mafmt"),a=e("events").EventEmitter,c=e("debug"),u=e("async/nextTick"),l=c("libp2p:bootstrap");l.error=c("libp2p:bootstrap:error");(t.exports=class extends a{constructor(e){super(),this._list=e.list,this._interval=e.interval||1e4,this._timer=null}start(e){if(this._timer)return u((()=>e()));this._timer=setInterval((()=>this._discoverBootstrapPeers()),this._interval),u((()=>{e(),this._discoverBootstrapPeers()}))}_discoverBootstrapPeers(){this._list.forEach((e=>{if(!function(e){try{return o.IPFS.matches(e)}catch(e){return!1}}(e))return l.error("Invalid multiaddr");const t=i(e),n=r.createFromB58String(t.getPeerId());s.create(n,((e,n)=>{if(e)return l.error("Invalid bootstrap peer id",e);n.multiaddrs.add(t),this.emit("peer",n)}))}))}stop(e){u(e),this._timer&&(clearInterval(this._timer),this._timer=null)}}).tag="bootstrap"}}},{package:"libp2p-bootstrap",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-bootstrap/src/index.js"}],[5469,{"./codec":5466,"./mplex":5470,"./muxer":5471,debug:2256,"pull-abortable":5452,"pull-stream":5480},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("pull-abortable"),s=e("pull-stream"),i=e("debug"),o=e("./codec"),a=e("./mplex"),c=e("./muxer"),u=i("pull-plex");function l(e,t){const n=new a(!t),i=r();s(e,n,i,e);const o=new c(e,n);return o.once("error",(e=>{u.err("got error",e),i.abort(e)})),o.on("close",(()=>{u("closing muxer"),i.abort()})),o}u.err=i("pull-plex:err"),(n=t.exports=l).pullMplex=a,n.multicodec=o,n.dialer=e=>l(e,!1),n.listener=e=>l(e,!0)}}},{package:"pull-mplex",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-mplex/src/index.js"}],[4984,{"./listener":4985,"class-is":2124,debug:2256,"interface-connection":4409,mafmt:5193,"multiaddr-to-uri":5208,"pull-ws/client":5513},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("pull-ws/client"),s=e("mafmt"),i=e("class-is"),o=e("interface-connection").Connection,a=e("multiaddr-to-uri"),c=e("debug")("libp2p:websockets:dialer"),u=e("./listener");t.exports=i(class{dial(e,t,n){"function"==typeof t&&(n=t,t={}),n=n||function(){};const s=a(e);c("dialing %s",s);const i=r(s,{binary:!0,onConnect:e=>{n(e)}}),u=new o(i);return u.getObservedAddrs=t=>t(null,[e]),u.close=e=>i.close(e),u}createListener(e,t){return"function"==typeof e&&(t=e,e={}),u(e,t)}filter(e){return Array.isArray(e)||(e=[e]),e.filter((e=>!e.protoNames().includes("p2p-circuit")&&(e.protoNames().includes("ipfs")&&(e=e.decapsulate("ipfs")),s.WebSockets.matches(e)||s.WebSocketsSecure.matches(e))))}},{className:"WebSockets",symbolName:"@libp2p/js-libp2p-websockets/websockets"})}}},{package:"libp2p-websockets",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-websockets/src/index.js"}],[4950,{"./handshake":4947,"./state":4951,assert:1703,debug:2256,"interface-connection":4409,once:5310,"peer-info":5414,"pull-stream/pull":5481},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("pull-stream/pull"),s=e("interface-connection").Connection,i=e("assert"),o=e("peer-info"),a=e("debug"),c=e("once"),u=a("libp2p:secio");u.error=a("libp2p:secio:error");const l=e("./handshake"),d=e("./state");t.exports={tag:"/secio/1.0.0",encrypt(e,t,n,a){i(e,"no local private key provided"),i(t,"no connection for the handshake  provided"),"function"==typeof n&&(a=n,n=undefined),a=c(a||function(e){e&&u.error(e)});const h=new d(e,n,3e5,a);const f=new s(undefined,t);return r(t,l(h,(function(e){if(e)return a(e);t.getPeerInfo(((e,n)=>{f.setInnerConn(new s(h.secure,t)),e&&f.setPeerInfo(new o(h.id.remote)),a()}))})),t),f}}}}},{package:"libp2p-secio",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-secio/src/index.js"}],[4881,{"./constants":4880,"./message":4884,"./network":4885,"./private":4889,"./providers":4890,"./query":4892,"./query-manager":4891,"./random-walk":4896,"./routing":4897,"./utils":4906,assert:1703,"async/each":1736,"async/filter":1743,"async/timeout":1780,"async/waterfall":1782,"err-code":2358,events:2085,"interface-datastore":4414,"libp2p-crypto":4853,"libp2p-record":4928,"peer-id":5413,"peer-info":5414,"promise-to-callback":5425},function(){with(this)return function(){"use strict";return function(e,t,n){const{EventEmitter:r}=e("events"),s=e("libp2p-record"),i=e("interface-datastore").MemoryDatastore,o=e("async/waterfall"),a=e("async/each"),c=e("async/filter"),u=e("async/timeout"),l=e("peer-id"),d=e("peer-info"),h=e("libp2p-crypto"),f=e("promise-to-callback"),p=e("err-code"),m=e("./routing"),g=e("./utils"),y=e("./constants"),_=e("./query"),b=e("./network"),v=e("./private"),w=e("./providers"),k=e("./message"),E=e("./random-walk"),S=e("./query-manager"),x=e("assert");t.exports=class extends r{constructor(e,t){super(),x(e,"libp2p-kad-dht requires a instance of Switch"),(t=t||{}).validators=t.validators||{},t.selectors=t.selectors||{},this.switch=e,this.kBucketSize=t.kBucketSize||y.K,this.concurrency=t.concurrency||y.ALPHA,this.disjointPaths=Math.ceil(this.kBucketSize/2),this.routingTable=new m(this.peerInfo.id,this.kBucketSize),this.datastore=t.datastore||new i,this.providers=new w(this.datastore,this.peerInfo.id),this.validators={pk:s.validator.validators.pk,...t.validators},this.selectors={pk:s.selection.selectors.pk,...t.selectors},this.network=new b(this),this._log=g.logger(this.peerInfo.id);const n=v(this);Object.keys(n).forEach((e=>{this[e]=n[e]})),this.randomWalk=new E(this,t.randomWalk),this._queryManager=new S}get isStarted(){return this._running}start(e){this._running=!0,this._queryManager.start(),this.network.start((t=>{if(t)return e(t);this.randomWalk.start(),e()}))}stop(e){this._running=!1,this.randomWalk.stop(),this.providers.stop(),this._queryManager.stop(),this.network.stop(e)}get peerInfo(){return this.switch._peerInfo}get peerBook(){return this.switch._peerBook}put(e,t,n,r){"function"==typeof n?(r=n,n={}):n=n||{},this._log("PutValue %b",e),o([n=>g.createPutRecord(e,t,n),(t,r)=>o([n=>this._putLocal(e,t,n),t=>this.getClosestPeers(e,{shallow:!0},t),(r,s)=>{n.minPeers=n.minPeers||r.length,c(r,((n,r)=>{this._putValueToPeer(e,t,n,(e=>{if(e)return this._log.error("Failed to put to peer (%b): %s",n.id,e),r(null,!1);r(null,!0)}))}),((e,t)=>{if(e)return s(e);if(n.minPeers>t.length){const e=p(new Error("Failed to put value to enough peers"),"ERR_NOT_ENOUGH_PUT_PEERS");return this._log.error(e),s(e)}s()}))}],r)],r)}get(e,t,n){"function"==typeof t?(n=t,t={}):t=t||{},t.maxTimeout||t.timeout?t.maxTimeout&&!t.timeout&&(t.timeout=t.maxTimeout):t.timeout=y.minute,this._get(e,t,n)}getMany(e,t,n,r){"function"==typeof n?(r=n,n={}):n=n||{},n.maxTimeout||n.timeout?n.maxTimeout&&!n.timeout&&(n.timeout=n.maxTimeout):n.timeout=y.minute,this._log("getMany %b (%s)",e,t);let s=[];this._getLocal(e,((i,a)=>{if(i&&0===t)return r(i);if(null==i&&s.push({val:a.value,from:this.peerInfo.id}),s.length>=t)return r(null,s);const c=[];o([t=>g.convertBuffer(e,t),(r,i)=>{const o=this.routingTable.closestPeers(r,this.kBucketSize);if(this._log("peers in rt: %d",o.length),0===o.length){const e="Failed to lookup key! No peers from routing table!";return this._log.error(e),i(p(new Error(e),"ERR_NO_PEERS_IN_ROUTING_TABLE"))}const a=new _(this,e,((n,r)=>{const i=g.pathSize(t-s.length,r),o=[];return c.push(o),async t=>{let n,r,s;try{const s=await this._getValueOrPeersAsync(t,e);n=s.record,r=s.peers}catch(e){if("ERR_INVALID_RECORD"!==e.code)throw e;s=e}const a={closerPeers:r};return(n&&n.value||s)&&o.push({val:n&&n.value,from:t}),o.length>=i&&(a.pathComplete=!0),a}}));u((e=>{f(a.run(o))(e)}),n.timeout)(((e,t)=>{a.stop(),i(e,t)}))}],(e=>{if(s=[].concat.apply(s,c).slice(0,t),e&&0===s.length)return r(e);r(null,s)}))}))}getClosestPeers(e,t,n){this._log("getClosestPeers to %b",e),"function"==typeof t&&(n=t,t={shallow:!1}),g.convertBuffer(e,((r,s)=>{if(r)return n(r);const i=this.routingTable.closestPeers(s,this.kBucketSize),a=new _(this,e,(()=>async n=>({closerPeers:await this._closerPeersSingleAsync(e,n),pathComplete:!!t.shallow||undefined})));f(a.run(i))(((e,t)=>e?n(e):t&&t.finalSet?void o([e=>g.sortClosestPeers(Array.from(t.finalSet),s,e),(e,t)=>t(null,e.slice(0,this.kBucketSize))],n):n(null,[])))}))}getPublicKey(e,t){let n;if(this._log("getPublicKey %s",e.toB58String()),this.peerBook.has(e)){if(n=this.peerBook.get(e),n&&n.id.pubKey)return this._log("getPublicKey: found local copy"),t(null,n.id.pubKey)}else n=this.peerBook.put(new d(e));this._getPublicKeyFromNode(e,((r,s)=>{if(!r)return n.id=new l(e.id,null,s),this.peerBook.put(n),t(null,s);const i=g.keyForPublicKey(e);this.get(i,((r,s)=>{if(r)return t(r);const i=h.unmarshalPublicKey(s);n.id=new l(e,null,i),this.peerBook.put(n),t(null,i)}))}))}findPeerLocal(e,t){this._log("findPeerLocal %s",e.toB58String()),this.routingTable.find(e,((e,n)=>e?t(e):n&&this.peerBook.has(n)?void t(null,this.peerBook.get(n)):t()))}provide(e,t){this._log("provide: %s",e.toBaseEncodedString());const n=[];o([t=>f(this.providers.addProvider(e,this.peerInfo.id))((e=>t(e))),t=>this.getClosestPeers(e.buffer,t),(t,r)=>{const s=new k(k.TYPES.ADD_PROVIDER,e.buffer,0);s.providerPeers=[this.peerInfo],a(t,((t,r)=>{this._log("putProvider %s to %s",e.toBaseEncodedString(),t.toB58String()),this.network.sendMessage(t,s,(e=>{e&&n.push(e),r()}))}),r)}],(e=>{n.length&&(e=p(`Failed to provide to ${n.length} of ${this.kBucketSize} peers`,"ERR_SOME_PROVIDES_FAILED",{errors:n})),t(e)}))}findProviders(e,t,n){"function"==typeof t?(n=t,t={}):t=t||{},t.maxTimeout||t.timeout?t.maxTimeout&&!t.timeout&&(t.timeout=t.maxTimeout):t.timeout=y.minute,t.maxNumProviders=t.maxNumProviders||y.K,this._log("findProviders %s",e.toBaseEncodedString()),this._findNProviders(e,t.timeout,t.maxNumProviders,n)}findPeer(e,t,n){"function"==typeof t?(n=t,t={}):t=t||{},t.maxTimeout||t.timeout?t.maxTimeout&&!t.timeout&&(t.timeout=t.maxTimeout):t.timeout=y.minute,this._log("findPeer %s",e.toB58String()),this.findPeerLocal(e,((r,s)=>r?n(r):null!=s?(this._log("found local"),n(null,s)):void o([t=>g.convertPeerId(e,t),(n,r)=>{const s=this.routingTable.closestPeers(n,this.kBucketSize);if(0===s.length)return r(p(new Error("Peer lookup failed"),"ERR_LOOKUP_FAILED"));if(s.find((t=>t.isEqual(e)))&&this.peerBook.has(e))return this._log("found in peerbook"),r(null,this.peerBook.get(e));const i=new _(this,e.id,(()=>async t=>{const n=await this._findPeerSingleAsync(t,e),r=n.closerPeers.find((t=>t.id.isEqual(e)));return r?{peer:r,queryComplete:!0}:{closerPeers:n.closerPeers}}));u((e=>{f(i.run(s))(e)}),t.timeout)(((e,t)=>{i.stop(),r(e,t)}))},(t,n)=>{let r=!1;if(t.paths.forEach((e=>{e.success&&(r=!0,this.peerBook.put(e.peer))})),this._log("findPeer %s: %s",e.toB58String(),r),!r)return n(p(new Error("No peer found"),"ERR_NOT_FOUND"));n(null,this.peerBook.get(e))}],n)))}_peerDiscovered(e){this.emit("peer",e)}}}}},{package:"libp2p-kad-dht",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-kad-dht/src/index.js"}],[4979,{"async/map":1767,"async/parallel":1771,debug:2256,events:2085,"libp2p-websocket-star":4981,mafmt:5193,multiaddr:5211,once:5310},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("debug")("libp2p:websocket-star:multi"),s=e("once"),i=e("events").EventEmitter,o=e("async/map"),a=e("async/parallel"),c=e("multiaddr"),u=e("mafmt"),l=e("libp2p-websocket-star");t.exports=class{constructor(e){this.opt=e||{},this.servers=e.servers||[],this.ws=new l(this.opt),this.discovery=this.ws.discovery}dial(e,t,n){return r("dial",e),this.ws.dial(e,t,n)}createListener(e,t){"function"==typeof e&&(t=e,e={});const n=new i;return n.servers={},n.online=[],this.servers.forEach((r=>{const s=this.ws.createListener(e,t);s.once("error",(()=>{})),s.url=r,n.servers[r]=s})),n.listen=(e,t)=>{const i=e.toString().split("ipfs/").pop();r("listen on %s server(s) with id %s",this.servers.length,i),a(this.servers.map((e=>n.servers[e])).map((e=>t=>{r("listen %s",e.url);const o=s((s=>(r("listen %s ok %s",e.url,!s),s?t(r(s)):(n.online.push(e),t()))));setTimeout(o,this.opt.timeout||5e3,new Error("Timeout")),e.listen(c(e.url).encapsulate("/ipfs/"+i),o)})),(()=>{if(n.online.length||this.opt.ignore_no_online)n.emit("listening"),t();else{const e=new Error("Couldn't listen on any of the servers");n.emit("error",e),t(e)}}))},n.close=e=>a(n.online.map((e=>t=>e.close(t))),(t=>e(t,n.online=[]))),n.getAddrs=e=>o(n.online,((e,t)=>e.getAddrs(t)),((t,n)=>t?e(t):e(null,n.reduce(((e,t)=>e.concat(t)),[])))),n}filter(e){return Array.isArray(e)||(e=[e]),e.filter((e=>e.toString().startsWith("/p2p-websocket-star")||u.WebSocketStar.matches(e)))}}}}},{package:"libp2p-websocket-star-multi",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-websocket-star-multi/src/index.js"}],[4977,{"./utils":4978,"async/setImmediate":1776,"class-is":2124,debug:2256,events:2085,"interface-connection":4409,mafmt:5193,multiaddr:5211,once:5310,"peer-id":5413,"peer-info":5414,"simple-peer":5823,"socket.io-client":5841,"stream-to-pull-stream":5899,webrtcsupport:6164},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("debug")("libp2p:webrtc-star"),s=e("multiaddr"),i=e("mafmt"),o=e("class-is"),a=e("socket.io-client"),c=e("events").EventEmitter,u=e("simple-peer"),l=e("peer-id"),d=e("peer-info"),h=e("interface-connection").Connection,f=e("stream-to-pull-stream"),p=e("once"),m=e("async/setImmediate"),g=e("webrtcsupport"),y=e("./utils"),_=y.cleanUrlSIO,b=y.cleanMultiaddr,v=p((()=>{})),w={transports:["websocket"],"force new connection":!0};t.exports=o(class{constructor(e){e=e||{},this.maSelf=undefined,this.sioOptions={transports:["websocket"],"force new connection":!0},e.wrtc&&(this.wrtc=e.wrtc),this.discovery=new c,this.discovery.tag="webRTCStar",this.discovery._isStarted=!1,this.discovery.start=e=>{this.discovery._isStarted=!0,m(e)},this.discovery.stop=e=>{this.discovery._isStarted=!1,m(e)},this.listenersRefs={},this._peerDiscovered=this._peerDiscovered.bind(this)}dial(e,t,n){"function"==typeof t&&(n=t,t={}),n=n?p(n):v;const s=(~~(1e9*Math.random())).toString(36)+Date.now(),i=this.listenersRefs[Object.keys(this.listenersRefs)[0]].io,o={initiator:!0,trickle:!1};let a;this.wrtc&&(o.wrtc=this.wrtc);try{a=new u(o)}catch(e){return r("Could not create connection:",e),n(e)}const c=new h(f.duplex(a));let l=!1;return a.on("signal",(t=>{i.emit("ss-handshake",{intentId:s,srcMultiaddr:this.maSelf.toString(),dstMultiaddr:e.toString(),signal:t})})),a.once("timeout",(()=>n(new Error("timeout")))),a.once("error",(e=>{l||n(e)})),i.on("ws-handshake",(t=>{if(t.intentId===s&&t.err)return n(new Error(t.err));t.intentId===s&&t.answer&&(a.once("connect",(()=>{l=!0,c.destroy=a.destroy.bind(a),a.once("close",(()=>c.destroy())),c.getObservedAddrs=t=>t(null,[e]),n(null,c)})),a.signal(t.signal))})),c}createListener(e,t){"function"==typeof e&&(t=e,e={});const n=new c;return n.listen=(e,s)=>{if(s=s?p(s):v,!g.support&&!this.wrtc)return m((()=>s(new Error("no WebRTC support"))));this.maSelf=e;const i=_(e);r("Dialing to Signalling Server on: "+i),n.io=a.connect(i,w),n.io.once("connect_error",s),n.io.once("error",(e=>{n.emit("error",e),n.emit("close")})),n.io.on("ws-handshake",(function(e){if(e.answer||e.err)return;const i={trickle:!1};o.wrtc&&(i.wrtc=o.wrtc);let a;try{a=new u(i)}catch(e){return r("Could not create incoming connection:",e),s(e)}const c=new h(f.duplex(a));a.once("connect",(()=>{c.getObservedAddrs=t=>t(null,[e.srcMultiaddr]),n.emit("connection",c),t(c)})),a.once("signal",(t=>{e.signal=t,e.answer=!0,n.io.emit("ss-handshake",e)})),a.signal(e.signal)})),n.io.on("ws-peer",this._peerDiscovered),n.io.on("connect",(()=>{n.io.emit("ss-join",e.toString())})),n.io.once("connect",(()=>{n.emit("listening"),s()}));const o=this},n.close=e=>{e=e?p(e):v,n.io.emit("ss-leave"),m((()=>{n.emit("close"),e()}))},n.getAddrs=e=>{m((()=>e(null,[this.maSelf])))},this.listenersRefs[s.toString()]=n,n}filter(e){return Array.isArray(e)||(e=[e]),e.filter((e=>!(e.protoNames().indexOf("p2p-circuit")>-1)&&i.WebRTCStar.matches(e)))}_peerDiscovered(e){if(!this.discovery._isStarted)return;r("Peer Discovered:",e);const t=(e=b(e)).split("/ipfs/"),n=t[t.length-1],i=l.createFromB58String(n),o=new d(i);o.multiaddrs.add(s(e)),this.discovery.emit("peer",o)}},{className:"WebRTCStar",symbolName:"@libp2p/js-libp2p-webrtc-star/webrtcstar"})}}},{package:"libp2p-webrtc-star",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-webrtc-star/src/index.js"}],[4991,{"./config":4986,"./content-routing":4987,"./dht":4988,"./errors":4989,"./get-peer-info":4990,"./peer-routing":4992,"./pubsub":4993,"./util":4994,_process:5423,"async/each":1736,"async/nextTick":1770,"async/parallel":1771,"async/series":1775,debug:2256,"err-code":2358,events:2085,"fsm-event":4306,"libp2p-connection-manager":4825,"libp2p-ping":4913,"libp2p-switch":4965,"libp2p-websockets":4984,"peer-book":5412,"peer-info":5414},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("fsm-event"),s=e("events").EventEmitter,i=e("debug"),o=i("libp2p");o.error=i("libp2p:error");const a=e("err-code"),c=e("async/each"),u=e("async/series"),l=e("async/parallel"),d=e("async/nextTick"),h=e("peer-book"),f=e("peer-info"),p=e("libp2p-switch"),m=e("libp2p-ping"),g=e("libp2p-websockets"),y=e("libp2p-connection-manager"),{emitFirst:_}=e("./util"),b=e("./peer-routing"),v=e("./content-routing"),w=e("./dht"),k=e("./pubsub"),E=e("./get-peer-info"),S=e("./config").validate,{codes:x}=e("./errors"),C=(e,t)=>a(new Error(`libp2p cannot ${e} when not started; state is ${t}`),x.ERR_NODE_NOT_STARTED);class A extends s{constructor(e){if(super(),this._options=S(e),this.datastore=this._options.datastore,this.peerInfo=this._options.peerInfo,this.peerBook=this._options.peerBook||new h,this._modules=this._options.modules,this._config=this._options.config,this._transport=[],this._discovery=[],this._switch=new p(this.peerInfo,this.peerBook,this._options.switch),this._switch.on("error",((...e)=>this.emit("error",...e))),this.stats=this._switch.stats,this.connectionManager=new y(this,this._options.connectionManager),this._modules.streamMuxer){this._modules.streamMuxer.forEach((e=>this._switch.connection.addStreamMuxer(e))),this._switch.connection.reuse(),this._switch.connection.enableCircuitRelay(this._config.relay),this._switch.on("peer-mux-established",(e=>{this.emit("peer:connect",e)})),this._switch.on("peer-mux-closed",(e=>{this.emit("peer:disconnect",e)}))}if(this._switch.on("connection:start",(e=>{this.emit("connection:start",e)})),this._switch.on("connection:end",(e=>{this.emit("connection:end",e)})),this._modules.connEncryption){this._modules.connEncryption.forEach((e=>{this._switch.connection.crypto(e.tag,e.encrypt)}))}if(this._modules.connProtector)this._switch.protector=this._modules.connProtector;else if(n.env.LIBP2P_FORCE_PNET)throw new Error("Private network is enforced, but no protector was provided");if(this._config.dht.enabled){const e=this._modules.dht;this._dht=new e(this._switch,{datastore:this.datastore,...this._config.dht})}this._config.EXPERIMENTAL.pubsub&&(this.pubsub=k(this)),this.peerRouting=b(this),this.contentRouting=v(this),this.dht=w(this),this._getPeerInfo=E(this),m.mount(this._switch),this.state=new r("STOPPED",{STOPPED:{start:"STARTING",stop:"STOPPED"},STARTING:{done:"STARTED",abort:"STOPPED",stop:"STOPPING"},STARTED:{stop:"STOPPING",start:"STARTED"},STOPPING:{stop:"STOPPING",done:"STOPPED"}}),this.state.on("STARTING",(()=>{o("libp2p is starting"),this._onStarting()})),this.state.on("STOPPING",(()=>{o("libp2p is stopping"),this._onStopping()})),this.state.on("STARTED",(()=>{o("libp2p has started"),this.emit("start")})),this.state.on("STOPPED",(()=>{o("libp2p has stopped"),this.emit("stop")})),this.state.on("error",(e=>{o.error(e),this.emit("error",e)})),this.state.on("STARTED",(()=>{this.peerBook.getAllArray().forEach((e=>{this.emit("peer:discovery",e),this._maybeConnect(e)}))})),this._peerDiscovered=this._peerDiscovered.bind(this)}emit(e,...t){"error"!==e||this._events.error?super.emit(e,...t):o.error(...t)}start(e=(()=>{})){_(this,["error","start"],e),this.state("start")}stop(e=(()=>{})){_(this,["error","stop"],e),this.state("stop")}isStarted(){return!!this.state&&"STARTED"===this.state._state}dial(e,t){this.dialProtocol(e,null,t)}dialProtocol(e,t,n){if(!this.isStarted())return n(C("dial",this.state._state));"function"==typeof t&&(n=t,t=undefined),this._getPeerInfo(e,((e,r)=>{if(e)return n(e);this._switch.dial(r,t,n)}))}dialFSM(e,t,n){if(!this.isStarted())return n(C("dial",this.state._state));"function"==typeof t&&(n=t,t=undefined),this._getPeerInfo(e,((e,r)=>{if(e)return n(e);this._switch.dialFSM(r,t,n)}))}hangUp(e,t){this._getPeerInfo(e,((e,n)=>{if(e)return t(e);this._switch.hangUp(n,t)}))}ping(e,t){if(!this.isStarted())return t(C("ping",this.state._state));this._getPeerInfo(e,((e,n)=>{if(e)return t(e);t(null,new m(this._switch,n))}))}handle(e,t,n){this._switch.handle(e,t,n)}unhandle(e){this._switch.unhandle(e)}_onStarting(){if(!this._modules.transport)return this.emit("error",new Error("no transports were present")),this.state("abort");let e;const t=[],n=[];this.peerInfo.multiaddrs.toArray().forEach((e=>{e.getPeerId()||(t.push(e),n.push(e.encapsulate("/p2p/"+this.peerInfo.id.toB58String())))})),this.peerInfo.multiaddrs.replace(t,n);const r=this.peerInfo.multiaddrs.toArray();this._modules.transport.forEach((t=>{let n;n="function"==typeof t?new t({libp2p:this}):t,n.filter(r).length>0?this._switch.transport.add(n.tag||n[Symbol.toStringTag],n):g.isWebSockets(n)&&(e=n),this._transport.push(n)})),u([e=>{this.connectionManager.start(),this._switch.start(e)},t=>{e&&this._switch.transport.add(e.tag||e.constructor.name,e);this.peerInfo.multiaddrs.toArray().forEach((e=>{e.toString().match(/\/p2p-circuit($|\/)/)||this._transport.find((t=>t.filter(e).length>0))||this.peerInfo.multiaddrs.delete(e)})),t()},e=>{this._dht?this._dht.start((()=>{this._dht.on("peer",this._peerDiscovered),e()})):e()},e=>{if(this._floodSub)return this._floodSub.start(e);e()},e=>{this._modules.peerDiscovery?this._setupPeerDiscovery(e):e()}],(e=>{if(e)return o.error(e),this.emit("error",e),this.state("stop");this.state("done")}))}_onStopping(){u([e=>{l(this._discovery.map((e=>(e.removeListener("peer",this._peerDiscovered),t=>e.stop((e=>{o.error("an error occurred stopping the discovery service",e),t()}))))),e)},e=>{if(this._floodSub)return this._floodSub.stop(e);e()},e=>{if(this._dht)return this._dht.removeListener("peer",this._peerDiscovered),this._dht.stop(e);e()},e=>{this.connectionManager.stop(),this._switch.stop(e)},e=>{this._switch.transport.removeAll((()=>e()))}],(e=>{e&&(o.error(e),this.emit("error",e)),this.state("done")}))}_peerDiscovered(e){e.id.toB58String()!==this.peerInfo.id.toB58String()?(e=this.peerBook.put(e),this.isStarted()&&(this.emit("peer:discovery",e),this._maybeConnect(e))):o.error(new Error(x.ERR_DISCOVERED_SELF))}_maybeConnect(e){if(!0===this._config.peerDiscovery.autoDial&&!e.isConnected()){(this._options.connectionManager.minPeers||0)>Object.keys(this._switch.connection.connections).length&&(o("connecting to discovered peer"),this._switch.dialer.connect(e,(e=>{e&&o.error("could not connect to discovered peer",e)})))}}_setupPeerDiscovery(e){for(const e of this._modules.peerDiscovery){let t={enabled:!0};if(e.tag&&this._config.peerDiscovery&&this._config.peerDiscovery[e.tag]&&(t={...t,...this._config.peerDiscovery[e.tag]}),t.enabled){let n;n="function"==typeof e?new e(Object.assign({},t,{peerInfo:this.peerInfo})):e,n.on("peer",this._peerDiscovered),this._discovery.push(n)}}c(this._discovery,((e,t)=>{e.start(t)}),e)}}t.exports=A,t.exports.createLibp2p=(e,t)=>{if(e.peerInfo)return d(t,null,new A(e));f.create(((n,r)=>{if(n)return t(n);e.peerInfo=r,t(null,new A(e))}))}}).call(this)}).call(this,e("_process"))}}},{package:"libp2p",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p/src/index.js"}],[4656,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=fetch}}},{package:"ipfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/src/core/runtime/fetch-browser.js"}],[5455,{"./duplex":5454,"./sink":5456,"./source":5457,"./through":5458},function(){with(this)return function(){"use strict";return function(e,t,n){n.source=e("./source"),n.through=e("./through"),n.sink=e("./sink"),n.duplex=e("./duplex")}}},{package:"pull-defer",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-defer/index.js"}],[4614,{"../../../utils/cid":4663,"async-iterator-to-pull-stream":1711,buffer:2084,cids:2122},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("cids"),{Buffer:s}=e("buffer"),{cidToString:i}=e("../../../utils/cid"),o=e("async-iterator-to-pull-stream"),a=e=>{const t={},n=e.split("-");switch(n.length){case 1:t.avgChunkSize=262144;break;case 2:t.avgChunkSize=c(n[1],"avg");break;case 4:t.minChunkSize=c(n[1],"min"),t.avgChunkSize=c(n[2],"avg"),t.maxChunkSize=c(n[3],"max");break;default:throw new Error('Incorrect chunker format (expected "rabin" "rabin-[avg]" or "rabin-[min]-[avg]-[max]"')}return t},c=(e,t)=>{let n=parseInt(e);if(isNaN(n))throw new Error(`Chunker parameter ${t} must be an integer`);return n};t.exports={normalizePath:e=>s.isBuffer(e)?new r(e).toString():r.isCID(e)?e.toString():(0===e.indexOf("/ipfs/")&&(e=e.substring("/ipfs/".length)),"/"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e),parseChunkSize:c,parseRabinString:a,parseChunkerString:e=>{if(e){if(e.startsWith("size-")){const t=e.split("-")[1],n=parseInt(t);if(isNaN(n))throw new Error("Chunker parameter size must be an integer");return{chunker:"fixed",chunkerOptions:{maxChunkSize:n}}}if(e.startsWith("rabin"))return{chunker:"rabin",chunkerOptions:a(e)};throw new Error(`Unrecognized chunker option: ${e}`)}return{chunker:"fixed"}},mapFile:(e={})=>t=>{let n=0,r="dir";t.unixfs&&"file"===t.unixfs.type&&(n=t.unixfs.fileSize(),r="file");const s={hash:i(t.cid,{base:e.cidBase}),path:t.path,name:t.name,depth:t.path.split("/").length,size:n,type:r};return e.includeContent&&t.unixfs&&"file"===t.unixfs.type&&(s.content=o.source(t.content())),s}}}}},{package:"ipfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/src/core/components/files-regular/utils.js"}],[5512,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=n.once=function(e){return function(t,n){if(t)return n(t);if(null!=e){var r=e;e=null,n(null,r)}else n(!0)}};n.depthFirst=function(e,t){var n,s=[];return s.unshift(r(e)),function e(r,i){return s.length?n?i(n):void s[0](r,(function(r,o){if(r){if(!0!==r){for(n=r,s.shift();s.length;)s.shift()(r,(function(){}));return i(r)}return s.shift(),e(null,i)}s.unshift(t(o)),i(r,o)})):i(!0)}},n.widthFirst=function(e,t){var n=[];return n.push(r(e)),function e(r,s){if(!n.length)return s(!0);n[0](r,(function(r,i){if(r)return n.shift(),e(null,s);n.push(t(i)),s(r,i)}))}},n.leafFirst=function(e,t){var n=[],s=[];return n.push(r(e)),function e(r,i){n[0](r,(function(r,o){if(r)return n.shift(),s.length?i(null,s.shift()):i(!0);n.unshift(t(o)),s.unshift(o),e(null,i)}))}}}}},{package:"pull-traverse",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-traverse/index.js"}],[5453,{},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e,t,n){var r=e.length;if(!r)return n(t);function s(){--r||n(t)}e.forEach((function(e){e?e(t,s):s()})),r||s()}t.exports=function(e){return function(t,n){!function s(){t?r(e,t,n):e.length?e[0]?e[0](null,(function(t,i){t?(e.shift(),!0===t?s():r(e,t,n)):n(null,i)})):(e.shift(),s()):n(!0)}()}}}}},{package:"pull-cat",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-cat/index.js"}],[4653,{"promisify-es6":5427},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("promisify-es6");t.exports=e=>r(((...e)=>{e.pop()(new Error("not available in the browser"))}))}}},{package:"ipfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/src/core/runtime/add-from-fs-browser.js"}],[4511,{"../../is-buffer/index.js":4689,"./resolvers":4513,"async-iterator-last":1710,cids:2122,"err-code":2358},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("err-code"),s=e("cids"),i=e("./resolvers"),o=e("async-iterator-last"),a=e=>{if(n.isBuffer(e))return{cid:new s(e),toResolve:[]};if(s.isCID(e))return{cid:e,toResolve:[]};if("string"==typeof e){0===e.indexOf("/ipfs/")&&(e=e.substring(6));const t=((e="")=>(e.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean))(e);return{cid:new s(t[0]),toResolve:t.slice(1)}}throw r(new Error(`Unknown path type ${e}`),"ERR_BAD_PATH")},c=async function*(e,t){let{cid:n,toResolve:s}=a(e),o=n.toBaseEncodedString(),c=o;const u=s.length;for(;;){const a=await i(n,o,c,s,u,t);if(!a.entry&&!a.next)throw r(new Error(`Could not resolve ${e}`),"ERR_NOT_FOUND");if(a.entry&&(yield a.entry),!a.next)return;s=a.next.toResolve,n=a.next.cid,o=a.next.name,c=a.next.path}},u=(e,t)=>o(c(e,t));t.exports=u,t.exports.path=c,t.exports.recursive=async function*(e,t){const n=await u(e,t);if(yield n,n.unixfs&&n.unixfs.type.includes("dir"))for await(const e of async function*e(t){for await(const n of t.content())if(yield n,n.unixfs.type.includes("dir"))for await(const t of e(n))yield t}(n))yield e}}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"ipfs-unixfs-exporter",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-unixfs-exporter/src/index.js"}],[5496,{"../util/abort-cb":5508},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../util/abort-cb");t.exports=function(e,t){return function(n,s){if(n)return r(s,n,t);if(null!=e){var i=e;e=null,s(null,i)}else s(!0)}}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/sources/once.js"}],[5500,{"../util/tester":5510},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../util/tester");t.exports=function(e){return e=r(e),function(t){return function n(r,s){for(var i,o=!0;o;)o=!1,i=!0,t(r,(function(t,r){if(!t&&!e(r))return i?o=!0:n(t,s);s(t,r)})),i=!1}}}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/throughs/filter.js"}],[5477,{"pull-defer/source":5457,"pull-stream/sinks/collect":5482,"pull-stream/sources/error":5492,"pull-stream/sources/values":5497},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("pull-defer/source"),s=e("pull-stream/sources/error"),i=e("pull-stream/sources/values"),o=e("pull-stream/sinks/collect");t.exports=function(e){var t=r(),n=o((function(n,r){if(n)return t.resolve(s(n));t.resolve(i(r.sort(e)))}));return function(e){return n(e),t}}}}},{package:"pull-sort",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-sort/index.js"}],[4558,{"is-buffer":4542,"is-pull-stream":4705,"is-stream":4708,"kind-of":4779},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("kind-of"),s=e("is-stream"),{isSource:i}=e("is-pull-stream"),o=e("is-buffer");t.exports=e=>{const t=e=>o(e)||s.readable(e)||i(e)||"file"===r(e),n=e=>t(e)||(e=>"object"==typeof e&&(e.content?t(e.content):Boolean(e.path)&&"string"==typeof e.path))(e);if(n(e)||Array.isArray(e)&&e.every(n))return!0;throw new Error(`Input not supported. Expected Buffer|ReadableStream|PullStream|File|Array<Object> got ${r(e)}. Check the documentation for more info https://github.com/ipfs/interface-js-ipfs-core/blob/master/SPEC/FILES.md#add`)}}}},{package:"ipfs-utils",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-utils/src/files/add-input-validation.js"}],[4779,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=Object.prototype.toString;function s(e){return"function"==typeof e.constructor?e.constructor.name:null}t.exports=function(e){if(void 0===e)return"undefined";if(null===e)return"null";var t,n=typeof e;if("boolean"===n)return"boolean";if("string"===n)return"string";if("number"===n)return"number";if("symbol"===n)return"symbol";if("function"===n)return t=e,"GeneratorFunction"===s(t)?"generatorfunction":"function";if(function(e){return Array.isArray?Array.isArray(e):e instanceof Array}(e))return"array";if(function(e){if(e.constructor&&"function"==typeof e.constructor.isBuffer)return e.constructor.isBuffer(e);return!1}(e))return"buffer";if(function(e){try{if("number"==typeof e.length&&"function"==typeof e.callee)return!0}catch(e){if(-1!==e.message.indexOf("callee"))return!0}return!1}(e))return"arguments";if(function(e){return e instanceof Date||"function"==typeof e.toDateString&&"function"==typeof e.getDate&&"function"==typeof e.setDate}(e))return"date";if(function(e){return e instanceof Error||"string"==typeof e.message&&e.constructor&&"number"==typeof e.constructor.stackTraceLimit}(e))return"error";if(function(e){return e instanceof RegExp||"string"==typeof e.flags&&"boolean"==typeof e.ignoreCase&&"boolean"==typeof e.multiline&&"boolean"==typeof e.global}(e))return"regexp";switch(s(e)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(function(e){return"function"==typeof e.throw&&"function"==typeof e.return&&"function"==typeof e.next}(e))return"generator";switch(n=r.call(e)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return n.slice(8,-1).toLowerCase().replace(/\s/g,"")}}}},{package:"kind-of",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/kind-of/index.js"}],[4708,{},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe;r.writable=e=>r(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,r.readable=e=>r(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,r.duplex=e=>r.writable(e)&&r.readable(e),r.transform=e=>r.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState,t.exports=r}}},{package:"is-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/is-stream/index.js"}],[5899,{_process:5423,looper:5187,"pull-stream/pull":5481},function(){with(this)return function(){"use strict";return function(e,t,n){(function(r){(function(){e("pull-stream/pull");var s=e("looper");function i(e){e.destroy?e.destroy():console.error("warning, stream-to-pull-stream: \n"+"the wrapped node-stream does not implement `destroy`, \n"+"this may cause resource leaks.")}function o(e,t,n){var o,a,c=!1;function u(){a||(a=!0,n&&n(!0===o?null:o))}function l(){c||(c=!0,h(),o?u():e(o=!0,u))}function d(t){h(),o||e(o=t,u)}function h(){t.on("finish",l),t.removeListener("close",l),t.removeListener("error",d)}t.on("close",l),t.on("finish",l),t.on("error",d),r.nextTick((function(){s((function(n){e(null,(function(e,r){if(o=o||e,!0===e)return t._isStdio?u():t.end();if(o=o||e)return i(t),u();t._isStdio?t.write(r,(function(){n()})):!1===t.write(r)?t.once("drain",n):n()}))}))}))}function a(e){var t,n=[],r=[],s=!1;function o(){for(;(n.length||t)&&r.length;)r.shift()(n.length?null:t,n.shift());!n.length&&s&&(s=!1,e.resume())}return e.on("data",(function(t){n.push(t),o(),n.length&&e.pause&&(s=!0,e.pause())})),e.on("end",(function(){t=!0,o()})),e.on("close",(function(){t=!0,o()})),e.on("error",(function(e){t=e,o()})),function(n,s){if(!s)throw new Error("*must* provide cb");if(n){function o(){for(;r.length;)r.shift()(n);s(n)}if(t)return o();e.once("close",o),i(e)}else r.push(s),o()}}var c=a,u=function(e,t){return function(n){return o(n,e,t)}},l=function(e){return a(e)};(n=t.exports=function(e,t){return e.writable&&e.write?e.readable?function(n){return o(n,e,t),a(e)}:u(e,t):l(e)}).sink=u,n.source=l,n.read=c,n.read1=a,n.read2=function(e){var t,n=!1,r=!1;function s(){var n=e.read();if(null!==n&&t){var r=t;t=null,r(null,n)}}return e.on("readable",(function(){r=!0,t&&s()})).on("end",(function(){n=!0,t&&t(n)})).on("error",(function(e){n=e,t&&t(n)})),function(e,i){t=i,n?i(n):r&&s()}},n.duplex=function(e,t){return{source:l(e),sink:u(e,t)}},n.transform=function(e){return function(t){var n=l(e);return u(e)(t),n}}}).call(this)}).call(this,e("_process"))}}},{package:"stream-to-pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/stream-to-pull-stream/index.js"}],[5498,{"../util/prop":5509},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){return e}var s=e("../util/prop");t.exports=function(e){if(!e)return r;e=s(e);var t,n,i=!1;return function(r){return function s(o,a){if(n)return a(n);o?(n=o,r(o,i?function(e){i?t=a:a(o)}:function(e){a(o)})):r(null,(function(r,o){r?a(r):n?a(n):(i=!0,e(o,(function(e,r){i=!1,n?(a(n),t&&t(n)):e?s(e,a):a(null,r)})))}))}}}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/throughs/async-map.js"}],[5501,{"../sources/once":5496,"../sources/values":5497},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../sources/values"),s=e("../sources/once");t.exports=function(){return function(e){var t;return function(n,i){function o(){t(null,(function(t,n){!0===t?a():t?e(!0,(function(e){i(t)})):i(null,n)}))}function a(){t=null,e(null,(function(e,n){if(e)return i(e);Array.isArray(n)||n&&"object"==typeof n?n=r(n):"function"!=typeof n&&(n=s(n)),t=n,o()}))}n?t?t(n,(function(t){e(t||n,i)})):e(n,i):t?o():a()}}}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/throughs/flatten.js"}],[5497,{"../util/abort-cb":5508},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../util/abort-cb");t.exports=function(e,t){if(!e)return function(e,n){return e?r(n,e,t):n(!0)};Array.isArray(e)||(e=Object.keys(e).map((function(t){return e[t]})));var n=0;return function(s,i){if(s)return r(i,s,t);n>=e.length?i(!0):i(null,e[n++])}}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/sources/values.js"}],[4560,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={supportsFileReader:"undefined"!=typeof self&&"FileReader"in self}}}},{package:"ipfs-utils",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-utils/src/supports.js"}],[4536,{"./dag-builder":4530,"./tree-builder":4537,multihashes:5237,superstruct:5909},function(){with(this)return function(){"use strict";return function(e,t,n){const{superstruct:r}=e("superstruct"),s=e("./dag-builder"),i=e("./tree-builder"),o=e("multihashes"),a=r({types:{codec:e=>["dag-pb","dag-cbor","raw"].includes(e),hashAlg:e=>Object.keys(o.names).includes(e),leafType:e=>["file","raw"].includes(e)}}),c=a({minChunkSize:"number?",maxChunkSize:"number?",avgChunkSize:"number?",window:"number?",polynomial:"number?"},{maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804}),u=a({maxChildrenPerNode:"number?",layerRepeat:"number?"},{maxChildrenPerNode:174,layerRepeat:4}),l=a({chunker:a.enum(["fixed","rabin"]),rawLeaves:"boolean?",hashOnly:"boolean?",strategy:a.enum(["balanced","flat","trickle"]),reduceSingleLeafToSelf:"boolean?",codec:"codec?",format:"codec?",hashAlg:"hashAlg?",leafType:"leafType?",cidVersion:"number?",progress:"function?",wrapWithDirectory:"boolean?",shardSplitThreshold:"number?",onlyHash:"boolean?",chunkerOptions:c,builderOptions:u,wrap:"boolean?",pin:"boolean?",recursive:"boolean?",ignore:"array?",hidden:"boolean?",preload:"boolean?"},{chunker:"fixed",strategy:"balanced",rawLeaves:!1,reduceSingleLeafToSelf:!0,codec:"dag-pb",hashAlg:"sha2-256",leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3});t.exports=async function*(e,t,n={}){const r=l(n);n.cidVersion>0&&n.rawLeaves===undefined&&(r.rawLeaves=!0),n.hashAlg!==undefined&&n.rawLeaves===undefined&&(r.rawLeaves=!0),"trickle"===n.strategy&&(r.leafType="raw",r.reduceSingleLeafToSelf=!1),n.format&&(n.codec=n.format);for await(const n of i(s(e,t,r),t,r))yield{cid:n.cid,path:n.path,unixfs:n.unixfs,size:n.size}}}}},{package:"ipfs-unixfs-importer",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-unixfs-importer/src/index.js"}],[4559,{"../supports":4560,"readable-stream":4557},function(){with(this)return function(){"use strict";return function(e,t,n){const{Readable:r}=e("readable-stream"),{supportsFileReader:s}=e("../supports");t.exports=(e,t)=>{if(!s)throw new Error("FileReader DOM API is not supported.");return new class extends r{constructor(e,t={}){super(t),this.file=e,this.offset=t.offset||0,this.chunkSize=t.chunkSize||1048576,this.fileReader=new self.FileReader(e),this.fileReader.onloadend=e=>{const t=e.target.result;0===t.byteLength&&this.push(null),this.push(new Uint8Array(t))},this.fileReader.onerror=e=>this.destroy(e)}_read(t){const n=this.offset+this.chunkSize,r=e.slice(this.offset,n);this.fileReader.readAsArrayBuffer(r),this.offset=n}}(e,t)}}}},{package:"ipfs-utils",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-utils/src/streams/stream-from-filereader.js"}],[5509,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){return e&&("string"==typeof e?function(t){return t[e]}:"object"==typeof e&&"function"==typeof e.exec?function(t){var n=e.exec(t);return n&&n[0]}:e)}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/util/prop.js"}],[4576,{"../../../errors":4567},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function s(){}t.exports=function e(t,n,i){if("function"==typeof n)return e(t,null,n);n||(n={}),i=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];e.apply(this,r)}}}(i||s);var o=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){a=!1,u=!0,o||i.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){o=!1,d=!0,a||i.call(t)},f=function(e){i.call(t,e)},p=function(){var e;return o&&!d?(t._readableState&&t._readableState.ended||(e=new r),i.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new r),i.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",l),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",h),t.on("finish",l),!1!==n.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",f),t.removeListener("close",p)}}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"}],[4578,{"../../../errors":4567,"./end-of-stream":4576},function(){with(this)return function(){"use strict";return function(e,t,n){var r;var s=e("../../../errors").codes,i=s.ERR_MISSING_ARGS,o=s.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(t,n,s,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var a=!1;t.on("close",(function(){a=!0})),r===undefined&&(r=e("./end-of-stream")),r(t,{readable:n,writable:s},(function(e){if(e)return i(e);a=!0,i()}));var c=!1;return function(e){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void i(e||new o("pipe"))}}function u(e){e()}function l(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}t.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,s=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new i("streams");var o=t.map((function(e,n){var i=n<t.length-1;return c(e,i,n>0,(function(e){r||(r=e),e&&o.forEach(u),i||(o.forEach(u),s(r))}))}));return t.reduce(l)}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/node_modules/readable-stream/lib/internal/streams/pipeline.js"}],[4572,{"../errors":4567,"./_stream_duplex":4568,"./internal/streams/destroy":4575,"./internal/streams/state":4579,"./internal/streams/stream":4580,_process:5423,buffer:2084,inherits:4407,"util-deprecate":6011},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var s=r.callback;t.pendingcb--,s(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var s;t.exports=S,S.WritableState=E;var i={deprecate:e("util-deprecate")},o=e("./internal/streams/stream"),a=e("buffer").Buffer,c=global.Uint8Array||function(){};var u,l=e("./internal/streams/destroy"),d=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,f=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,y=h.ERR_STREAM_DESTROYED,_=h.ERR_STREAM_NULL_VALUES,b=h.ERR_STREAM_WRITE_AFTER_END,v=h.ERR_UNKNOWN_ENCODING,w=l.errorOrDestroy;function k(){}function E(t,i,o){s=s||e("./_stream_duplex"),t=t||{},"boolean"!=typeof o&&(o=i instanceof s),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,s=r.sync,i=r.writecb;if("function"!=typeof i)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,s,i){--t.pendingcb,r?(n.nextTick(i,s),n.nextTick(M,e,t),e._writableState.errorEmitted=!0,w(e,s)):(i(s),e._writableState.errorEmitted=!0,w(e,s),M(e,t))}(e,r,s,t,i);else{var o=R(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||A(e,r),s?n.nextTick(C,e,r,o,i):C(e,r,o,i)}}(i,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function S(t){var n=this instanceof(s=s||e("./_stream_duplex"));if(!n&&!u.call(S,this))return new S(t);this._writableState=new E(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),o.call(this)}function x(e,t,n,r,s,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(s,t.onwrite):e._write(s,i,t.onwrite),t.sync=!1}function C(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),M(e,t)}function A(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var s=t.bufferedRequestCount,i=new Array(s),o=t.corkedRequestsFree;o.entry=n;for(var a=0,c=!0;n;)i[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;i.allBuffers=c,x(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,d=n.callback;if(x(e,t,!1,t.objectMode?1:u.length,u,l,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function P(e,t){e._final((function(n){t.pendingcb--,n&&w(e,n),t.prefinished=!0,e.emit("prefinish"),M(e,t)}))}function M(e,t){var r=R(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(P,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var s=e._readableState;(!s||s.autoDestroy&&s.endEmitted)&&e.destroy()}return r}e("inherits")(S,o),E.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(E.prototype,"buffer",{get:i.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===S&&(e&&e._writableState instanceof E)}})):u=function(e){return e instanceof this},S.prototype.pipe=function(){w(this,new g)},S.prototype.write=function(e,t,r){var s,i=this._writableState,o=!1,u=!i.objectMode&&(s=e,a.isBuffer(s)||s instanceof c);return u&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(r=t,t=null),u?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=k),i.ending?function(e,t){var r=new b;w(e,r),n.nextTick(t,r)}(this,r):(u||function(e,t,r,s){var i;return null===r?i=new _:"string"==typeof r||t.objectMode||(i=new f("chunk",["string","Buffer"],r)),!i||(w(e,i),n.nextTick(s,i),!1)}(this,i,e,r))&&(i.pendingcb++,o=function(e,t,n,r,s,i){if(!n){var o=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,n));return t}(t,r,s);r!==o&&(n=!0,s="buffer",r=o)}var c=t.objectMode?1:r.length;t.length+=c;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:s,isBuf:n,callback:i,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else x(e,t,!1,c,r,s,i);return u}(this,i,u,e,t,r)),o},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new v(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,n){n(new p("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,r){var s=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&e!==undefined&&this.write(e,t),s.corked&&(s.corked=1,this.uncork()),s.ending||function(e,t,r){t.ending=!0,M(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,s,r),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=l.destroy,S.prototype._undestroy=l.undestroy,S.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/node_modules/readable-stream/lib/_stream_writable.js"}],[4569,{"./_stream_transform":4571,inherits:4407},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=s;var r=e("./_stream_transform");function s(e){if(!(this instanceof s))return new s(e);r.call(this,e)}e("inherits")(s,r),s.prototype._transform=function(e,t,n){n(null,e)}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/node_modules/readable-stream/lib/_stream_passthrough.js"}],[4571,{"../errors":4567,"./_stream_duplex":4568,inherits:4407},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=l;var r=e("../errors").codes,s=r.ERR_METHOD_NOT_IMPLEMENTED,i=r.ERR_MULTIPLE_CALLBACK,o=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,c=e("./_stream_duplex");function u(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new i);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}e("inherits")(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new s("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var s=this._readableState;(r.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/node_modules/readable-stream/lib/_stream_transform.js"}],[4568,{"./_stream_readable":4570,"./_stream_writable":4572,_process:5423,inherits:4407},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=u;var s=e("./_stream_readable"),i=e("./_stream_writable");e("inherits")(u,s);for(var o=r(i.prototype),a=0;a<o.length;a++){var c=o[a];u.prototype[c]||(u.prototype[c]=i.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);s.call(this,e),i.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/node_modules/readable-stream/lib/_stream_duplex.js"}],[4570,{"../errors":4567,"./_stream_duplex":4568,"./internal/streams/async_iterator":4573,"./internal/streams/buffer_list":4574,"./internal/streams/destroy":4575,"./internal/streams/from":4577,"./internal/streams/state":4579,"./internal/streams/stream":4580,_process:5423,buffer:2084,events:2085,inherits:4407,"string_decoder/":5900,util:2083},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;t.exports=S,S.ReadableState=E;e("events").EventEmitter;var s=function(e,t){return e.listeners(t).length},i=e("./internal/streams/stream"),o=e("buffer").Buffer,a=global.Uint8Array||function(){};var c,u=e("util");c=u&&u.debuglog?u.debuglog("stream"):function(){};var l,d,h,f=e("./internal/streams/buffer_list"),p=e("./internal/streams/destroy"),m=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,y=g.ERR_INVALID_ARG_TYPE,_=g.ERR_STREAM_PUSH_AFTER_EOF,b=g.ERR_METHOD_NOT_IMPLEMENTED,v=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(S,i);var w=p.errorOrDestroy,k=["error","close","destroy","pause","resume"];function E(t,n,s){r=r||e("./_stream_duplex"),t=t||{},"boolean"!=typeof s&&(s=n instanceof r),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",s),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function S(t){if(r=r||e("./_stream_duplex"),!(this instanceof S))return new S(t);var n=this instanceof r;this._readableState=new E(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),i.call(this)}function x(e,t,n,r,s){c("readableAddChunk",t);var i,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?P(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,M(e)))}(e,u);else if(s||(i=function(e,t){var n;r=t,o.isBuffer(r)||r instanceof a||"string"==typeof t||t===undefined||e.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(u,t)),i)w(e,i);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),r)u.endEmitted?w(e,new v):C(e,u,t,!0);else if(u.ended)w(e,new _);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!n?(t=u.decoder.write(t),u.objectMode||0!==t.length?C(e,u,t,!1):T(e,u)):C(e,u,t,!1)}else r||(u.reading=!1,T(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function C(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&P(e)),T(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=p.destroy,S.prototype._undestroy=p.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=o.from(e,t),t=""),n=!0),x(this,e,t,!1,n)},S.prototype.unshift=function(e){return x(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var n=new l(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,s="";null!==r;)s+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==s&&this._readableState.buffer.push(s),this._readableState.length=s.length,this};var A=1073741824;function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function P(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(M,e))}function M(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,N(e)}function T(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(I,e,t))}function I(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(c("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function D(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function O(e){c("readable nexttick read 0"),e.read(0)}function j(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function L(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(U,t,e))}function U(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function F(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}S.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L(this):P(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&L(this),null;var r,s=t.needReadable;return c("need readable",s),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",s=!0),t.ended||t.reading?c("reading or ended",s=!1):s&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(n,t))),null===(r=e>0?B(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&L(this)),null!==r&&this.emit("data",r),r},S.prototype._read=function(e){w(this,new b("_read()"))},S.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,t);var o=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?u:g;function a(t,n){c("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",f),e.removeListener("unpipe",a),r.removeListener("end",u),r.removeListener("end",g),r.removeListener("data",h),d=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}i.endEmitted?n.nextTick(o):r.once("end",o),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,N(e))}}(r);e.on("drain",l);var d=!1;function h(t){c("ondata");var n=e.write(t);c("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==F(i.pipes,e))&&!d&&(c("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function f(t){c("onerror",t),g(),e.removeListener("error",f),0===s(e,"error")&&w(e,t)}function p(){e.removeListener("finish",m),g()}function m(){c("onfinish"),e.removeListener("close",p),g()}function g(){c("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",f),e.once("close",p),e.once("finish",m),e.emit("pipe",r),i.flowing||(c("pipe resume"),r.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<s;i++)r[i].emit("unpipe",this,{hasUnpiped:!1});return this}var o=F(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},S.prototype.on=function(e,t){var r=i.prototype.on.call(this,e,t),s=this._readableState;return"data"===e?(s.readableListening=this.listenerCount("readable")>0,!1!==s.flowing&&this.resume()):"readable"===e&&(s.endEmitted||s.readableListening||(s.readableListening=s.needReadable=!0,s.flowing=!1,s.emittedReadable=!1,c("on readable",s.length,s.reading),s.length?P(this):s.reading||n.nextTick(O,this))),r},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var r=i.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(D,this),r},S.prototype.removeAllListeners=function(e){var t=i.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||n.nextTick(D,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(j,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var s in e.on("end",(function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(s){(c("wrapped data"),n.decoder&&(s=n.decoder.write(s)),!n.objectMode||null!==s&&s!==undefined)&&((n.objectMode||s&&s.length)&&(t.push(s)||(r=!0,e.pause())))})),e)this[s]===undefined&&"function"==typeof e[s]&&(this[s]=function(t){return function(){return e[t].apply(e,arguments)}}(s));for(var i=0;i<k.length;i++)e.on(k[i],this.emit.bind(this,k[i]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return d===undefined&&(d=e("./internal/streams/async_iterator")),d(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=B,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(t,n){return h===undefined&&(h=e("./internal/streams/from")),h(S,t,n)})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/node_modules/readable-stream/lib/_stream_readable.js"}],[1727,{"./lib/_stream_duplex.js":1714,"./lib/_stream_passthrough.js":1715,"./lib/_stream_readable.js":1716,"./lib/_stream_transform.js":1717,"./lib/_stream_writable.js":1718,"./lib/internal/streams/end-of-stream.js":1722,"./lib/internal/streams/pipeline.js":1724},function(){with(this)return function(){"use strict";return function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async-iterator-to-stream/node_modules/readable-stream/readable-browser.js"}],[4464,{"./cp":4462,"./flush":4463,"./ls":4465,"./mkdir":4466,"./mv":4467,"./read":4468,"./rm":4469,"./stat":4470,"./utils/create-lock":4474,"./write":4487,assert:1703,"promisify-es6":5427},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("assert"),s=e("promisify-es6"),i=e("./utils/create-lock"),o={stat:e("./stat")},a={cp:e("./cp"),flush:e("./flush"),mkdir:e("./mkdir"),mv:e("./mv"),rm:e("./rm")},c={write:e("./write"),read:e("./read"),ls:e("./ls")},u=({options:e,mfs:t,operations:n,lock:r})=>{Object.keys(n).forEach((s=>{t[s]=r(n[s](e))}))},l={repoOwner:!0,ipld:null,repo:null};t.exports=e=>{const{repoOwner:t}=Object.assign({},l||{},e);r(e.ipld,"MFS requires an IPLD instance"),r(e.blocks,"MFS requires an BlockStore instance"),r(e.datastore,"MFS requires a DataStore instance"),e.repo={blocks:{get:s(e.blocks.get,{context:e.blocks})},datastore:{open:s(e.datastore.open,{context:e.datastore}),get:s(e.datastore.get,{context:e.datastore}),put:s(e.datastore.put,{context:e.datastore})}};const n=i(t),d={};return u({options:e,mfs:d,operations:o,lock:e=>n.readLock(e)}),u({options:e,mfs:d,operations:a,lock:e=>n.writeLock(e)}),Object.keys(c).forEach((t=>{d[t]=c[t](e)})),d}}}},{package:"ipfs-mfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-mfs/src/core/index.js"}],[1229,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BaseController=void 0;class r{constructor(e={},t={}){this.defaultConfig={},this.defaultState={},this.disabled=!1,this.name="BaseController",this.internalConfig=this.defaultConfig,this.internalState=this.defaultState,this.internalListeners=[],this.initialState=t,this.initialConfig=e}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,t=!1,n=!0){if(n){this.internalConfig=t?e:Object.assign(this.internalConfig,e);for(const e in this.internalConfig)void 0!==this.internalConfig[e]&&(this[e]=this.internalConfig[e])}else for(const t in e)void 0!==this.internalConfig[t]&&(this.internalConfig[t]=e[t],this[t]=e[t])}notify(){this.disabled||this.internalListeners.forEach((e=>{e(this.internalState)}))}subscribe(e){this.internalListeners.push(e)}unsubscribe(e){const t=this.internalListeners.findIndex((t=>e===t));return t>-1&&this.internalListeners.splice(t,1),t>-1}update(e,t=!1){this.internalState=t?Object.assign({},e):Object.assign({},this.internalState,e),this.notify()}}n.BaseController=r,n.default=r}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/BaseController.js"}],[1232,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ControllerMessenger=n.RestrictedControllerMessenger=void 0;class r{constructor({controllerMessenger:e,name:t,allowedActions:n,allowedEvents:r}){this.controllerMessenger=e,this.controllerName=t,this.allowedActions=n||null,this.allowedEvents=r||null}registerActionHandler(e,t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed registering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.registerActionHandler(e,t)}unregisterActionHandler(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed unregistering action handlers prefixed by '${this.controllerName}:'`);this.controllerMessenger.unregisterActionHandler(e)}call(e,...t){if(null===this.allowedActions)throw new Error("No actions allowed");if(!this.allowedActions.includes(e))throw new Error(`Action missing from allow list: ${e}`);return this.controllerMessenger.call(e,...t)}publish(e,...t){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed publishing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.publish(e,...t)}subscribe(e,t,n){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);return n?this.controllerMessenger.subscribe(e,t,n):this.controllerMessenger.subscribe(e,t)}unsubscribe(e,t){if(null===this.allowedEvents)throw new Error("No events allowed");if(!this.allowedEvents.includes(e))throw new Error(`Event missing from allow list: ${e}`);this.controllerMessenger.unsubscribe(e,t)}clearEventSubscriptions(e){if(!e.startsWith(`${this.controllerName}:`))throw new Error(`Only allowed clearing events prefixed by '${this.controllerName}:'`);this.controllerMessenger.clearEventSubscriptions(e)}}n.RestrictedControllerMessenger=r;n.ControllerMessenger=class{constructor(){this.actions=new Map,this.events=new Map,this.eventPayloadCache=new Map}registerActionHandler(e,t){if(this.actions.has(e))throw new Error(`A handler for ${e} has already been registered`);this.actions.set(e,t)}unregisterActionHandler(e){this.actions.delete(e)}clearActions(){this.actions.clear()}call(e,...t){const n=this.actions.get(e);if(!n)throw new Error(`A handler for ${e} has not been registered`);return n(...t)}publish(e,...t){const n=this.events.get(e);if(n)for(const[e,r]of n.entries())if(r){const n=this.eventPayloadCache.get(e),s=r(...t);s!==n&&(this.eventPayloadCache.set(e,s),e(s,n))}else e(...t)}subscribe(e,t,n){let r=this.events.get(e);r||(r=new Map,this.events.set(e,r)),r.set(t,n)}unsubscribe(e,t){const n=this.events.get(e);if(!n||!n.has(t))throw new Error(`Subscription not found for event: ${e}`);n.get(t)&&this.eventPayloadCache.delete(t),n.delete(t)}clearEventSubscriptions(e){this.events.delete(e)}clearSubscriptions(){this.events.clear()}getRestricted({name:e,allowedActions:t,allowedEvents:n}){return new r({controllerMessenger:this,name:e,allowedActions:t,allowedEvents:n})}}}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/ControllerMessenger.js"}],[1231,{"./BaseController":1229},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ComposableController=void 0;const r=e("./BaseController");class s extends r.BaseController{constructor(e,t){super(undefined,e.reduce(((e,t)=>(e[t.name]=t.state,e)),{})),this.controllers=[],this.name="ComposableController",this.initialize(),this.controllers=e,this.messagingSystem=t,this.controllers.forEach((e=>{const{name:t}=e;if(e.subscribe!==undefined)e.subscribe((e=>{this.update({[t]:e})}));else{if(!this.messagingSystem)throw new Error("Messaging system required if any BaseControllerV2 controllers are used");this.messagingSystem.subscribe(`${t}:stateChange`,(e=>{this.update({[t]:e})}))}}))}get flatState(){let e={};for(const t of this.controllers)e=Object.assign(Object.assign({},e),t.state);return e}}n.ComposableController=s,n.default=s}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/ComposableController.js"}],[1290,{"../BaseController":1229,"../util":1292},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AddressBookController=void 0;const r=e("../util"),s=e("../BaseController");class i extends s.BaseController{constructor(e,t){super(e,t),this.name="AddressBookController",this.defaultState={addressBook:{}},this.initialize()}clear(){this.update({addressBook:{}})}delete(e,t){if(t=r.toChecksumHexAddress(t),!r.isValidHexAddress(t)||!this.state.addressBook[e]||!this.state.addressBook[e][t])return!1;const n=Object.assign({},this.state.addressBook);return delete n[e][t],0===Object.keys(n[e]).length&&delete n[e],this.update({addressBook:n}),!0}set(e,t,n="1",s=""){if(e=r.toChecksumHexAddress(e),!r.isValidHexAddress(e))return!1;const i={address:e,chainId:n,isEns:!1,memo:s,name:t},o=r.normalizeEnsName(t);return o&&(i.name=o,i.isEns=!0),this.update({addressBook:Object.assign(Object.assign({},this.state.addressBook),{[n]:Object.assign(Object.assign({},this.state.addressBook[n]),{[e]:i})})}),!0}}n.AddressBookController=i,n.default=i}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/user/AddressBookController.js"}],[1291,{"../BaseController":1229,"../util":1292},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PreferencesController=void 0;const r=e("../BaseController"),s=e("../util");class i extends r.BaseController{constructor(e,t){super(e,t),this.name="PreferencesController",this.defaultState={featureFlags:{},frequentRpcList:[],identities:{},ipfsGateway:"https://ipfs.io/ipfs/",lostIdentities:{},selectedAddress:"",useStaticTokenList:!1,useCollectibleDetection:!1,openSeaEnabled:!1},this.initialize()}addIdentities(e){const{identities:t}=this.state;e.forEach((e=>{if(e=s.toChecksumHexAddress(e),t[e])return;const n=Object.keys(t).length;t[e]={name:`Account ${n+1}`,address:e,importTime:Date.now()}})),this.update({identities:Object.assign({},t)})}removeIdentity(e){e=s.toChecksumHexAddress(e);const{identities:t}=this.state;t[e]&&(delete t[e],this.update({identities:Object.assign({},t)}),e===this.state.selectedAddress&&this.update({selectedAddress:Object.keys(t)[0]}))}setAccountLabel(e,t){e=s.toChecksumHexAddress(e);const{identities:n}=this.state;n[e]=n[e]||{},n[e].name=t,this.update({identities:Object.assign({},n)})}setFeatureFlag(e,t){const n=this.state.featureFlags,r=Object.assign(Object.assign({},n),{[e]:t});this.update({featureFlags:Object.assign({},r)})}syncIdentities(e){e=e.map((e=>s.toChecksumHexAddress(e)));const{identities:t,lostIdentities:n}=this.state,r={};for(const n in t)-1===e.indexOf(n)&&(r[n]=t[n],delete t[n]);if(Object.keys(r).length>0)for(const e in r)n[e]=r[e];return this.update({identities:Object.assign({},t),lostIdentities:Object.assign({},n)}),this.addIdentities(e),-1===e.indexOf(this.state.selectedAddress)&&this.update({selectedAddress:e[0]}),this.state.selectedAddress}updateIdentities(e){e=e.map((e=>s.toChecksumHexAddress(e)));const t=this.state.identities,n=e.reduce(((e,n,r)=>(e[n]=t[n]||{address:n,name:`Account ${r+1}`,importTime:Date.now()},e)),{});let{selectedAddress:r}=this.state;Object.keys(n).includes(r)||(r=Object.keys(n)[0]),this.update({identities:Object.assign({},n),selectedAddress:r})}addToFrequentRpcList(e,t,n,r,s){const{frequentRpcList:i}=this.state,o=i.findIndex((({rpcUrl:t})=>t===e));-1!==o&&i.splice(o,1);const a={rpcUrl:e,chainId:t,ticker:n,nickname:r,rpcPrefs:s};i.push(a),this.update({frequentRpcList:[...i]})}removeFromFrequentRpcList(e){const{frequentRpcList:t}=this.state,n=t.findIndex((({rpcUrl:t})=>t===e));-1!==n&&t.splice(n,1),this.update({frequentRpcList:[...t]})}setSelectedAddress(e){this.update({selectedAddress:s.toChecksumHexAddress(e)})}setIpfsGateway(e){this.update({ipfsGateway:e})}setUseStaticTokenList(e){this.update({useStaticTokenList:e})}setUseCollectibleDetection(e){if(e&&!this.state.openSeaEnabled)throw new Error("useCollectibleDetection cannot be enabled if openSeaEnabled is false");this.update({useCollectibleDetection:e})}setOpenSeaEnabled(e){this.update({openSeaEnabled:e}),e||this.update({useCollectibleDetection:!1})}}n.PreferencesController=i,n.default=i}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/user/PreferencesController.js"}],[1272,{"../BaseController":1229},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationController=void 0;const r=e("../BaseController"),s={notifications:{}};class i extends r.BaseController{constructor(e,t){super(e,t||s),this.initialize(),this._addNotifications()}_addNotifications(){const e={},{allNotifications:t}=this.config;Object.values(t).forEach((t=>{e[t.id]=this.state.notifications[t.id]?this.state.notifications[t.id]:Object.assign(Object.assign({},t),{isShown:!1})})),this.update({notifications:e})}updateViewed(e){const t=this.state.notifications;for(const n of Object.keys(e).map(Number))t[n].isShown=e[n];this.update({notifications:t},!0)}}n.NotificationController=i}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/notification/NotificationController.js"}],[1245,{"../BaseController":1229,"../constants":1250,"../util":1292},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.TokenDetectionController=void 0;const s=e("../BaseController"),i=e("../util"),o=e("../constants");class a extends s.BaseController{constructor({onTokensStateChange:e,onPreferencesStateChange:t,onNetworkStateChange:n,getBalancesInSingleCall:r,addTokens:s,getTokenListState:i,getTokensState:a},c,u){super(c,u),this.name="TokenDetectionController",this.isMainnet=()=>this.config.networkType===o.MAINNET,this.defaultConfig={interval:18e4,networkType:o.MAINNET,selectedAddress:"",tokens:[]},this.initialize(),this.getTokensState=a,this.getTokenListState=i,this.addTokens=s,e((({tokens:e})=>{this.configure({tokens:e})})),t((({selectedAddress:e})=>{e!==this.config.selectedAddress&&(this.configure({selectedAddress:e}),this.detectTokens())})),n((({provider:e})=>{this.configure({networkType:e.type})})),this.getBalancesInSingleCall=r}start(){return r(this,void 0,void 0,(function*(){this.isMainnet()&&!this.disabled&&(yield this.startPolling())}))}stop(){this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId)}startPolling(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.stopPolling(),yield this.detectTokens(),this.intervalId=setInterval((()=>r(this,void 0,void 0,(function*(){yield this.detectTokens()}))),this.config.interval)}))}detectTokens(){return r(this,void 0,void 0,(function*(){if(!this.isMainnet()||this.disabled)return;const e=this.config.tokens.map((e=>e.address.toLowerCase())),{tokenList:t}=this.getTokenListState(),n=[];for(const r in t)e.includes(r)||n.push(r);const s=[];s[0]=n.slice(0,1e3),s[1]=n.slice(1e3,n.length-1);const{selectedAddress:o}=this.config;if(o)for(const e of s){if(0===e.length)break;yield i.safelyExecute((()=>r(this,void 0,void 0,(function*(){const n=yield this.getBalancesInSingleCall(o,e),r=[];for(const e in n){let n;const{ignoredTokens:s}=this.getTokensState();s.length&&(n=s.find((t=>t===i.toChecksumHexAddress(e))));const o=Object.keys(t).find((t=>t.toLowerCase()===e.toLowerCase()))||"";n===undefined&&r.push({address:e,decimals:t[o].decimals,symbol:t[o].symbol})}r.length&&(yield this.addTokens(r))}))))}}))}}n.TokenDetectionController=a,n.default=a}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/assets/TokenDetectionController.js"}],[1238,{"../BaseController":1229,"../constants":1250,"../util":1292},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.CollectibleDetectionController=void 0;const s=e("../BaseController"),i=e("../util"),o=e("../constants");class a extends s.BaseController{constructor({onPreferencesStateChange:e,onNetworkStateChange:t,getOpenSeaApiKey:n,addCollectible:r,getCollectiblesState:s},i,a){super(i,a),this.name="CollectibleDetectionController",this.isMainnet=()=>this.config.networkType===o.MAINNET,this.defaultConfig={interval:18e4,networkType:o.MAINNET,chainId:"1",selectedAddress:"",disabled:!0},this.initialize(),this.getCollectiblesState=s,e((({selectedAddress:e,useCollectibleDetection:t})=>{const{selectedAddress:n,disabled:r}=this.config;e===n&&!t===r||this.configure({selectedAddress:e,disabled:!t}),t!==undefined&&(t?this.start():this.stop())})),t((({provider:e})=>{this.configure({networkType:e.type,chainId:e.chainId})})),this.getOpenSeaApiKey=n,this.addCollectible=r}getOwnerCollectiblesApi(e,t){return`https://api.opensea.io/api/v1/assets?owner=${e}&offset=${t}&limit=50`}getOwnerCollectibles(e){var t;return r(this,void 0,void 0,(function*(){let n,r=[];const s=this.getOpenSeaApiKey();try{let o=0,a=!1;do{const c=this.getOwnerCollectiblesApi(e,o);n=yield i.timeoutFetch(c,s?{headers:{"X-API-KEY":s}}:{},15e3);const u=yield n.json();0!==(null===(t=u.assets)||void 0===t?void 0:t.length)?r=[...r,...u.assets]:a=!0,o+=50}while(!a)}catch(e){return[]}return r}))}start(){return r(this,void 0,void 0,(function*(){this.isMainnet()&&!this.disabled&&(yield this.startPolling())}))}stop(){this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId)}startPolling(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.stopPolling(),yield this.detectCollectibles(),this.intervalId=setInterval((()=>r(this,void 0,void 0,(function*(){yield this.detectCollectibles()}))),this.config.interval)}))}detectCollectibles(){return r(this,void 0,void 0,(function*(){if(!this.isMainnet()||this.disabled)return;const{selectedAddress:e,chainId:t}=this.config;e&&(yield i.safelyExecute((()=>r(this,void 0,void 0,(function*(){const n=(yield this.getOwnerCollectibles(e)).map((n=>r(this,void 0,void 0,(function*(){const{token_id:r,num_sales:s,background_color:o,image_url:a,image_preview_url:c,image_thumbnail_url:u,image_original_url:l,animation_url:d,animation_original_url:h,name:f,description:p,external_link:m,creator:g,asset_contract:{address:y,schema_name:_},last_sale:b}=n;let v;const{ignoredCollectibles:w}=this.getCollectiblesState();if(w.length&&(v=w.find((e=>e.address===i.toChecksumHexAddress(y)&&e.tokenId===r))),!v){const n=Object.assign({},{name:f},g&&{creator:g},p&&{description:p},a&&{image:a},s&&{numberOfSales:s},o&&{backgroundColor:o},c&&{imagePreview:c},u&&{imageThumbnail:u},l&&{imageOriginal:l},d&&{animation:d},h&&{animationOriginal:h},_&&{standard:_},m&&{externalLink:m},b&&{lastSale:b});yield this.addCollectible(y,r,n,{userAddress:e,chainId:t})}}))));yield Promise.all(n)})))))}))}}n.CollectibleDetectionController=a,n.default=a}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/assets/CollectibleDetectionController.js"}],[1247,{"../BaseController":1229,"../apis/crypto-compare":1233,"../constants":1250,"../util":1292},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.TokenRatesController=void 0;const s=e("../BaseController"),i=e("../util"),o=e("../constants"),a=e("../apis/crypto-compare"),c={BASE_URL:"https://api.coingecko.com/api/v3",getTokenPriceURL(e,t){return`${this.BASE_URL}/simple/token_price/${e}?${t}`},getPlatformsURL(){return`${this.BASE_URL}/asset_platforms`},getSupportedVsCurrencies(){return`${this.BASE_URL}/simple/supported_vs_currencies`}};function u(e,t){var n;if(!t)return null;const r=null!==(n=t.find((({chain_identifier:t})=>null!==t&&String(t)===e)))&&void 0!==n?n:null;return(null==r?void 0:r.id)||null}class l extends s.BaseController{constructor({onTokensStateChange:e,onCurrencyRateStateChange:t,onNetworkStateChange:n},r,s){super(r,s),this.tokenList=[],this.supportedChains={timestamp:0,data:null},this.supportedVsCurrencies={timestamp:0,data:[]},this.name="TokenRatesController",this.defaultConfig={disabled:!0,interval:18e4,nativeCurrency:"eth",chainId:"",tokens:[],threshold:216e5},this.defaultState={contractExchangeRates:{}},this.initialize(),this.configure({disabled:!1},!1,!1),e((e=>{this.configure({tokens:e.tokens})})),t((e=>{this.configure({nativeCurrency:e.nativeCurrency})})),n((({provider:e})=>{const{chainId:t}=e;this.update({contractExchangeRates:{}}),this.configure({chainId:t})})),this.poll()}poll(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.handle&&clearTimeout(this.handle),yield i.safelyExecute((()=>this.updateExchangeRates())),this.handle=setTimeout((()=>{this.poll(this.config.interval)}),this.config.interval)}))}set chainId(e){!this.disabled&&i.safelyExecute((()=>this.updateExchangeRates()))}get chainId(){throw new Error("Property only used for setting")}set tokens(e){this.tokenList=e,!this.disabled&&i.safelyExecute((()=>this.updateExchangeRates()))}get tokens(){throw new Error("Property only used for setting")}fetchExchangeRate(e,t){return r(this,void 0,void 0,(function*(){const n=`contract_addresses=${this.tokenList.map((e=>e.address)).join(",")}&vs_currencies=${t.toLowerCase()}`;return i.handleFetch(c.getTokenPriceURL(e,n))}))}checkIsSupportedVsCurrency(e){return r(this,void 0,void 0,(function*(){const{threshold:t}=this.config,{timestamp:n,data:r}=this.supportedVsCurrencies;if(Date.now()-n>t){const t=yield i.handleFetch(c.getSupportedVsCurrencies());return this.supportedVsCurrencies={data:t,timestamp:Date.now()},t.includes(e.toLowerCase())}return r.includes(e.toLowerCase())}))}getChainSlug(){return r(this,void 0,void 0,(function*(){const{threshold:e,chainId:t}=this.config,{data:n,timestamp:r}=this.supportedChains;if(Date.now()-r>e){const e=yield i.handleFetch(c.getPlatformsURL());return this.supportedChains={data:e,timestamp:Date.now()},u(t,e)}return u(t,n)}))}updateExchangeRates(){return r(this,void 0,void 0,(function*(){if(0===this.tokenList.length||this.disabled)return;const e=yield this.getChainSlug();let t={};if(e){const{nativeCurrency:n}=this.config;t=yield this.fetchAndMapExchangeRates(n,e)}else this.tokenList.forEach((e=>{const n=i.toChecksumHexAddress(e.address);t[n]=undefined}));this.update({contractExchangeRates:t})}))}fetchAndMapExchangeRates(e,t){return r(this,void 0,void 0,(function*(){const n={};if(yield this.checkIsSupportedVsCurrency(e)){const r=yield this.fetchExchangeRate(t,e);this.tokenList.forEach((t=>{const s=r[t.address.toLowerCase()];n[i.toChecksumHexAddress(t.address)]=s?s[e.toLowerCase()]:0}))}else{let r,s=0;try{[r,{conversionRate:s}]=yield Promise.all([this.fetchExchangeRate(t,o.FALL_BACK_VS_CURRENCY),a.fetchExchangeRate(e,o.FALL_BACK_VS_CURRENCY,!1)])}catch(e){if(e.message.includes("market does not exist for this coin pair"))return{};throw e}for(const[e,t]of Object.entries(r)){const r=t[o.FALL_BACK_VS_CURRENCY.toLowerCase()];n[i.toChecksumHexAddress(e)]=r*s}}return n}))}}n.TokenRatesController=l,n.default=l}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/assets/TokenRatesController.js"}],[1287,{"./SubjectMetadataController":1286},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./SubjectMetadataController"),n)}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/subject-metadata/index.js"}],[1230,{immer:4405},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getPersistentState=n.getAnonymizedState=n.BaseController=void 0;const r=e("immer");r.enablePatches();function s(e,t,n){return Object.keys(e).reduce(((r,s)=>{const i=t[s][n],o=e[s];return"function"==typeof i?r[s]=i(o):i&&(r[s]=o),r}),{})}n.BaseController=class{constructor({messenger:e,metadata:t,name:n,state:r}){this.messagingSystem=e,this.name=n,this.internalState=r,this.metadata=t,this.messagingSystem.registerActionHandler(`${n}:getState`,(()=>this.state))}get state(){return this.internalState}set state(e){throw new Error("Controller state cannot be directly mutated; use 'update' method instead.")}update(e){const[t,n]=r.produceWithPatches(this.internalState,e);this.internalState=t,this.messagingSystem.publish(`${this.name}:stateChange`,t,n)}destroy(){this.messagingSystem.clearEventSubscriptions(`${this.name}:stateChange`)}},n.getAnonymizedState=function(e,t){return s(e,t,"anonymous")},n.getPersistentState=function(e,t){return s(e,t,"persist")}}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/BaseControllerV2.js"}],[1235,{"../BaseControllerV2":1230,"eth-rpc-errors":2458,nanoid:1314},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ApprovalController=void 0;const r=e("eth-rpc-errors"),s=e("nanoid"),i=e("../BaseControllerV2"),o="ApprovalController",a={pendingApprovals:{persist:!1,anonymous:!0},pendingApprovalCount:{persist:!1,anonymous:!1}};class c extends i.BaseController{constructor({messenger:e,showApprovalRequest:t,state:n={}}){super({name:o,metadata:a,messenger:e,state:Object.assign(Object.assign({},{pendingApprovals:{},pendingApprovalCount:0}),n)}),this._approvals=new Map,this._origins=new Map,this._showApprovalRequest=t,this.registerMessageHandlers()}registerMessageHandlers(){this.messagingSystem.registerActionHandler(`${o}:clearRequests`,this.clear.bind(this)),this.messagingSystem.registerActionHandler(`${o}:addRequest`,((e,t)=>t?this.addAndShowApprovalRequest(e):this.add(e))),this.messagingSystem.registerActionHandler(`${o}:hasRequest`,this.has.bind(this)),this.messagingSystem.registerActionHandler(`${o}:acceptRequest`,this.accept.bind(this)),this.messagingSystem.registerActionHandler(`${o}:rejectRequest`,this.reject.bind(this))}addAndShowApprovalRequest(e){const t=this._add(e.origin,e.type,e.id,e.requestData);return this._showApprovalRequest(),t}add(e){return this._add(e.origin,e.type,e.id,e.requestData)}get(e){return this.state.pendingApprovals[e]}getApprovalCount(e={}){var t,n;if(!e.origin&&!e.type)throw new Error("Must specify origin, type, or both.");const{origin:r,type:s}=e;if(r&&s)return Number(Boolean(null===(t=this._origins.get(r))||void 0===t?void 0:t.has(s)));if(r)return(null===(n=this._origins.get(r))||void 0===n?void 0:n.size)||0;let i=0;for(const e of Object.values(this.state.pendingApprovals))e.type===s&&(i+=1);return i}getTotalApprovalCount(){return this.state.pendingApprovalCount}has(e={}){var t;const{id:n,origin:r,type:s}=e;if(n){if("string"!=typeof n)throw new Error("May not specify non-string id.");return this._approvals.has(n)}if(s&&"string"!=typeof s)throw new Error("May not specify non-string type.");if(r){if("string"!=typeof r)throw new Error("May not specify non-string origin.");return s?Boolean(null===(t=this._origins.get(r))||void 0===t?void 0:t.has(s)):this._origins.has(r)}if(s){for(const e of Object.values(this.state.pendingApprovals))if(e.type===s)return!0;return!1}throw new Error("Must specify a valid combination of id, origin, and type.")}accept(e,t){this._deleteApprovalAndGetCallbacks(e).resolve(t)}reject(e,t){this._deleteApprovalAndGetCallbacks(e).reject(t)}clear(e){for(const t of this._approvals.keys())this.reject(t,e);this._origins.clear(),this.update((()=>({pendingApprovals:{},pendingApprovalCount:0})))}_add(e,t,n=s.nanoid(),i){var o;if(this._validateAddParams(n,e,t,i),null===(o=this._origins.get(e))||void 0===o?void 0:o.has(t))throw r.ethErrors.rpc.resourceUnavailable(((e,t)=>`Request of type '${t}' already pending for origin ${e}. Please wait.`)(e,t));return new Promise(((r,s)=>{this._approvals.set(n,{resolve:r,reject:s}),this._addPendingApprovalOrigin(e,t),this._addToStore(n,e,t,i)}))}_validateAddParams(e,t,n,s){let i=null;if(e&&"string"==typeof e?this._approvals.has(e)?i=`Approval request with id '${e}' already exists.`:t&&"string"==typeof t?n&&"string"==typeof n?s&&("object"!=typeof s||Array.isArray(s))&&(i="Request data must be a plain object if specified."):i="Must specify non-empty string type.":i="Must specify non-empty string origin.":i="Must specify non-empty string id.",i)throw r.ethErrors.rpc.internal(i)}_addPendingApprovalOrigin(e,t){const n=this._origins.get(e)||new Set;n.add(t),this._origins.has(e)||this._origins.set(e,n)}_addToStore(e,t,n,r){const s={id:e,origin:t,type:n,time:Date.now(),requestData:r||null};this.update((t=>{t.pendingApprovals[e]=s,t.pendingApprovalCount=Object.keys(t.pendingApprovals).length}))}_delete(e){this._approvals.delete(e);const{origin:t,type:n}=this.state.pendingApprovals[e];this._origins.get(t).delete(n),this._isEmptyOrigin(t)&&this._origins.delete(t),this.update((t=>{delete t.pendingApprovals[e],t.pendingApprovalCount=Object.keys(t.pendingApprovals).length}))}_deleteApprovalAndGetCallbacks(e){const t=this._approvals.get(e);if(!t)throw new Error(`Approval request with id '${e}' not found.`);return this._delete(e),t}_isEmptyOrigin(e){var t;return!(null===(t=this._origins.get(e))||void 0===t?void 0:t.size)}}n.ApprovalController=c,n.default=c}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/approval/ApprovalController.js"}],[1269,{"../util":1292,"./AbstractMessageManager":1267,uuid:6012},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PersonalMessageManager=void 0;const r=e("uuid"),s=e("../util"),i=e("./AbstractMessageManager");class o extends i.AbstractMessageManager{constructor(){super(...arguments),this.name="PersonalMessageManager"}addUnapprovedMessageAsync(e,t){return new Promise(((n,r)=>{s.validateSignMessageData(e);const i=this.addUnapprovedMessage(e,t);this.hub.once(`${i}:finished`,(t=>{switch(t.status){case"signed":return n(t.rawSig);case"rejected":return r(new Error("MetaMask Personal Message Signature: User denied message signature."));default:return r(new Error(`MetaMask Personal Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t){t&&(e.origin=t.origin),e.data=s.normalizeMessageData(e.data);const n=r.v1(),i={id:n,messageParams:e,status:"unapproved",time:Date.now(),type:"personal_sign"};return this.addMessage(i),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:n})),n}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}}n.PersonalMessageManager=o,n.default=o}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/message-manager/PersonalMessageManager.js"}],[1240,{"../BaseControllerV2":1230,"../apis/crypto-compare":1233,"../util":1292,"async-mutex":1730},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.CurrencyRateController=void 0;const s=e("async-mutex"),i=e("../BaseControllerV2"),o=e("../util"),a=e("../apis/crypto-compare"),c={conversionDate:{persist:!0,anonymous:!0},conversionRate:{persist:!0,anonymous:!0},currentCurrency:{persist:!0,anonymous:!0},nativeCurrency:{persist:!0,anonymous:!0},pendingCurrentCurrency:{persist:!1,anonymous:!0},pendingNativeCurrency:{persist:!1,anonymous:!0},usdConversionRate:{persist:!0,anonymous:!0}},u={conversionDate:0,conversionRate:0,currentCurrency:"usd",nativeCurrency:"ETH",pendingCurrentCurrency:null,pendingNativeCurrency:null,usdConversionRate:null};class l extends i.BaseController{constructor({includeUsdRate:e=!1,interval:t=18e4,messenger:n,state:r,fetchExchangeRate:i=a.fetchExchangeRate}){super({name:"CurrencyRateController",metadata:c,messenger:n,state:Object.assign(Object.assign({},u),r)}),this.mutex=new s.Mutex,this.includeUsdRate=e,this.intervalDelay=t,this.fetchExchangeRate=i}start(){return r(this,void 0,void 0,(function*(){yield this.startPolling()}))}stop(){this.stopPolling()}destroy(){super.destroy(),this.stopPolling()}setCurrentCurrency(e){return r(this,void 0,void 0,(function*(){this.update((t=>{t.pendingCurrentCurrency=e})),yield this.updateExchangeRate()}))}setNativeCurrency(e){return r(this,void 0,void 0,(function*(){this.update((t=>{t.pendingNativeCurrency=e})),yield this.updateExchangeRate()}))}stopPolling(){this.intervalId&&clearInterval(this.intervalId)}startPolling(){return r(this,void 0,void 0,(function*(){this.stopPolling(),yield o.safelyExecute((()=>this.updateExchangeRate())),this.intervalId=setInterval((()=>r(this,void 0,void 0,(function*(){yield o.safelyExecute((()=>this.updateExchangeRate()))}))),this.intervalDelay)}))}updateExchangeRate(){return r(this,void 0,void 0,(function*(){const e=yield this.mutex.acquire(),{currentCurrency:t,nativeCurrency:n,pendingCurrentCurrency:r,pendingNativeCurrency:s}=this.state;let i=null,o=null,a=null;const c=null!=r?r:t,u=null!=s?s:n;try{c&&u&&""!==c&&""!==u&&(({conversionRate:o,usdConversionRate:a}=yield this.fetchExchangeRate(c,u,this.includeUsdRate)),i=Date.now()/1e3)}catch(e){if(!e.message.includes("market does not exist for this coin pair"))throw e}finally{try{this.update((()=>({conversionDate:i,conversionRate:o,nativeCurrency:u,currentCurrency:c,pendingCurrentCurrency:null,pendingNativeCurrency:null,usdConversionRate:a})))}finally{e()}}return this.state}))}}n.CurrencyRateController=l,n.default=l}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/assets/CurrencyRateController.js"}],[1268,{"../util":1292,"./AbstractMessageManager":1267,uuid:6012},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MessageManager=void 0;const r=e("uuid"),s=e("../util"),i=e("./AbstractMessageManager");class o extends i.AbstractMessageManager{constructor(){super(...arguments),this.name="MessageManager"}addUnapprovedMessageAsync(e,t){return new Promise(((n,r)=>{s.validateSignMessageData(e);const i=this.addUnapprovedMessage(e,t);this.hub.once(`${i}:finished`,(t=>{switch(t.status){case"signed":return n(t.rawSig);case"rejected":return r(new Error("MetaMask Message Signature: User denied message signature."));default:return r(new Error(`MetaMask Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t){t&&(e.origin=t.origin),e.data=s.normalizeMessageData(e.data);const n=r.v1(),i={id:n,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_sign"};return this.addMessage(i),this.hub.emit("unapprovedMessage",Object.assign(Object.assign({},e),{metamaskId:n})),n}prepMessageForSigning(e){return delete e.metamaskId,Promise.resolve(e)}}n.MessageManager=o,n.default=o}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/message-manager/MessageManager.js"}],[1244,{"../BaseController":1229,"../util":1292,"ethereumjs-util":2524},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.TokenBalancesController=n.BN=void 0;const s=e("ethereumjs-util");Object.defineProperty(n,"BN",{enumerable:!0,get:function(){return s.BN}});const i=e("../BaseController"),o=e("../util");class a extends i.BaseController{constructor({onTokensStateChange:e,getSelectedAddress:t,getERC20BalanceOf:n},r,s){super(r,s),this.name="TokenBalancesController",this.defaultConfig={interval:18e4,tokens:[]},this.defaultState={contractBalances:{}},this.initialize(),e((({tokens:e})=>{this.configure({tokens:e}),this.updateBalances()})),this.getSelectedAddress=t,this.getERC20BalanceOf=n,this.poll()}poll(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.handle&&clearTimeout(this.handle),yield o.safelyExecute((()=>this.updateBalances())),this.handle=setTimeout((()=>{this.poll(this.config.interval)}),this.config.interval)}))}updateBalances(){return r(this,void 0,void 0,(function*(){if(this.disabled)return;const{tokens:e}=this.config,t={};for(const n in e){const{address:r}=e[n];try{t[r]=yield this.getERC20BalanceOf(r,this.getSelectedAddress()),e[n].balanceError=null}catch(i){t[r]=new s.BN(0),e[n].balanceError=i}}this.update({contractBalances:t})}))}}n.TokenBalancesController=a,n.default=a}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/assets/TokenBalancesController.js"}],[1270,{"../util":1292,"./AbstractMessageManager":1267,uuid:6012},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TypedMessageManager=void 0;const r=e("uuid"),s=e("../util"),i=e("./AbstractMessageManager");class o extends i.AbstractMessageManager{constructor(){super(...arguments),this.name="TypedMessageManager"}addUnapprovedMessageAsync(e,t,n){return new Promise(((r,i)=>{"V1"===t&&s.validateTypedSignMessageDataV1(e),"V3"===t&&s.validateTypedSignMessageDataV3(e);const o=this.addUnapprovedMessage(e,t,n);this.hub.once(`${o}:finished`,(t=>{switch(t.status){case"signed":return r(t.rawSig);case"rejected":return i(new Error("MetaMask Typed Message Signature: User denied message signature."));case"errored":return i(new Error(`MetaMask Typed Message Signature: ${t.error}`));default:return i(new Error(`MetaMask Typed Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t,n){const s=r.v1(),i=Object.assign(Object.assign({},e),{metamaskId:s,version:t});n&&(e.origin=n.origin);const o={id:s,messageParams:e,status:"unapproved",time:Date.now(),type:"eth_signTypedData"};return this.addMessage(o),this.hub.emit("unapprovedMessage",i),s}setMessageStatusErrored(e,t){const n=this.getMessage(e);n&&(n.error=t,this.updateMessage(n),this.setMessageStatus(e,"errored"))}prepMessageForSigning(e){return delete e.metamaskId,delete e.version,Promise.resolve(e)}}n.TypedMessageManager=o,n.default=o}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/message-manager/TypedMessageManager.js"}],[1239,{"../BaseController":1229,"../constants":1250,"../util":1292,"./assetsUtil":1249,"async-mutex":1730,"ethereumjs-util":2524,events:2085},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.CollectiblesController=void 0;const s=e("events"),i=e("ethereumjs-util"),o=e("async-mutex"),a=e("../BaseController"),c=e("../util"),u=e("../constants"),l=e("./assetsUtil"),d="allCollectibles",h="allCollectibleContracts";class f extends a.BaseController{constructor({onPreferencesStateChange:e,onNetworkStateChange:t,getERC721AssetName:n,getERC721AssetSymbol:r,getERC721TokenURI:i,getERC721OwnerOf:a,getERC1155BalanceOf:c,getERC1155TokenURI:l},d,h){super(d,h),this.mutex=new o.Mutex,this.hub=new s.EventEmitter,this.name="CollectiblesController",this.defaultConfig={networkType:u.MAINNET,selectedAddress:"",chainId:"",ipfsGateway:u.IPFS_DEFAULT_GATEWAY_URL,openSeaEnabled:!1,useIPFSSubdomains:!0},this.defaultState={allCollectibleContracts:{},allCollectibles:{},ignoredCollectibles:[]},this.initialize(),this.getERC721AssetName=n,this.getERC721AssetSymbol=r,this.getERC721TokenURI=i,this.getERC721OwnerOf=a,this.getERC1155BalanceOf=c,this.getERC1155TokenURI=l,e((({selectedAddress:e,ipfsGateway:t,openSeaEnabled:n})=>{this.configure({selectedAddress:e,ipfsGateway:t,openSeaEnabled:n})})),t((({provider:e})=>{const{chainId:t}=e;this.configure({chainId:t})}))}getCollectibleApi(e,t){const{chainId:n}=this.config;return n===u.RINKEBY_CHAIN_ID?`https://testnets-api.opensea.io/api/v1/asset/${e}/${t}`:`https://api.opensea.io/api/v1/asset/${e}/${t}`}getCollectibleContractInformationApi(e){const{chainId:t}=this.config;return t===u.RINKEBY_CHAIN_ID?`https://testnets-api.opensea.io/api/v1/asset_contract/${e}`:`https://api.opensea.io/api/v1/asset_contract/${e}`}updateNestedCollectibleState(e,t,{userAddress:n,chainId:r}={userAddress:this.config.selectedAddress,chainId:this.config.chainId}){const{[t]:s}=this.state,i=s[n],o=Object.assign(Object.assign({},i),{[r]:e}),a=Object.assign(Object.assign({},s),{[n]:o});this.update({[t]:a})}getCollectibleInformationFromApi(e,t){return r(this,void 0,void 0,(function*(){const n=this.getCollectibleApi(e,t);let r;r=this.openSeaApiKey?yield c.handleFetch(n,{headers:{"X-API-KEY":this.openSeaApiKey}}):yield c.handleFetch(n);const{num_sales:s,background_color:i,image_url:o,image_preview_url:a,image_thumbnail_url:u,image_original_url:l,animation_url:d,animation_original_url:h,name:f,description:p,external_link:m,creator:g,last_sale:y,asset_contract:{schema_name:_}}=r;return Object.assign({},{name:f||null},{description:p||null},{image:o||null},g&&{creator:g},s&&{numberOfSales:s},i&&{backgroundColor:i},a&&{imagePreview:a},u&&{imageThumbnail:u},l&&{imageOriginal:l},d&&{animation:d},h&&{animationOriginal:h},m&&{externalLink:m},y&&{lastSale:y},_&&{standard:_})}))}getCollectibleInformationFromTokenURI(e,t){return r(this,void 0,void 0,(function*(){const{ipfsGateway:n,useIPFSSubdomains:r}=this.config,s=yield this.getCollectibleURIAndStandard(e,t);let i=s[0];const o=s[1];i.startsWith("ipfs://")&&(i=c.getFormattedIpfsUrl(n,i,r));try{const e=yield c.handleFetch(i);return{image:e[Object.prototype.hasOwnProperty.call(e,"image")?"image":"image_url"],name:e.name,description:e.description,standard:o,favorite:!1}}catch(e){return{image:null,name:null,description:null,standard:o||null,favorite:!1}}}))}getCollectibleURIAndStandard(e,t){return r(this,void 0,void 0,(function*(){try{return[yield this.getERC721TokenURI(e,t),u.ERC721]}catch(e){}try{const n=yield this.getERC1155TokenURI(e,t);if(!n.includes("{id}"))return[n,u.ERC1155];const r=i.stripHexPrefix(c.BNToHex(new i.BN(t))).padStart(64,"0").toLowerCase();return[n.replace("{id}",r),u.ERC1155]}catch(e){}return["",""]}))}getCollectibleInformation(e,t){var n,s,i,o,a,u,l,d;return r(this,void 0,void 0,(function*(){const h=yield c.safelyExecute((()=>r(this,void 0,void 0,(function*(){return yield this.getCollectibleInformationFromTokenURI(e,t)}))));let f;return this.config.openSeaEnabled&&(f=yield c.safelyExecute((()=>r(this,void 0,void 0,(function*(){return yield this.getCollectibleInformationFromApi(e,t)}))))),Object.assign(Object.assign({},f),{name:null!==(s=null!==(n=h.name)&&void 0!==n?n:null==f?void 0:f.name)&&void 0!==s?s:null,description:null!==(o=null!==(i=h.description)&&void 0!==i?i:null==f?void 0:f.description)&&void 0!==o?o:null,image:null!==(u=null!==(a=h.image)&&void 0!==a?a:null==f?void 0:f.image)&&void 0!==u?u:null,standard:null!==(d=null!==(l=h.standard)&&void 0!==l?l:null==f?void 0:f.standard)&&void 0!==d?d:null})}))}getCollectibleContractInformationFromApi(e){return r(this,void 0,void 0,(function*(){const t=this.getCollectibleContractInformationApi(e);let n;return n=this.openSeaApiKey?yield c.handleFetch(t,{headers:{"X-API-KEY":this.openSeaApiKey}}):yield c.handleFetch(t),n}))}getCollectibleContractInformationFromContract(e){return r(this,void 0,void 0,(function*(){return{collection:{name:yield this.getERC721AssetName(e)},symbol:yield this.getERC721AssetSymbol(e),address:e}}))}getCollectibleContractInformation(e){return r(this,void 0,void 0,(function*(){const t=yield c.safelyExecute((()=>r(this,void 0,void 0,(function*(){return yield this.getCollectibleContractInformationFromContract(e)}))));let n;return this.config.openSeaEnabled&&(n=yield c.safelyExecute((()=>r(this,void 0,void 0,(function*(){return yield this.getCollectibleContractInformationFromApi(e)}))))),t||n?Object.assign(Object.assign(Object.assign({},n),t),{collection:Object.assign(Object.assign({image_url:null},null==n?void 0:n.collection),null==t?void 0:t.collection)}):{address:e,asset_contract_type:null,created_date:null,schema_name:null,symbol:null,total_supply:null,description:null,external_link:null,collection:{name:null,image_url:null}}}))}addIndividualCollectible(e,t,n,s){var i;return r(this,void 0,void 0,(function*(){const r=yield this.mutex.acquire();try{e=c.toChecksumHexAddress(e);const{allCollectibles:o}=this.state;let a,u;s?(a=s.chainId,u=s.userAddress):(a=this.config.chainId,u=this.config.selectedAddress);const h=(null===(i=o[u])||void 0===i?void 0:i[a])||[],f=h.find((n=>n.address.toLowerCase()===e.toLowerCase()&&n.tokenId===t));if(f){if(!l.compareCollectiblesMetadata(n,f))return h;{const n=h.findIndex((n=>n.address.toLowerCase()===e.toLowerCase()&&n.tokenId===t));-1!==n&&h.splice(n,1)}}const p=Object.assign({address:e,tokenId:t,favorite:(null==f?void 0:f.favorite)||!1,isCurrentlyOwned:!0},n),m=[...h,p];return this.updateNestedCollectibleState(m,d,{chainId:a,userAddress:u}),m}finally{r()}}))}addCollectibleContract(e,t){var n;return r(this,void 0,void 0,(function*(){const r=yield this.mutex.acquire();try{e=c.toChecksumHexAddress(e);const{allCollectibleContracts:s}=this.state;let i,o;t?(i=t.chainId,o=t.userAddress):(i=this.config.chainId,o=this.config.selectedAddress);const a=(null===(n=s[o])||void 0===n?void 0:n[i])||[];if(a.find((t=>t.address.toLowerCase()===e.toLowerCase())))return a;const u=yield this.getCollectibleContractInformation(e),{asset_contract_type:l,created_date:d,schema_name:f,symbol:p,total_supply:m,description:g,external_link:y,collection:{name:_,image_url:b}}=u;if(t&&!_||0===Object.keys(u).length)return a;const v=Object.assign({},{address:e},g&&{description:g},_&&{name:_},b&&{logo:b},p&&{symbol:p},null!=m&&{totalSupply:m},l&&{assetContractType:l},d&&{createdDate:d},f&&{schemaName:f},y&&{externalLink:y}),w=[...a,v];return this.updateNestedCollectibleState(w,h,{chainId:i,userAddress:o}),w}finally{r()}}))}removeAndIgnoreIndividualCollectible(e,t){var n;e=c.toChecksumHexAddress(e);const{allCollectibles:r,ignoredCollectibles:s}=this.state,{chainId:i,selectedAddress:o}=this.config,a=[...s],u=((null===(n=r[o])||void 0===n?void 0:n[i])||[]).filter((n=>{if(n.address.toLowerCase()===e.toLowerCase()&&n.tokenId===t){return!a.find((n=>n.address===e&&n.tokenId===t))&&a.push(n),!1}return!0}));this.updateNestedCollectibleState(u,d),this.update({ignoredCollectibles:a})}removeIndividualCollectible(e,t){var n;e=c.toChecksumHexAddress(e);const{allCollectibles:r}=this.state,{chainId:s,selectedAddress:i}=this.config,o=((null===(n=r[i])||void 0===n?void 0:n[s])||[]).filter((n=>!(n.address.toLowerCase()===e.toLowerCase()&&n.tokenId===t)));this.updateNestedCollectibleState(o,d)}removeCollectibleContract(e){var t;e=c.toChecksumHexAddress(e);const{allCollectibleContracts:n}=this.state,{chainId:r,selectedAddress:s}=this.config,i=((null===(t=n[s])||void 0===t?void 0:t[r])||[]).filter((t=>!(t.address.toLowerCase()===e.toLowerCase())));return this.updateNestedCollectibleState(i,h),i}setApiKey(e){this.openSeaApiKey=e}isCollectibleOwner(e,t,n){return r(this,void 0,void 0,(function*(){try{const r=yield this.getERC721OwnerOf(t,n);return e.toLowerCase()===r.toLowerCase()}catch(e){}try{return(yield this.getERC1155BalanceOf(e,t,n))>0}catch(e){}throw new Error("Unable to verify ownership. Probably because the standard is not supported or the chain is incorrect.")}))}addCollectibleVerifyOwnership(e,t){return r(this,void 0,void 0,(function*(){const{selectedAddress:n}=this.config;if(!(yield this.isCollectibleOwner(n,e,t)))throw new Error("This collectible is not owned by the user");yield this.addCollectible(e,t)}))}addCollectible(e,t,n,s){return r(this,void 0,void 0,(function*(){e=c.toChecksumHexAddress(e);const r=yield this.addCollectibleContract(e,s);n=n||(yield this.getCollectibleInformation(e,t));r.find((t=>t.address.toLowerCase()===e.toLowerCase()))&&(yield this.addIndividualCollectible(e,t,n,s))}))}removeCollectible(e,t){var n;e=c.toChecksumHexAddress(e),this.removeIndividualCollectible(e,t);const{allCollectibles:r}=this.state,{chainId:s,selectedAddress:i}=this.config;((null===(n=r[i])||void 0===n?void 0:n[s])||[]).find((t=>t.address.toLowerCase()===e.toLowerCase()))||this.removeCollectibleContract(e)}removeAndIgnoreCollectible(e,t){var n;e=c.toChecksumHexAddress(e),this.removeAndIgnoreIndividualCollectible(e,t);const{allCollectibles:r}=this.state,{chainId:s,selectedAddress:i}=this.config;((null===(n=r[i])||void 0===n?void 0:n[s])||[]).find((t=>t.address.toLowerCase()===e.toLowerCase()))||this.removeCollectibleContract(e)}clearIgnoredCollectibles(){this.update({ignoredCollectibles:[]})}checkAndUpdateSingleCollectibleOwnershipStatus(e,t,{userAddress:n,chainId:s}={userAddress:this.config.selectedAddress,chainId:this.config.chainId}){var i;return r(this,void 0,void 0,(function*(){const{address:r,tokenId:o}=e;let a=e.isCurrentlyOwned;try{a=yield this.isCollectibleOwner(n,r,o)}catch(e){if(!e.message.includes("Unable to verify ownership"))throw e}if(e.isCurrentlyOwned=a,!0===t)return e;const{allCollectibles:c}=this.state,u=(null===(i=c[n])||void 0===i?void 0:i[s])||[],l=u.find((e=>e.tokenId===o&&e.address.toLowerCase()===r.toLowerCase()));return l&&(l.isCurrentlyOwned=a,this.updateNestedCollectibleState(u,d,{userAddress:n,chainId:s})),e}))}checkAndUpdateAllCollectiblesOwnershipStatus(){var e;return r(this,void 0,void 0,(function*(){const{allCollectibles:t}=this.state,{chainId:n,selectedAddress:s}=this.config,i=(null===(e=t[s])||void 0===e?void 0:e[n])||[],o=yield Promise.all(i.map((e=>r(this,void 0,void 0,(function*(){var t;return null!==(t=yield this.checkAndUpdateSingleCollectibleOwnershipStatus(e,!0))&&void 0!==t?t:e})))));this.updateNestedCollectibleState(o,d)}))}updateCollectibleFavoriteStatus(e,t,n){var r;const{allCollectibles:s}=this.state,{chainId:i,selectedAddress:o}=this.config,a=(null===(r=s[o])||void 0===r?void 0:r[i])||[],c=a.findIndex((n=>n.address===e&&n.tokenId===t));if(-1===c)return;const u=Object.assign(Object.assign({},a[c]),{favorite:n});a[c]=u,this.updateNestedCollectibleState(a,d)}}n.CollectiblesController=f,n.default=f}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/assets/CollectiblesController.js"}],[1285,{"../BaseControllerV2":1230,"eth-rpc-errors":2458},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.RateLimitController=void 0;const s=e("eth-rpc-errors"),i=e("../BaseControllerV2"),o="RateLimitController",a={requests:{persist:!1,anonymous:!1}};class c extends i.BaseController{constructor({rateLimitTimeout:e=5e3,rateLimitCount:t=1,messenger:n,state:r,implementations:s}){const i={requests:Object.keys(s).reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:{}})),{})};super({name:o,metadata:a,messenger:n,state:Object.assign(Object.assign({},i),r)}),this.implementations=s,this.rateLimitTimeout=e,this.rateLimitCount=t,this.messagingSystem.registerActionHandler(`${o}:call`,((e,t,...n)=>this.call(e,t,...n)))}call(e,t,...n){return r(this,void 0,void 0,(function*(){if(this.isRateLimited(t,e))throw s.ethErrors.rpc.limitExceeded({message:`"${t}" is currently rate-limited. Please try again later.`});this.recordRequest(t,e);const r=this.implementations[t];if(!r)throw new Error("Invalid api type");return r(...n)}))}isRateLimited(e,t){return this.state.requests[e][t]>=this.rateLimitCount}recordRequest(e,t){this.update((n=>{var r;n.requests[e][t]=(null!==(r=n.requests[e][t])&&void 0!==r?r:0)+1,setTimeout((()=>this.resetRequestCount(e,t)),this.rateLimitTimeout)}))}resetRequestCount(e,t){this.update((n=>{n.requests[e][t]=0}))}}n.RateLimitController=c}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/ratelimit/RateLimitController.js"}],[1236,{"../BaseController":1229,"../util":1292,"async-mutex":1730,"eth-query":2454},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.AccountTrackerController=void 0;const i=s(e("eth-query")),o=e("async-mutex"),a=e("../BaseController"),c=e("../util");class u extends a.BaseController{constructor({onPreferencesStateChange:e,getIdentities:t},n,s){super(n,s),this.mutex=new o.Mutex,this.name="AccountTrackerController",this.refresh=()=>r(this,void 0,void 0,(function*(){this.syncAccounts();const{accounts:e}=this.state;for(const t in e)yield c.safelyExecuteWithTimeout((()=>r(this,void 0,void 0,(function*(){const n=yield c.query(this.ethQuery,"getBalance",[t]);e[t]={balance:c.BNToHex(n)},this.update({accounts:Object.assign({},e)})}))))})),this.defaultConfig={interval:1e4},this.defaultState={accounts:{}},this.initialize(),this.getIdentities=t,e((()=>{this.refresh()})),this.poll()}syncAccounts(){const{accounts:e}=this.state,t=Object.keys(this.getIdentities()),n=Object.keys(e),r=t.filter((e=>-1===n.indexOf(e))),s=n.filter((e=>-1===t.indexOf(e)));r.forEach((t=>{e[t]={balance:"0x0"}})),s.forEach((t=>{delete e[t]})),this.update({accounts:Object.assign({},e)})}set provider(e){this.ethQuery=new i.default(e)}get provider(){throw new Error("Property only used for setting")}poll(e){return r(this,void 0,void 0,(function*(){const t=yield this.mutex.acquire();e&&this.configure({interval:e},!1,!1),this.handle&&clearTimeout(this.handle),yield this.refresh(),this.handle=setTimeout((()=>{t(),this.poll(this.config.interval)}),this.config.interval)}))}}n.AccountTrackerController=u,n.default=u}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/assets/AccountTrackerController.js"}],[1292,{"./constants":1250,buffer:2084,"eth-ens-namehash":2371,"eth-rpc-errors":2458,"eth-sig-util":2460,"ethereumjs-util":2524,"ethjs-unit":2576,"fast-deep-equal":4296,jsonschema:4743,"multiformats/cid":5231},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.isValidJson=n.isNonEmptyArray=n.hasProperty=n.isPlainObject=n.getFormattedIpfsUrl=n.addUrlProtocolPrefix=n.getIpfsCIDv1AndPath=n.removeIpfsProtocolPrefix=n.validateMinimumIncrease=n.isGasPriceValue=n.isFeeMarketEIP1559Values=n.validateGasValues=n.getIncreasedPriceFromExisting=n.getIncreasedPriceHex=n.convertPriceToDecimal=n.isEIP1559Transaction=n.query=n.normalizeEnsName=n.timeoutFetch=n.handleFetch=n.successfulFetch=n.isSmartContractCode=n.validateTokenToWatch=n.validateTypedSignMessageDataV3=n.validateTypedSignMessageDataV1=n.validateSignMessageData=n.normalizeMessageData=n.validateTransaction=n.isValidHexAddress=n.toChecksumHexAddress=n.safelyExecuteWithTimeout=n.safelyExecute=n.normalizeTransaction=n.toHex=n.fromHex=n.hexToText=n.hexToBN=n.handleTransactionFetch=n.getEtherscanApiUrl=n.getBuyURL=n.weiHexToGweiDec=n.gweiDecToWEIBN=n.fractionBN=n.BNToHex=void 0;const i=e("ethereumjs-util"),o=e("ethjs-unit"),a=e("eth-rpc-errors"),c=s(e("eth-ens-namehash")),u=e("eth-sig-util"),l=e("jsonschema"),d=e("multiformats/cid"),h=s(e("fast-deep-equal")),f=e("./constants"),p=/^[0-9A-Fa-f]+$/gu,m={data:e=>i.addHexPrefix(e),from:e=>i.addHexPrefix(e).toLowerCase(),gas:e=>i.addHexPrefix(e),gasPrice:e=>i.addHexPrefix(e),nonce:e=>i.addHexPrefix(e),to:e=>i.addHexPrefix(e).toLowerCase(),value:e=>i.addHexPrefix(e),maxFeePerGas:e=>i.addHexPrefix(e),maxPriorityFeePerGas:e=>i.addHexPrefix(e),estimatedBaseFee:e=>i.addHexPrefix(e)};function g(e,t){let n="api";e!==f.MAINNET&&(n=`api-${e}`);let r=`${`https://${n}.etherscan.io`}/api?`;for(const e in t)t[e]&&(r+=`${e}=${t[e]}&`);return r+="tag=latest&page=1",r}function y(e){return new i.BN(i.stripHexPrefix(e),16)}function _(e,{allowNonPrefixed:t=!0}={}){const n=t?i.addHexPrefix(e):e;return!!i.isHexString(n)&&i.isValidAddress(n)}function b(e,t){return r(this,void 0,void 0,(function*(){const n=yield fetch(e,t);if(!n.ok)throw new Error(`Fetch failed with status '${n.status}' for request '${e}'`);return n}))}function v(e,t){return r(this,void 0,void 0,(function*(){const n=yield b(e,t);return yield n.json()}))}n.BNToHex=function(e){return i.addHexPrefix(e.toString(16))},n.fractionBN=function(e,t,n){const r=new i.BN(t),s=new i.BN(n);return e.mul(r).div(s)},n.gweiDecToWEIBN=function(e){if(Number.isNaN(e))return new i.BN(0);const t=e.toString().split("."),n=t[0]||"0";let r=t[1]||"";if(!r)return o.toWei(n,"gwei");if(r.length<=9)return o.toWei(`${n}.${r}`,"gwei");const s=r.slice(9)[0];r=r.slice(0,9);let a=o.toWei(`${n}.${r}`,"gwei");return Number(s)>=5&&(a=a.add(new i.BN(1))),a},n.weiHexToGweiDec=function(e){const t=new i.BN(i.stripHexPrefix(e),16);return o.fromWei(t,"gwei").toString(10)},n.getBuyURL=function(e="1",t,n=5){switch(e){case"1":return`https://buy.coinbase.com/?code=9ec56d01-7e81-5017-930c-513daa27bb6a&amount=${n}&address=${t}&crypto_currency=ETH`;case"3":return"https://faucet.metamask.io/";case"4":return"https://www.rinkeby.io/";case"5":return"https://goerli-faucet.slock.it/";case"42":return"https://github.com/kovan-testnet/faucet";default:return undefined}},n.getEtherscanApiUrl=g,n.handleTransactionFetch=function(e,t,n,s){return r(this,void 0,void 0,(function*(){const r={module:"account",address:t,startBlock:null==s?void 0:s.fromBlock,apikey:null==s?void 0:s.etherscanApiKey,offset:n.toString(),order:"desc"},i=v(g(e,Object.assign(Object.assign({},r),{action:"txlist"}))),o=v(g(e,Object.assign(Object.assign({},r),{action:"tokentx"})));let[a,c]=yield Promise.all([i,o]);return("0"===a.status||a.result.length<=0)&&(a={status:a.status,result:[]}),("0"===c.status||c.result.length<=0)&&(c={status:c.status,result:[]}),[a,c]}))},n.hexToBN=y,n.hexToText=function(e){try{const n=i.stripHexPrefix(e);return t.from(n,"hex").toString("utf8")}catch(t){return e}},n.fromHex=function(e){return i.BN.isBN(e)?e:new i.BN(y(e).toString(10))},n.toHex=function(e){return"string"==typeof e&&i.isHexString(e)?e:`0x${i.BN.isBN(e)?e.toString(16):new i.BN(e.toString(),10).toString(16)}`},n.normalizeTransaction=function(e){const t={from:""};let n;for(n in m)e[n]&&(t[n]=m[n](e[n]));return t},n.safelyExecute=function(e,t=!1,n){return r(this,void 0,void 0,(function*(){try{return yield e()}catch(e){return t&&console.error(e),null==n||n(e),undefined}}))},n.safelyExecuteWithTimeout=function(e,t=!1,n=500){return r(this,void 0,void 0,(function*(){try{return yield Promise.race([e(),new Promise(((e,t)=>setTimeout((()=>{t(new Error("timeout"))}),n)))])}catch(e){return t&&console.error(e),undefined}}))},n.toChecksumHexAddress=function(e){const t=i.addHexPrefix(e);return i.isHexString(t)?i.toChecksumAddress(t):t},n.isValidHexAddress=_,n.validateTransaction=function(e){if(!e.from||"string"!=typeof e.from||!_(e.from))throw new Error(`Invalid "from" address: ${e.from} must be a valid string.`);if("0x"===e.to||e.to===undefined){if(!e.data)throw new Error(`Invalid "to" address: ${e.to} must be a valid string.`);delete e.to}else if(e.to!==undefined&&!_(e.to))throw new Error(`Invalid "to" address: ${e.to} must be a valid string.`);if(e.value!==undefined){const t=e.value.toString();if(t.includes("-"))throw new Error(`Invalid "value": ${t} is not a positive number.`);if(t.includes("."))throw new Error(`Invalid "value": ${t} number must be denominated in wei.`);const n=parseInt(e.value,10);if(!(Number.isFinite(n)&&!Number.isNaN(n)&&!isNaN(Number(t))&&Number.isSafeInteger(n)))throw new Error(`Invalid "value": ${t} number must be a valid number.`)}},n.normalizeMessageData=function(e){try{const t=i.stripHexPrefix(e);if(t.match(p))return i.addHexPrefix(t)}catch(e){}return i.bufferToHex(t.from(e,"utf8"))},n.validateSignMessageData=function(e){const{from:t,data:n}=e;if(!t||"string"!=typeof t||!_(t))throw new Error(`Invalid "from" address: ${t} must be a valid string.`);if(!n||"string"!=typeof n)throw new Error(`Invalid message "data": ${n} must be a valid string.`)},n.validateTypedSignMessageDataV1=function(e){if(!e.from||"string"!=typeof e.from||!_(e.from))throw new Error(`Invalid "from" address: ${e.from} must be a valid string.`);if(!e.data||!Array.isArray(e.data))throw new Error(`Invalid message "data": ${e.data} must be a valid array.`);try{u.typedSignatureHash(e.data)}catch(e){throw new Error("Expected EIP712 typed data.")}},n.validateTypedSignMessageDataV3=function(e){if(!e.from||"string"!=typeof e.from||!_(e.from))throw new Error(`Invalid "from" address: ${e.from} must be a valid string.`);if(!e.data||"string"!=typeof e.data)throw new Error(`Invalid message "data": ${e.data} must be a valid array.`);let t;try{t=JSON.parse(e.data)}catch(e){throw new Error("Data must be passed as a valid JSON string.")}if(l.validate(t,u.TYPED_MESSAGE_SCHEMA).errors.length>0)throw new Error("Data must conform to EIP-712 schema. See https://git.io/fNtcx.")},n.validateTokenToWatch=function(e){const{address:t,symbol:n,decimals:r}=e;if(!t||!n||void 0===r)throw a.ethErrors.rpc.invalidParams("Must specify address, symbol, and decimals.");if("string"!=typeof n)throw a.ethErrors.rpc.invalidParams("Invalid symbol: not a string.");if(n.length>11)throw a.ethErrors.rpc.invalidParams(`Invalid symbol "${n}": longer than 11 characters.`);const s=parseInt(r,10);if(isNaN(s)||s>36||s<0)throw a.ethErrors.rpc.invalidParams(`Invalid decimals "${r}": must be 0 <= 36.`);if(!_(t))throw a.ethErrors.rpc.invalidParams(`Invalid address "${t}".`)},n.isSmartContractCode=function(e){return!!e&&("0x"!==e&&"0x0"!==e)},n.successfulFetch=b,n.handleFetch=v,n.timeoutFetch=function(e,t,n=500){return r(this,void 0,void 0,(function*(){return Promise.race([b(e,t),new Promise(((e,t)=>setTimeout((()=>{t(new Error("timeout"))}),n)))])}))},n.normalizeEnsName=function(e){if(e&&"string"==typeof e)try{const t=c.default.normalize(e.trim());if(t.match(/^(([\w\d-]+)\.)*[\w\d-]{7,}\.(eth|test)$/u))return t}catch(e){}return null},n.query=function(e,t,n=[]){return new Promise(((r,s)=>{const i=(e,t)=>{e?s(e):r(t)};"function"==typeof e[t]?e[t](...n,i):e.sendAsync({method:t,params:n},i)}))};n.isEIP1559Transaction=e=>{const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);return t(e,"maxFeePerGas")&&t(e,"maxPriorityFeePerGas")};n.convertPriceToDecimal=e=>parseInt(e===undefined?"0x0":e,16);n.getIncreasedPriceHex=(e,t)=>i.addHexPrefix(`${parseInt(""+e*t,10).toString(16)}`);n.getIncreasedPriceFromExisting=(e,t)=>n.getIncreasedPriceHex(n.convertPriceToDecimal(e),t);n.validateGasValues=e=>{Object.keys(e).forEach((t=>{const n=e[t];if("string"!=typeof n||!i.isHexString(n))throw new TypeError(`expected hex string for ${t} but received: ${n}`)}))};n.isFeeMarketEIP1559Values=e=>{var t,n;return(null===(t=e)||void 0===t?void 0:t.maxFeePerGas)!==undefined||(null===(n=e)||void 0===n?void 0:n.maxPriorityFeePerGas)!==undefined};function w(e){if(e.startsWith("ipfs://ipfs/"))return e.replace("ipfs://ipfs/","");if(e.startsWith("ipfs://"))return e.replace("ipfs://","");throw new Error("this method should not be used with non ipfs urls")}function k(e){const t=w(e),n=t.indexOf("/"),r=-1!==n?t.substring(0,n):t,s=-1!==n?t.substring(n):undefined;return{cid:d.CID.parse(r).toV1().toString(),path:s}}function E(e){return e.match(/(^http:\/\/)|(^https:\/\/)/u)?e:`https://${e}`}n.isGasPriceValue=e=>{var t;return(null===(t=e)||void 0===t?void 0:t.gasPrice)!==undefined},n.validateMinimumIncrease=function(e,t){const r=n.convertPriceToDecimal(e),s=n.convertPriceToDecimal(t);if(r>=s)return e;throw new Error(`The proposed value: ${r} should meet or exceed the minimum value: ${s}`)},n.removeIpfsProtocolPrefix=w,n.getIpfsCIDv1AndPath=k,n.addUrlProtocolPrefix=E,n.getFormattedIpfsUrl=function(e,t,n){const{host:r,protocol:s,origin:i}=new URL(E(e));if(n){const{cid:e,path:n}=k(t);return`${s}//${e}.ipfs.${r}${null!=n?n:""}`}return`${i}/ipfs/${w(t)}`},n.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};n.hasProperty=(e,t)=>Reflect.hasOwnProperty.call(e,t),n.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},n.isValidJson=function(e){try{return h.default(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/util.js"}],[1246,{"../BaseControllerV2":1230,"../apis/token-service":1234,"../util":1292,"@metamask/contract-metadata":1012,"abort-controller":1672,"async-mutex":1730},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.TokenListController=void 0;const o=i(e("@metamask/contract-metadata")),a=e("async-mutex"),c=i(e("abort-controller")),u=e("../BaseControllerV2"),l=e("../util"),d=e("../apis/token-service"),h={tokenList:{persist:!0,anonymous:!0},tokensChainsCache:{persist:!0,anonymous:!0}},f={tokenList:{},tokensChainsCache:{}};class p extends u.BaseController{constructor({chainId:e,useStaticTokenList:t,onNetworkStateChange:n,onPreferencesStateChange:s,interval:i=36e5,cacheRefreshThreshold:o=18e5,messenger:u,state:l}){super({name:"TokenListController",metadata:h,messenger:u,state:Object.assign(Object.assign({},f),l)}),this.mutex=new a.Mutex,this.intervalDelay=i,this.cacheRefreshThreshold=o,this.chainId=e,this.useStaticTokenList=t,this.abortController=new c.default,n((e=>r(this,void 0,void 0,(function*(){this.chainId!==e.provider.chainId&&(this.abortController.abort(),this.abortController=new c.default,this.chainId=e.provider.chainId,yield this.restart())})))),s((e=>r(this,void 0,void 0,(function*(){this.useStaticTokenList!==e.useStaticTokenList&&(this.abortController.abort(),this.abortController=new c.default,this.useStaticTokenList=e.useStaticTokenList,yield this.restart())}))))}start(){return r(this,void 0,void 0,(function*(){yield this.startPolling()}))}restart(){return r(this,void 0,void 0,(function*(){this.stopPolling(),yield this.startPolling()}))}stop(){this.stopPolling()}destroy(){super.destroy(),this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId)}startPolling(){return r(this,void 0,void 0,(function*(){yield l.safelyExecute((()=>this.fetchTokenList())),this.intervalId=setInterval((()=>r(this,void 0,void 0,(function*(){yield l.safelyExecute((()=>this.fetchTokenList()))}))),this.intervalDelay)}))}fetchTokenList(){return r(this,void 0,void 0,(function*(){this.useStaticTokenList?yield this.fetchFromStaticTokenList():yield this.fetchFromDynamicTokenList()}))}fetchFromStaticTokenList(){return r(this,void 0,void 0,(function*(){const e={};for(const t in o.default){const n=o.default[t],{erc20:r,logo:i}=n,a=s(n,["erc20","logo"]);r&&(e[t]=Object.assign(Object.assign({},a),{address:t,iconUrl:i,occurrences:null}))}this.update((()=>({tokenList:e,tokensChainsCache:{}})))}))}fetchFromDynamicTokenList(){return r(this,void 0,void 0,(function*(){const e=yield this.mutex.acquire();try{const t=yield l.safelyExecute((()=>this.fetchFromCache())),n=this.state,{tokensChainsCache:r}=n,i=s(n,["tokensChainsCache"]),o={};if(t)for(const e of t)o[e.address]=e;else{const e=yield l.safelyExecute((()=>d.fetchTokenList(this.chainId,this.abortController.signal)));if(!e){const e=r[this.chainId]?r[this.chainId].data:[];for(const t of e)o[t.address]=t;return void this.update((()=>Object.assign(Object.assign({},i),{tokenList:o,tokensChainsCache:r})))}const t=e.filter((e=>e.occurrences&&e.occurrences>=2)),n=t.map((e=>e.symbol)),s=[...new Set(n.filter(((e,t)=>n.indexOf(e)!==t)))],a=t.filter((e=>!s.includes(e.symbol)));for(const e of a)o[e.address]=e}const a=Object.assign(Object.assign({},r),{[this.chainId]:{timestamp:Date.now(),data:Object.values(o)}});this.update((()=>Object.assign(Object.assign({},i),{tokenList:o,tokensChainsCache:a})))}finally{e()}}))}fetchFromCache(){return r(this,void 0,void 0,(function*(){const{tokensChainsCache:e}=this.state,t=e[this.chainId],n=Date.now();return(null==t?void 0:t.data)&&n-(null==t?void 0:t.timestamp)<this.cacheRefreshThreshold?t.data:null}))}fetchTokenMetadata(e){return r(this,void 0,void 0,(function*(){const t=yield this.mutex.acquire();try{return yield d.fetchTokenMetadata(this.chainId,e,this.abortController.signal)}finally{t()}}))}}n.TokenListController=p,n.default=p}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/assets/TokenListController.js"}],[1248,{"../BaseController":1229,"../constants":1250,"../util":1292,"@metamask/contract-metadata":1012,"@metamask/metamask-eth-abis":1185,"async-mutex":1730,ethers:2548,events:2085,uuid:6012},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.TokensController=void 0;const i=e("events"),o=s(e("@metamask/contract-metadata")),a=e("@metamask/metamask-eth-abis"),c=e("uuid"),u=e("async-mutex"),l=e("ethers"),d=e("../BaseController"),h=e("../util"),f=e("../constants");var p;!function(e){e.accepted="accepted",e.failed="failed",e.pending="pending",e.rejected="rejected"}(p||(p={}));class m extends d.BaseController{constructor({onPreferencesStateChange:e,onNetworkStateChange:t,config:n,state:r}){super(n,r),this.mutex=new u.Mutex,this.hub=new i.EventEmitter,this.name="TokensController",this.defaultConfig=Object.assign({networkType:f.MAINNET,selectedAddress:"",chainId:"",provider:undefined},n),this.defaultState=Object.assign({allTokens:{},allIgnoredTokens:{},ignoredTokens:[],suggestedAssets:[],tokens:[]},r),this.initialize(),e((({selectedAddress:e})=>{var t,n;const{allTokens:r,allIgnoredTokens:s}=this.state,{chainId:i}=this.config;this.configure({selectedAddress:e}),this.update({tokens:(null===(t=r[i])||void 0===t?void 0:t[e])||[],ignoredTokens:(null===(n=s[i])||void 0===n?void 0:n[e])||[]})})),t((({provider:e})=>{var t,n;const{allTokens:r,allIgnoredTokens:s}=this.state,{selectedAddress:i}=this.config,{chainId:o}=e;this.configure({chainId:o}),this.ethersProvider=this._instantiateNewEthersProvider(),this.update({tokens:(null===(t=r[o])||void 0===t?void 0:t[i])||[],ignoredTokens:(null===(n=s[o])||void 0===n?void 0:n[i])||[]})}))}failSuggestedAsset(e,t){const n=Object.assign(Object.assign({},e),{status:p.failed,error:t});this.hub.emit(`${e.id}:finished`,n)}_instantiateNewEthersProvider(){var e;return new l.ethers.providers.Web3Provider(null===(e=this.config)||void 0===e?void 0:e.provider)}addToken(e,t,n,s){return r(this,void 0,void 0,(function*(){const r=yield this.mutex.acquire();try{e=h.toChecksumHexAddress(e);const{tokens:i,ignoredTokens:o}=this.state,a=yield this._detectIsERC721(e),c={address:e,symbol:t,decimals:n,image:s,isERC721:a},u=i.find((t=>t.address.toLowerCase()===e.toLowerCase()));if(u){const e=i.indexOf(u);i[e]=c}else i.push(c);const l=o.filter((t=>t.toLowerCase()!==e.toLowerCase())),{newAllTokens:d,newAllIgnoredTokens:f}=this._getNewAllTokensState(i,l);return this.update({allTokens:d,tokens:i,allIgnoredTokens:f,ignoredTokens:l}),i}finally{r()}}))}addTokens(e){return r(this,void 0,void 0,(function*(){const t=yield this.mutex.acquire(),{tokens:n,ignoredTokens:s}=this.state;try{e=yield Promise.all(e.map((e=>r(this,void 0,void 0,(function*(){return e.isERC721=yield this._detectIsERC721(e.address),e})))));let i=s;e.forEach((e=>{const{address:t,symbol:r,decimals:s,image:o,isERC721:a}=e,c=h.toChecksumHexAddress(t),u={address:c,symbol:r,decimals:s,image:o,isERC721:a},l=n.find((e=>e.address.toLowerCase()===c.toLowerCase()));if(l){const e=n.indexOf(l);n[e]=u}else n.push(u);i=i.filter((e=>e.toLowerCase()!==t.toLowerCase()))}));const{newAllTokens:o,newAllIgnoredTokens:a}=this._getNewAllTokensState(n,i);return this.update({tokens:n,allTokens:o,allIgnoredTokens:a,ignoredTokens:i}),n}finally{t()}}))}updateTokenType(e){return r(this,void 0,void 0,(function*(){const t=yield this._detectIsERC721(e),{tokens:n}=this.state,r=n.findIndex((t=>t.address.toLowerCase()===e.toLowerCase()));return n[r].isERC721=t,this.update({tokens:n}),n[r]}))}_detectIsERC721(e){var t,n;return r(this,void 0,void 0,(function*(){const r=h.toChecksumHexAddress(e);if(!0===(null===(t=o.default[r])||void 0===t?void 0:t.erc721))return Promise.resolve(!0);if(!0===(null===(n=o.default[r])||void 0===n?void 0:n.erc20))return Promise.resolve(!1);const s=yield this._createEthersContract(e,a.abiERC721,this.ethersProvider);try{return yield s.supportsInterface(f.ERC721_INTERFACE_ID)}catch(e){return!1}}))}_createEthersContract(e,t,n){return r(this,void 0,void 0,(function*(){return yield new l.ethers.Contract(e,t,n)}))}_generateRandomId(){return c.v1()}watchAsset(e,t){return r(this,void 0,void 0,(function*(){const n={asset:e,id:this._generateRandomId(),status:p.pending,time:Date.now(),type:t};try{if("ERC20"!==t)throw new Error(`Asset of type ${t} not supported`);h.validateTokenToWatch(e)}catch(e){return this.failSuggestedAsset(n,e),Promise.reject(e)}const r=new Promise(((e,t)=>{this.hub.once(`${n.id}:finished`,(n=>{switch(n.status){case p.accepted:return e(n.asset.address);case p.rejected:return t(new Error("User rejected to watch the asset."));case p.failed:return t(new Error(n.error.message));default:return t(new Error(`Unknown status: ${n.status}`))}}))})),{suggestedAssets:s}=this.state;return s.push(n),this.update({suggestedAssets:[...s]}),this.hub.emit("pendingSuggestedAsset",n),{result:r,suggestedAssetMeta:n}}))}acceptWatchAsset(e){return r(this,void 0,void 0,(function*(){const{suggestedAssets:t}=this.state,n=t.findIndex((({id:t})=>e===t)),r=t[n];try{if("ERC20"!==r.type)throw new Error(`Asset of type ${r.type} not supported`);{const{address:e,symbol:t,decimals:n,image:s}=r.asset;yield this.addToken(e,t,n,s),r.status=p.accepted,this.hub.emit(`${r.id}:finished`,r)}}catch(e){this.failSuggestedAsset(r,e)}const s=t.filter((({id:t})=>t!==e));this.update({suggestedAssets:[...s]})}))}rejectWatchAsset(e){const{suggestedAssets:t}=this.state,n=t.findIndex((({id:t})=>e===t)),r=t[n];if(!r)return;r.status=p.rejected,this.hub.emit(`${r.id}:finished`,r);const s=t.filter((({id:t})=>t!==e));this.update({suggestedAssets:[...s]})}removeAndIgnoreToken(e){e=h.toChecksumHexAddress(e);const{tokens:t,ignoredTokens:n}=this.state,r=n.find((t=>t.toLowerCase()===e.toLowerCase())),s=t.filter((t=>t.address.toLowerCase()!==e.toLowerCase()||(!r&&n.push(e),!1))),{newAllTokens:i,newAllIgnoredTokens:o}=this._getNewAllTokensState(s,n);this.update({allTokens:i,tokens:s,allIgnoredTokens:o,ignoredTokens:n})}_getNewAllTokensState(e,t){const{allTokens:n,allIgnoredTokens:r}=this.state,{chainId:s,selectedAddress:i}=this.config,o=n[s],a=r[s],c=Object.assign(Object.assign({},o),{[i]:e}),u=Object.assign(Object.assign({},a),{[i]:t});return{newAllTokens:Object.assign(Object.assign({},n),{[s]:c}),newAllIgnoredTokens:Object.assign(Object.assign({},r),{[s]:u})}}clearIgnoredTokens(){this.update({ignoredTokens:[],allIgnoredTokens:{}})}}n.TokensController=m,n.default=m}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/assets/TokensController.js"}],[1251,{"../BaseControllerV2":1230,"../util":1292,"./determineGasFeeCalculations":1252,"./fetchGasEstimatesViaEthFeeHistory":1254,"./gas-util":1264,"eth-query":2454,"ethereumjs-util":2524,uuid:6012},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.GasFeeController=n.GAS_ESTIMATE_TYPES=n.LEGACY_GAS_PRICES_API_URL=void 0;const i=s(e("eth-query")),o=e("uuid"),a=e("ethereumjs-util"),c=e("../BaseControllerV2"),u=e("../util"),l=e("./gas-util"),d=s(e("./determineGasFeeCalculations")),h=s(e("./fetchGasEstimatesViaEthFeeHistory"));n.LEGACY_GAS_PRICES_API_URL="https://api.metaswap.codefi.network/gasPrices",n.GAS_ESTIMATE_TYPES={FEE_MARKET:"fee-market",LEGACY:"legacy",ETH_GASPRICE:"eth_gasPrice",NONE:"none"};const f={gasFeeEstimates:{persist:!0,anonymous:!1},estimatedGasFeeTimeBounds:{persist:!0,anonymous:!1},gasEstimateType:{persist:!0,anonymous:!1}},p={gasFeeEstimates:{},estimatedGasFeeTimeBounds:{},gasEstimateType:n.GAS_ESTIMATE_TYPES.NONE};class m extends c.BaseController{constructor({interval:e=15e3,messenger:t,state:s,getCurrentNetworkEIP1559Compatibility:o,getCurrentAccountEIP1559Compatibility:a,getChainId:c,getCurrentNetworkLegacyGasAPICompatibility:u,getProvider:l,onNetworkStateChange:d,legacyAPIEndpoint:h=n.LEGACY_GAS_PRICES_API_URL,EIP1559APIEndpoint:m="https://mock-gas-server.herokuapp.com/",clientId:g}){super({name:"GasFeeController",metadata:f,messenger:t,state:Object.assign(Object.assign({},p),s)}),this.intervalDelay=e,this.pollTokens=new Set,this.getCurrentNetworkEIP1559Compatibility=o,this.getCurrentNetworkLegacyGasAPICompatibility=u,this.getCurrentAccountEIP1559Compatibility=a,this.EIP1559APIEndpoint=m,this.legacyAPIEndpoint=h,this.getChainId=c,this.currentChainId=this.getChainId();const y=l();this.ethQuery=new i.default(y),this.clientId=g,d((()=>r(this,void 0,void 0,(function*(){const e=l(),t=this.getChainId();this.ethQuery=new i.default(e),this.currentChainId!==t&&(this.currentChainId=t,yield this.resetPolling())}))))}resetPolling(){return r(this,void 0,void 0,(function*(){if(0!==this.pollTokens.size){const e=Array.from(this.pollTokens);this.stopPolling(),yield this.getGasFeeEstimatesAndStartPolling(e[0]),e.slice(1).forEach((e=>{this.pollTokens.add(e)}))}}))}fetchGasFeeEstimates(e){return r(this,void 0,void 0,(function*(){return yield this._fetchGasFeeEstimateData(e)}))}getGasFeeEstimatesAndStartPolling(e){return r(this,void 0,void 0,(function*(){const t=e||o.v1();return this.pollTokens.add(t),1===this.pollTokens.size&&(yield this._fetchGasFeeEstimateData(),this._poll()),t}))}_fetchGasFeeEstimateData(e={}){return r(this,void 0,void 0,(function*(){const{shouldUpdateState:t=!0}=e;let n;const r=this.getCurrentNetworkLegacyGasAPICompatibility();let s=this.getChainId();"string"==typeof s&&a.isHexString(s)&&(s=parseInt(s,16));try{n=yield this.getEIP1559Compatibility()}catch(e){console.error(e),n=!1}const i=yield d.default({isEIP1559Compatible:n,isLegacyGasAPICompatible:r,fetchGasEstimates:l.fetchGasEstimates,fetchGasEstimatesUrl:this.EIP1559APIEndpoint.replace("<chain_id>",`${s}`),fetchGasEstimatesViaEthFeeHistory:h.default,fetchLegacyGasPriceEstimates:l.fetchLegacyGasPriceEstimates,fetchLegacyGasPriceEstimatesUrl:this.legacyAPIEndpoint.replace("<chain_id>",`${s}`),fetchEthGasPriceEstimate:l.fetchEthGasPriceEstimate,calculateTimeEstimate:l.calculateTimeEstimate,clientId:this.clientId,ethQuery:this.ethQuery});return t&&this.update((e=>{e.gasFeeEstimates=i.gasFeeEstimates,e.estimatedGasFeeTimeBounds=i.estimatedGasFeeTimeBounds,e.gasEstimateType=i.gasEstimateType})),i}))}disconnectPoller(e){this.pollTokens.delete(e),0===this.pollTokens.size&&this.stopPolling()}stopPolling(){this.intervalId&&clearInterval(this.intervalId),this.pollTokens.clear(),this.resetState()}destroy(){super.destroy(),this.stopPolling()}_poll(){this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval((()=>r(this,void 0,void 0,(function*(){yield u.safelyExecute((()=>this._fetchGasFeeEstimateData()))}))),this.intervalDelay)}resetState(){this.update((()=>p))}getEIP1559Compatibility(){var e,t;return r(this,void 0,void 0,(function*(){const n=yield this.getCurrentNetworkEIP1559Compatibility(),r=null===(t=null===(e=this.getCurrentAccountEIP1559Compatibility)||void 0===e?void 0:e.call(this))||void 0===t||t;return n&&r}))}getTimeEstimate(e,t){return this.state.gasFeeEstimates&&this.state.gasEstimateType===n.GAS_ESTIMATE_TYPES.FEE_MARKET?l.calculateTimeEstimate(e,t,this.state.gasFeeEstimates):{}}}n.GasFeeController=m,n.default=m}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/gas/GasFeeController.js"}],[1279,{"./Caveat":1273,"./Permission":1274,"./PermissionController":1275,"./endowments":1276,"./rpc-methods":1282,"./utils":1284},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t};Object.defineProperty(n,"__esModule",{value:!0}),n.endowmentPermissionBuilders=n.permissionRpcMethods=void 0,i(e("./Caveat"),n),i(e("./Permission"),n),i(e("./PermissionController"),n),i(e("./utils"),n),n.permissionRpcMethods=o(e("./rpc-methods"));var a=e("./endowments");Object.defineProperty(n,"endowmentPermissionBuilders",{enumerable:!0,get:function(){return a.endowmentPermissionBuilders}})}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/permissions/index.js"}],[1288,{"../BaseController":1229,"../util":1292,"eth-phishing-detect/src/config.json":2452,"eth-phishing-detect/src/detector":2453,"punycode/":5523},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.PhishingController=void 0;const i=e("punycode/"),o=s(e("eth-phishing-detect/src/config.json")),a=s(e("eth-phishing-detect/src/detector")),c=e("../BaseController"),u=e("../util");class l extends c.BaseController{constructor(e,t){super(e,t),this.configUrl="https://cdn.jsdelivr.net/gh/MetaMask/eth-phishing-detect@master/src/config.json",this.name="PhishingController",this.defaultConfig={interval:36e5},this.defaultState={phishing:o.default,whitelist:[]},this.detector=new a.default(this.defaultState.phishing),this.initialize(),this.poll()}poll(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.handle&&clearTimeout(this.handle),yield u.safelyExecute((()=>this.updatePhishingLists())),this.handle=setTimeout((()=>{this.poll(this.config.interval)}),this.config.interval)}))}test(e){const t=i.toASCII(e);return-1===this.state.whitelist.indexOf(t)&&this.detector.check(t).result}bypass(e){const t=i.toASCII(e),{whitelist:n}=this.state;-1===n.indexOf(t)&&this.update({whitelist:[...n,t]})}updatePhishingLists(){return r(this,void 0,void 0,(function*(){if(this.disabled)return;const e=yield this.queryConfig(this.configUrl);e&&(this.detector=new a.default(e),this.update({phishing:e}))}))}queryConfig(e){return r(this,void 0,void 0,(function*(){const t=yield fetch(e,{cache:"no-cache"});switch(t.status){case 200:return yield t.json();case 304:case 403:return null;default:throw new Error(`Fetch failed with status '${t.status}' for request '${e}'`)}}))}}n.PhishingController=l,n.default=l}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/third-party/PhishingController.js"}],[1271,{"../BaseController":1229,"../constants":1250,"async-mutex":1730,"eth-json-rpc-infura/src/createProvider":2402,"eth-query":2454,"web3-provider-engine/subproviders/provider":6093,"web3-provider-engine/zero":6103},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.NetworkController=n.NetworksChainId=void 0;const o=i(e("eth-query")),a=i(e("web3-provider-engine/subproviders/provider")),c=i(e("eth-json-rpc-infura/src/createProvider")),u=i(e("web3-provider-engine/zero")),l=e("async-mutex"),d=e("../BaseController"),h=e("../constants");var f;!function(e){e.mainnet="1",e.kovan="42",e.rinkeby="4",e.goerli="5",e.ropsten="3",e.localhost="",e.rpc="",e.optimism="10",e.optimismTest="69"}(f=n.NetworksChainId||(n.NetworksChainId={}));class p extends d.BaseController{constructor(e,t){super(e,t),this.internalProviderConfig={},this.mutex=new l.Mutex,this.name="NetworkController",this.defaultState={network:"loading",isCustomNetwork:!1,provider:{type:h.MAINNET,chainId:f.mainnet},properties:{isEIP1559Compatible:!1}},this.initialize(),this.getEIP1559Compatibility()}initializeProvider(e,t,n,r,s){switch(this.update({isCustomNetwork:this.getIsCustomNetwork(n)}),e){case"kovan":case h.MAINNET:case"rinkeby":case"goerli":case"optimism":case"optimismTest":case"ropsten":this.setupInfuraProvider(e);break;case"localhost":this.setupStandardProvider("http://localhost:8545");break;case h.RPC:t&&this.setupStandardProvider(t,n,r,s);break;default:throw new Error(`Unrecognized network type: '${e}'`)}}refreshNetwork(){this.update({network:"loading",properties:{}});const{rpcTarget:e,type:t,chainId:n,ticker:r}=this.state.provider;this.initializeProvider(t,e,n,r),this.lookupNetwork()}registerProvider(){this.provider.on("error",this.verifyNetwork.bind(this)),this.ethQuery=new o.default(this.provider)}setupInfuraProvider(e){const t=c.default({network:e,projectId:this.config.infuraProjectId}),n=new a.default(t),r=Object.assign(Object.assign({},this.internalProviderConfig),{dataSubprovider:n,engineParams:{blockTrackerProvider:t,pollingInterval:12e3}});this.updateProvider(u.default(r))}getIsCustomNetwork(e){return e!==f.mainnet&&e!==f.kovan&&e!==f.rinkeby&&e!==f.goerli&&e!==f.ropsten&&e!==f.localhost}setupStandardProvider(e,t,n,r){const s=Object.assign(Object.assign({},this.internalProviderConfig),{chainId:t,engineParams:{pollingInterval:12e3},nickname:r,rpcUrl:e,ticker:n});this.updateProvider(u.default(s))}updateProvider(e){this.safelyStopProvider(this.provider),this.provider=e,this.registerProvider()}safelyStopProvider(e){setTimeout((()=>{null==e||e.stop()}),500)}verifyNetwork(){"loading"===this.state.network&&this.lookupNetwork()}set providerConfig(e){this.internalProviderConfig=e;const{type:t,rpcTarget:n,chainId:r,ticker:s,nickname:i}=this.state.provider;this.initializeProvider(t,n,r,s,i),this.registerProvider(),this.lookupNetwork()}get providerConfig(){throw new Error("Property only used for setting")}lookupNetwork(){return r(this,void 0,void 0,(function*(){if(!this.ethQuery||!this.ethQuery.sendAsync)return;const e=yield this.mutex.acquire();this.ethQuery.sendAsync({method:"net_version"},((t,n)=>{this.update({network:t?"loading":n}),e()}))}))}setProviderType(e){const t=this.state.provider,{rpcTarget:n,chainId:r,nickname:i}=t,o=s(t,["rpcTarget","chainId","nickname"]);this.update({provider:Object.assign(Object.assign({},o),{type:e,ticker:"ETH",chainId:f[e]})}),this.refreshNetwork()}setRpcTarget(e,t,n,r){this.update({provider:Object.assign(Object.assign({},this.state.provider),{type:h.RPC,ticker:n,rpcTarget:e,chainId:t,nickname:r})}),this.refreshNetwork()}getEIP1559Compatibility(){var e;const{properties:t={}}=this.state;return t.isEIP1559Compatible||"function"!=typeof(null===(e=this.ethQuery)||void 0===e?void 0:e.sendAsync)?Promise.resolve(!0):new Promise(((e,n)=>{this.ethQuery.sendAsync({method:"eth_getBlockByNumber",params:["latest",!1]},((r,s)=>{if(r)n(r);else{const n=void 0!==s.baseFeePerGas;t.isEIP1559Compatible!==n&&this.update({properties:{isEIP1559Compatible:n}}),e(n)}}))}))}}n.NetworkController=p,n.default=p}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/network/NetworkController.js"}],[1266,{"../BaseController":1229,"../util":1292,"async-mutex":1730,"eth-keyring-controller":2445,"eth-sig-util":2460,"ethereumjs-util":2524,"ethereumjs-wallet":1298},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return s(t,e),t},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.KeyringController=n.SignTypedDataVersion=n.AccountImportStrategy=n.KeyringTypes=void 0;const c=e("ethereumjs-util"),u=e("eth-sig-util"),l=i(e("ethereumjs-wallet")),d=a(e("eth-keyring-controller")),h=e("async-mutex"),f=e("../BaseController"),p=e("../util"),m=new WeakMap;var g,y;!function(e){e.simple="Simple Key Pair",e.hd="HD Key Tree"}(g=n.KeyringTypes||(n.KeyringTypes={})),function(e){e.privateKey="privateKey",e.json="json"}(n.AccountImportStrategy||(n.AccountImportStrategy={})),function(e){e.V1="V1",e.V3="V3",e.V4="V4"}(y=n.SignTypedDataVersion||(n.SignTypedDataVersion={}));class _ extends f.BaseController{constructor({removeIdentity:e,syncIdentities:t,updateIdentities:n,setSelectedAddress:r},s,i){super(s,i),this.mutex=new h.Mutex,this.name="KeyringController",m.set(this,{keyring:new d.default(Object.assign({initState:i},s))}),this.defaultState=Object.assign(Object.assign({},m.get(this).keyring.store.getState()),{keyrings:[]}),this.removeIdentity=e,this.syncIdentities=t,this.updateIdentities=n,this.setSelectedAddress=r,this.initialize(),this.fullUpdate()}addNewAccount(){return o(this,void 0,void 0,(function*(){const e=m.get(this).keyring.getKeyringsByType("HD Key Tree")[0];if(!e)throw new Error("No HD keyring found");const t=yield m.get(this).keyring.getAccounts();yield m.get(this).keyring.addNewAccount(e);const n=yield m.get(this).keyring.getAccounts();return yield this.verifySeedPhrase(),this.updateIdentities(n),n.forEach((e=>{t.includes(e)||this.setSelectedAddress(e)})),this.fullUpdate()}))}addNewAccountWithoutUpdate(){return o(this,void 0,void 0,(function*(){const e=m.get(this).keyring.getKeyringsByType("HD Key Tree")[0];if(!e)throw new Error("No HD keyring found");return yield m.get(this).keyring.addNewAccount(e),yield this.verifySeedPhrase(),this.fullUpdate()}))}createNewVaultAndRestore(e,t){return o(this,void 0,void 0,(function*(){const n=yield this.mutex.acquire();try{this.updateIdentities([]);const r=yield m.get(this).keyring.createNewVaultAndRestore(e,t);return this.updateIdentities(yield m.get(this).keyring.getAccounts()),this.fullUpdate(),r}finally{n()}}))}createNewVaultAndKeychain(e){return o(this,void 0,void 0,(function*(){const t=yield this.mutex.acquire();try{const n=yield m.get(this).keyring.createNewVaultAndKeychain(e);return this.updateIdentities(yield m.get(this).keyring.getAccounts()),this.fullUpdate(),n}finally{t()}}))}isUnlocked(){return m.get(this).keyring.memStore.getState().isUnlocked}exportSeedPhrase(e){if(m.get(this).keyring.password===e)return m.get(this).keyring.keyrings[0].mnemonic;throw new Error("Invalid password")}exportAccount(e,t){if(m.get(this).keyring.password===e)return m.get(this).keyring.exportAccount(t);throw new Error("Invalid password")}getAccounts(){return m.get(this).keyring.getAccounts()}importAccountWithStrategy(e,t){return o(this,void 0,void 0,(function*(){let n;switch(e){case"privateKey":const[r]=t;if(!r)throw new Error("Cannot import an empty key.");const s=c.addHexPrefix(r);if(!c.isValidPrivate(c.toBuffer(s)))throw new Error("Cannot import invalid private key.");n=c.stripHexPrefix(s);break;case"json":let i;const[o,a]=t;try{i=l.thirdparty.fromEtherWallet(o,a)}catch(e){i=i||(yield l.default.fromV3(o,a,!0))}n=c.bufferToHex(i.getPrivateKey());break;default:throw new Error(`Unexpected import strategy: '${e}'`)}const r=yield m.get(this).keyring.addNewKeyring(g.simple,[n]),s=yield r.getAccounts(),i=yield m.get(this).keyring.getAccounts();return this.updateIdentities(i),this.setSelectedAddress(s[0]),this.fullUpdate()}))}removeAccount(e){return o(this,void 0,void 0,(function*(){return this.removeIdentity(e),yield m.get(this).keyring.removeAccount(e),this.fullUpdate()}))}setLocked(){return m.get(this).keyring.setLocked()}signMessage(e){return m.get(this).keyring.signMessage(e)}signPersonalMessage(e){return m.get(this).keyring.signPersonalMessage(e)}signTypedMessage(e,t){return o(this,void 0,void 0,(function*(){try{const n=u.normalize(e.from),{password:r}=m.get(this).keyring,s=yield this.exportAccount(r,n),i=c.toBuffer(c.addHexPrefix(s));switch(t){case y.V1:return u.signTypedDataLegacy(i,{data:e.data});case y.V3:return u.signTypedData(i,{data:JSON.parse(e.data)});case y.V4:return u.signTypedData_v4(i,{data:JSON.parse(e.data)});default:throw new Error(`Unexpected signTypedMessage version: '${t}'`)}}catch(e){throw new Error(`Keyring Controller signTypedMessage: ${e}`)}}))}signTransaction(e,t){return m.get(this).keyring.signTransaction(e,t)}submitPassword(e){return o(this,void 0,void 0,(function*(){yield m.get(this).keyring.submitPassword(e);const t=yield m.get(this).keyring.getAccounts();return yield this.syncIdentities(t),this.fullUpdate()}))}subscribe(e){m.get(this).keyring.store.subscribe(e)}unsubscribe(e){return m.get(this).keyring.store.unsubscribe(e)}onLock(e){return m.get(this).keyring.on("lock",e)}onUnlock(e){return m.get(this).keyring.on("unlock",e)}verifySeedPhrase(){return o(this,void 0,void 0,(function*(){const e=m.get(this).keyring.getKeyringsByType(g.hd)[0];if(!e)throw new Error("No HD keyring found.");const t=(yield e.serialize()).mnemonic,n=yield e.getAccounts();if(0===n.length)throw new Error("Cannot verify an empty keyring.");const r=new(m.get(this).keyring.getKeyringClassForType(g.hd))({mnemonic:t,numberOfAccounts:n.length}),s=yield r.getAccounts();if(s.length!==n.length)throw new Error("Seed phrase imported incorrect number of accounts.");return s.forEach(((e,t)=>{if(e.toLowerCase()!==n[t].toLowerCase())throw new Error("Seed phrase imported different accounts.")})),t}))}fullUpdate(){return o(this,void 0,void 0,(function*(){const e=yield Promise.all(m.get(this).keyring.keyrings.map(((e,t)=>o(this,void 0,void 0,(function*(){const n=yield e.getAccounts();return{accounts:Array.isArray(n)?n.map((e=>p.toChecksumHexAddress(e))):[],index:t,type:e.type}})))));return this.update({keyrings:[...e]}),m.get(this).keyring.fullUpdate()}))}}n.KeyringController=_,n.default=_}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/keyring/KeyringController.js"}],[1237,{"../BaseController":1229,"../constants":1250,"./Standards/CollectibleStandards/ERC1155/ERC1155Standard":1241,"./Standards/CollectibleStandards/ERC721/ERC721Standard":1242,"./Standards/ERC20Standard":1243,"single-call-balance-checker-abi":5839,web3:6111},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.AssetsContractController=void 0;const i=s(e("web3")),o=s(e("single-call-balance-checker-abi")),a=e("../BaseController"),c=e("../constants"),u=e("./Standards/CollectibleStandards/ERC721/ERC721Standard"),l=e("./Standards/CollectibleStandards/ERC1155/ERC1155Standard"),d=e("./Standards/ERC20Standard"),h="AssetsContractController failed to set the provider correctly. A provider must be set for this method to be available";class f extends a.BaseController{constructor({onPreferencesStateChange:e},t,n){super(t,n),this.name="AssetsContractController",this.defaultConfig={provider:undefined,ipfsGateway:c.IPFS_DEFAULT_GATEWAY_URL},this.initialize(),e((({ipfsGateway:e})=>{this.configure({ipfsGateway:e})}))}set provider(e){this.web3=new i.default(e),this.erc721Standard=new u.ERC721Standard(this.web3),this.erc1155Standard=new l.ERC1155Standard(this.web3),this.erc20Standard=new d.ERC20Standard(this.web3)}get provider(){throw new Error("Property only used for setting")}getERC20BalanceOf(e,t){return r(this,void 0,void 0,(function*(){if(!this.erc20Standard)throw new Error(h);return this.erc20Standard.getBalanceOf(e,t)}))}getERC20TokenDecimals(e){return r(this,void 0,void 0,(function*(){if(this.erc20Standard===undefined)throw new Error(h);return yield this.erc20Standard.getTokenDecimals(e)}))}getERC721CollectibleTokenId(e,t,n){if(this.erc721Standard===undefined)throw new Error(h);return this.erc721Standard.getCollectibleTokenId(e,t,n)}getTokenStandardAndDetails(e,t,n){return r(this,void 0,void 0,(function*(){if(this.erc721Standard===undefined||this.erc1155Standard===undefined||this.erc20Standard===undefined)throw new Error(h);const{ipfsGateway:r}=this.config;try{return Object.assign({},yield this.erc721Standard.getDetails(e,r,n))}catch(e){}try{return Object.assign({},yield this.erc1155Standard.getDetails(e,r,n))}catch(e){}try{return Object.assign({},yield this.erc20Standard.getDetails(e,t))}catch(e){}throw new Error("Unable to determine contract standard")}))}getERC721TokenURI(e,t){return r(this,void 0,void 0,(function*(){if(this.erc721Standard===undefined)throw new Error(h);return this.erc721Standard.getTokenURI(e,t)}))}getERC721AssetName(e){return r(this,void 0,void 0,(function*(){if(this.erc721Standard===undefined)throw new Error(h);return this.erc721Standard.getAssetName(e)}))}getERC721AssetSymbol(e){return r(this,void 0,void 0,(function*(){if(this.erc721Standard===undefined)throw new Error(h);return this.erc721Standard.getAssetSymbol(e)}))}getERC721OwnerOf(e,t){return r(this,void 0,void 0,(function*(){if(this.erc721Standard===undefined)throw new Error(h);return this.erc721Standard.getOwnerOf(e,t)}))}getERC1155TokenURI(e,t){return r(this,void 0,void 0,(function*(){if(this.erc1155Standard===undefined)throw new Error(h);return this.erc1155Standard.getTokenURI(e,t)}))}getERC1155BalanceOf(e,t,n){return r(this,void 0,void 0,(function*(){if(this.erc1155Standard===undefined)throw new Error(h);return yield this.erc1155Standard.getBalanceOf(t,e,n)}))}transferSingleERC1155(e,t,n,s,i){return r(this,void 0,void 0,(function*(){if(this.erc1155Standard===undefined)throw new Error(h);return yield this.erc1155Standard.transferSingle(e,t,n,s,i)}))}getBalancesInSingleCall(e,t){return r(this,void 0,void 0,(function*(){const n=this.web3.eth.contract(o.default).at("0xb1f8e55c7f64d203c1400b9d8555d050f94adf39");return new Promise(((r,s)=>{n.balances([e],t,((e,n)=>{if(e)return void s(e);const i={};n.length>0&&t.forEach(((e,t)=>{const r=n[t];r.isZero()||(i[e]=r)})),r(i)}))}))}))}}n.AssetsContractController=f,n.default=f}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/assets/AssetsContractController.js"}],[1289,{"../BaseController":1229,"../constants":1250,"../util":1292,"@ethereumjs/common":402,"@ethereumjs/tx":406,"async-mutex":1730,"eth-method-registry":1295,"eth-query":2454,"eth-rpc-errors":2458,"ethereumjs-util":2524,events:2085,uuid:6012},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionController=n.SPEED_UP_RATE=n.CANCEL_RATE=n.WalletDevice=n.TransactionStatus=void 0;const i=e("events"),o=e("ethereumjs-util"),a=e("eth-rpc-errors"),c=s(e("eth-method-registry")),u=s(e("eth-query")),l=s(e("@ethereumjs/common")),d=e("@ethereumjs/tx"),h=e("uuid"),f=e("async-mutex"),p=e("../BaseController"),m=e("../util"),g=e("../constants"),y="london";var _;!function(e){e.approved="approved",e.cancelled="cancelled",e.confirmed="confirmed",e.failed="failed",e.rejected="rejected",e.signed="signed",e.submitted="submitted",e.unapproved="unapproved"}(_=n.TransactionStatus||(n.TransactionStatus={})),function(e){e.MM_MOBILE="metamask_mobile",e.MM_EXTENSION="metamask_extension",e.OTHER="other_device"}(n.WalletDevice||(n.WalletDevice={})),n.CANCEL_RATE=1.5,n.SPEED_UP_RATE=1.1;class b extends p.BaseController{constructor({getNetworkState:e,onNetworkStateChange:t,getProvider:n},r,s){super(r,s),this.mutex=new f.Mutex,this.normalizeTokenTx=(e,t,n)=>{const r=1e3*parseInt(e.timeStamp,10),{to:s,from:i,gas:o,gasPrice:a,gasUsed:c,hash:u,contractAddress:l,tokenDecimal:d,tokenSymbol:f,value:p}=e;return{id:h.v1({msecs:r}),isTransfer:!0,networkID:t,chainId:n,status:_.confirmed,time:r,transaction:{chainId:1,from:i,gas:o,gasPrice:a,gasUsed:c,to:s,value:p},transactionHash:u,transferInformation:{contractAddress:l,decimals:Number(d),symbol:f},verifiedOnBlockchain:!1}},this.hub=new i.EventEmitter,this.name="TransactionController",this.defaultConfig={interval:15e3,txHistoryLimit:40},this.defaultState={methodData:{},transactions:[]},this.initialize();const o=n();this.getNetworkState=e,this.ethQuery=new u.default(o),this.registry=new c.default({provider:o}),t((()=>{const e=n();this.ethQuery=new u.default(e),this.registry=new c.default({provider:e})})),this.poll()}failTransaction(e,t){const n=Object.assign(Object.assign({},e),{error:t,status:_.failed});this.updateTransaction(n),this.hub.emit(`${e.id}:finished`,n)}registryLookup(e){return r(this,void 0,void 0,(function*(){const t=yield this.registry.lookup(e);return{registryMethod:t,parsedRegistryMethod:this.registry.parse(t)}}))}normalizeTx(e,t,n){const r=1e3*parseInt(e.timeStamp,10),s={blockNumber:e.blockNumber,id:h.v1({msecs:r}),networkID:t,chainId:n,time:r,transaction:{data:e.input,from:e.from,gas:m.BNToHex(new o.BN(e.gas)),gasPrice:m.BNToHex(new o.BN(e.gasPrice)),gasUsed:m.BNToHex(new o.BN(e.gasUsed)),nonce:m.BNToHex(new o.BN(e.nonce)),to:e.to,value:m.BNToHex(new o.BN(e.value))},transactionHash:e.hash,verifiedOnBlockchain:!1};return"0"===e.isError?Object.assign(Object.assign({},s),{status:_.confirmed}):Object.assign(Object.assign({},s),{error:new Error("Transaction failed"),status:_.failed})}poll(e){return r(this,void 0,void 0,(function*(){e&&this.configure({interval:e},!1,!1),this.handle&&clearTimeout(this.handle),yield m.safelyExecute((()=>this.queryTransactionStatuses())),this.handle=setTimeout((()=>{this.poll(this.config.interval)}),this.config.interval)}))}handleMethodData(e){return r(this,void 0,void 0,(function*(){const t=yield this.mutex.acquire();try{const{methodData:n}=this.state;if(Object.keys(n).find((t=>e===t)))return n[e];const r=yield this.registryLookup(e);return this.update({methodData:Object.assign(Object.assign({},n),{[e]:r})}),r}finally{t()}}))}addTransaction(e,t,n){return r(this,void 0,void 0,(function*(){const{provider:r,network:s}=this.getNetworkState(),{transactions:i}=this.state;e=m.normalizeTransaction(e),m.validateTransaction(e);const o={id:h.v1(),networkID:s,chainId:r.chainId,origin:t,status:_.unapproved,time:Date.now(),transaction:e,deviceConfirmedOn:n,verifiedOnBlockchain:!1};try{const{gas:t}=yield this.estimateGas(e);e.gas=t}catch(e){return this.failTransaction(o,e),Promise.reject(e)}const c=new Promise(((e,t)=>{this.hub.once(`${o.id}:finished`,(n=>{switch(n.status){case _.submitted:return e(n.transactionHash);case _.rejected:return t(a.ethErrors.provider.userRejectedRequest("User rejected the transaction"));case _.cancelled:return t(a.ethErrors.rpc.internal("User cancelled the transaction"));case _.failed:return t(a.ethErrors.rpc.internal(n.error.message));default:return t(a.ethErrors.rpc.internal(`MetaMask Tx Signature: Unknown problem: ${JSON.stringify(n)}`))}}))}));return i.push(o),this.update({transactions:this.trimTransactionsForState(i)}),this.hub.emit("unapprovedTransaction",o),{result:c,transactionMeta:o}}))}prepareUnsignedEthTx(e){return d.TransactionFactory.fromTxData(e,{common:this.getCommonConfiguration(),freeze:!1})}getCommonConfiguration(){const{network:e,provider:{type:t,chainId:n,nickname:r}}=this.getNetworkState();if(t!==g.RPC)return new l.default({chain:t,hardfork:y});const s={name:r,chainId:parseInt(n,undefined),networkId:parseInt(e,undefined)};return l.default.forCustomChain(g.MAINNET,s,y)}approveTransaction(e){return r(this,void 0,void 0,(function*(){const{transactions:t}=this.state,n=yield this.mutex.acquire(),{provider:r}=this.getNetworkState(),{chainId:s}=r,i=t.findIndex((({id:t})=>e===t)),a=t[i],{nonce:c}=a.transaction;try{const{from:e}=a.transaction;if(!this.sign)return n(),void this.failTransaction(a,new Error("No sign method defined."));if(!s)return n(),void this.failTransaction(a,new Error("No chainId defined."));const t=parseInt(s,undefined),{approved:r}=_,i=c||(yield m.query(this.ethQuery,"getTransactionCount",[e,"pending"]));a.status=r,a.transaction.nonce=i,a.transaction.chainId=t;const u=Object.assign(Object.assign({},a.transaction),{gasLimit:a.transaction.gas,chainId:t,nonce:i,status:r}),l=m.isEIP1559Transaction(a.transaction),d=l?Object.assign(Object.assign({},u),{maxFeePerGas:a.transaction.maxFeePerGas,maxPriorityFeePerGas:a.transaction.maxPriorityFeePerGas,estimatedBaseFee:a.transaction.estimatedBaseFee,type:2}):u;l&&delete d.gasPrice;const h=this.prepareUnsignedEthTx(d),f=yield this.sign(h,e);a.status=_.signed,this.updateTransaction(a);const p=o.bufferToHex(f.serialize());a.rawTransaction=p,this.updateTransaction(a);const g=yield m.query(this.ethQuery,"sendRawTransaction",[p]);a.transactionHash=g,a.status=_.submitted,this.updateTransaction(a),this.hub.emit(`${a.id}:finished`,a)}catch(e){this.failTransaction(a,e)}finally{n()}}))}cancelTransaction(e){const t=this.state.transactions.find((({id:t})=>t===e));if(!t)return;t.status=_.rejected,this.hub.emit(`${t.id}:finished`,t);const n=this.state.transactions.filter((({id:t})=>t!==e));this.update({transactions:this.trimTransactionsForState(n)})}stopTransaction(e,t){var s,i;return r(this,void 0,void 0,(function*(){t&&m.validateGasValues(t);const r=this.state.transactions.find((({id:t})=>t===e));if(!r)return;if(!this.sign)throw new Error("No sign method defined.");const a=m.getIncreasedPriceFromExisting(r.transaction.gasPrice,n.CANCEL_RATE),c=m.isGasPriceValue(t)&&t.gasPrice,u=c&&m.validateMinimumIncrease(c,a)||a,l=null===(s=r.transaction)||void 0===s?void 0:s.maxFeePerGas,d=m.getIncreasedPriceFromExisting(l,n.CANCEL_RATE),h=m.isFeeMarketEIP1559Values(t)&&t.maxFeePerGas,f=h&&m.validateMinimumIncrease(h,d)||l&&d,p=null===(i=r.transaction)||void 0===i?void 0:i.maxPriorityFeePerGas,g=m.getIncreasedPriceFromExisting(p,n.CANCEL_RATE),y=m.isFeeMarketEIP1559Values(t)&&t.maxPriorityFeePerGas,b=y&&m.validateMinimumIncrease(y,g)||p&&g,v=f&&b?{from:r.transaction.from,gasLimit:r.transaction.gas,maxFeePerGas:f,maxPriorityFeePerGas:b,type:2,nonce:r.transaction.nonce,to:r.transaction.from,value:"0x0"}:{from:r.transaction.from,gasLimit:r.transaction.gas,gasPrice:u,nonce:r.transaction.nonce,to:r.transaction.from,value:"0x0"},w=this.prepareUnsignedEthTx(v),k=yield this.sign(w,r.transaction.from),E=o.bufferToHex(k.serialize());yield m.query(this.ethQuery,"sendRawTransaction",[E]),r.status=_.cancelled,this.hub.emit(`${r.id}:finished`,r)}))}speedUpTransaction(e,t){var s,i;return r(this,void 0,void 0,(function*(){t&&m.validateGasValues(t);const r=this.state.transactions.find((({id:t})=>t===e));if(!r)return;if(!this.sign)throw new Error("No sign method defined.");const{transactions:a}=this.state,c=m.getIncreasedPriceFromExisting(r.transaction.gasPrice,n.SPEED_UP_RATE),u=m.isGasPriceValue(t)&&t.gasPrice,l=u&&m.validateMinimumIncrease(u,c)||c,d=null===(s=r.transaction)||void 0===s?void 0:s.maxFeePerGas,f=m.getIncreasedPriceFromExisting(d,n.SPEED_UP_RATE),p=m.isFeeMarketEIP1559Values(t)&&t.maxFeePerGas,g=p&&m.validateMinimumIncrease(p,f)||d&&f,y=null===(i=r.transaction)||void 0===i?void 0:i.maxPriorityFeePerGas,_=m.getIncreasedPriceFromExisting(y,n.SPEED_UP_RATE),b=m.isFeeMarketEIP1559Values(t)&&t.maxPriorityFeePerGas,v=b&&m.validateMinimumIncrease(b,_)||y&&_,w=g&&v?Object.assign(Object.assign({},r.transaction),{gasLimit:r.transaction.gas,maxFeePerGas:g,maxPriorityFeePerGas:v,type:2}):Object.assign(Object.assign({},r.transaction),{gasLimit:r.transaction.gas,gasPrice:l}),k=this.prepareUnsignedEthTx(w),E=yield this.sign(k,r.transaction.from),S=o.bufferToHex(E.serialize()),x=yield m.query(this.ethQuery,"sendRawTransaction",[S]),C=Object.assign(Object.assign({},r),{id:h.v1(),time:Date.now(),transactionHash:x}),A=g&&v?Object.assign(Object.assign({},C),{transaction:Object.assign(Object.assign({},r.transaction),{maxFeePerGas:g,maxPriorityFeePerGas:v})}):Object.assign(Object.assign({},C),{transaction:Object.assign(Object.assign({},r.transaction),{gasPrice:l})});a.push(A),this.update({transactions:this.trimTransactionsForState(a)}),this.hub.emit(`${r.id}:speedup`,A)}))}estimateGas(e){return r(this,void 0,void 0,(function*(){const t=Object.assign({},e),{gas:n,gasPrice:r,to:s,value:i,data:a}=t,c=void 0===r?yield m.query(this.ethQuery,"gasPrice"):r,{isCustomNetwork:u}=this.getNetworkState();if(void 0!==n)return{gas:n,gasPrice:c};const{gasLimit:l}=yield m.query(this.ethQuery,"getBlockByNumber",["latest",!1]),d=s?yield m.query(this.ethQuery,"getCode",[s]):undefined;if(!u&&(!s||s&&!a&&(!d||"0x"===d)))return{gas:"0x5208",gasPrice:c};t.data=a?o.addHexPrefix(a):a,t.value=void 0===i?"0x0":i;const h=m.hexToBN(l);t.gas=m.BNToHex(m.fractionBN(h,19,20));const f=yield m.query(this.ethQuery,"estimateGas",[t]),p=m.hexToBN(f),g=h.muln(.9),y=p.muln(1.5);return p.gt(g)||u?{gas:o.addHexPrefix(f),gasPrice:c}:y.lt(g)?{gas:o.addHexPrefix(m.BNToHex(y)),gasPrice:c}:{gas:o.addHexPrefix(m.BNToHex(g)),gasPrice:c}}))}queryTransactionStatuses(){return r(this,void 0,void 0,(function*(){const{transactions:e}=this.state,{provider:t,network:n}=this.getNetworkState(),{chainId:s}=t;let i=!1;yield m.safelyExecute((()=>Promise.all(e.map(((t,o)=>r(this,void 0,void 0,(function*(){const r=t.chainId===s||!t.chainId&&t.networkID===n;if(!t.verifiedOnBlockchain&&r){const[n,r]=yield this.blockchainTransactionStateReconciler(t);r&&(e[o]=n,i=r)}}))))))),i&&this.update({transactions:this.trimTransactionsForState(e)})}))}updateTransaction(e){const{transactions:t}=this.state;e.transaction=m.normalizeTransaction(e.transaction),m.validateTransaction(e.transaction);const n=t.findIndex((({id:t})=>e.id===t));t[n]=e,this.update({transactions:this.trimTransactionsForState(t)})}wipeTransactions(e){if(e)return void this.update({transactions:[]});const{provider:t,network:n}=this.getNetworkState(),{chainId:r}=t,s=this.state.transactions.filter((({networkID:e,chainId:t})=>!(t===r||!t&&e===n)));this.update({transactions:this.trimTransactionsForState(s)})}fetchAll(e,t){return r(this,void 0,void 0,(function*(){const{provider:n,network:s}=this.getNetworkState(),{chainId:i,type:o}=n,{transactions:a}=this.state;if(-1===["1","3","4","42"].indexOf(s))return undefined;const[c,u]=yield m.handleTransactionFetch(o,e,this.config.txHistoryLimit,t),l=c.result.map((e=>this.normalizeTx(e,s,i))),d=u.result.map((e=>this.normalizeTokenTx(e,s,i))),[h,f]=this.etherscanTransactionStateReconciler([...l,...d],a);let p;return f.sort(((e,t)=>e.time<t.time?-1:1)),f.forEach((t=>r(this,void 0,void 0,(function*(){if((t.chainId===i||!t.chainId&&t.networkID===s)&&t.transaction.to&&t.transaction.to.toLowerCase()===e.toLowerCase()&&t.blockNumber&&(!p||parseInt(p,10)<parseInt(t.blockNumber,10))&&(p=t.blockNumber),t.toSmartContract===undefined)if(!t.transaction.to||t.transaction.data&&"0x"===t.transaction.data)t.toSmartContract=!1;else{const e=yield m.query(this.ethQuery,"getCode",[t.transaction.to]);t.toSmartContract=m.isSmartContractCode(e)}})))),h&&this.update({transactions:this.trimTransactionsForState(f)}),p}))}trimTransactionsForState(e){const t=new Set,n=e.reverse().filter((e=>{const{chainId:n,networkID:r,status:s,transaction:i,time:o}=e;if(i){const e=`${i.nonce}-${null!=n?n:r}-${new Date(o).toDateString()}`;if(t.has(e))return!0;if(t.size<this.config.txHistoryLimit||!this.isFinalState(s))return t.add(e),!0}return!1}));return n.reverse(),n}isFinalState(e){return e===_.rejected||e===_.confirmed||e===_.failed||e===_.cancelled}blockchainTransactionStateReconciler(e){return r(this,void 0,void 0,(function*(){const{status:t,transactionHash:n}=e;switch(t){case _.confirmed:const t=yield m.query(this.ethQuery,"getTransactionReceipt",[n]);if(!t)return[e,!1];if(e.verifiedOnBlockchain=!0,e.transaction.gasUsed=t.gasUsed,0===Number(t.status)){const t=new Error("Transaction failed. The transaction was reversed");return this.failTransaction(e,t),[e,!1]}return[e,!0];case _.submitted:const r=yield m.query(this.ethQuery,"getTransactionByHash",[n]);if(!r){if(yield this.checkTxReceiptStatusIsFailed(n)){const t=new Error("Transaction failed. The transaction was dropped or replaced by a new one");this.failTransaction(e,t)}}return(null==r?void 0:r.blockNumber)?(e.status=_.confirmed,this.hub.emit(`${e.id}:confirmed`,e),[e,!0]):[e,!1];default:return[e,!1]}}))}checkTxReceiptStatusIsFailed(e){return r(this,void 0,void 0,(function*(){const t=yield m.query(this.ethQuery,"getTransactionReceipt",[e]);return!!t&&0===Number(t.status)}))}etherscanTransactionStateReconciler(e,t){const n=this.getUpdatedTransactions(e,t),r=this.getNewTransactions(e,t),s=t.map((e=>{const t=n.findIndex((({transactionHash:t})=>t===e.transactionHash));return-1===t?e:n[t]}));return[r.length>0||s.length>0,[...r,...s]]}getNewTransactions(e,t){return e.filter((e=>!t.find((({transactionHash:t})=>t===e.transactionHash))))}getUpdatedTransactions(e,t){return e.filter((e=>t.find((t=>e.transactionHash===t.transactionHash&&this.isTransactionOutdated(e,t)))))}isTransactionOutdated(e,t){const n=this.isStatusOutdated(e.transactionHash,t.transactionHash,e.status,t.status),r=this.isGasDataOutdated(e.transaction.gasUsed,t.transaction.gasUsed);return n||r}isStatusOutdated(e,t,n,r){return e===t&&n!==r}isGasDataOutdated(e,t){return e!==t}}n.TransactionController=b,n.default=b}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/transaction/TransactionController.js"}],[1343,{"fast-deep-equal":4296},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.assertExhaustive=n.setDiff=n.isValidJson=n.isNonEmptyArray=n.hasProperty=n.isPlainObject=n.timeSince=void 0;const s=r(e("fast-deep-equal"));n.timeSince=function(e){return Date.now()-e},n.isPlainObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};n.hasProperty=(e,t)=>Reflect.hasOwnProperty.call(e,t),n.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},n.isValidJson=function(e){try{return s.default(e,JSON.parse(JSON.stringify(e)))}catch(e){return!1}},n.setDiff=function(e,t){return Object.entries(e).reduce(((e,[n,r])=>(n in t||(e[n]=r),e)),{})},n.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation")}}}},{package:"@metamask/snap-controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/snap-controllers/dist/utils.js"}],[1330,{"./ExternalResourceController":1329},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./ExternalResourceController"),n)}}},{package:"@metamask/snap-controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/snap-controllers/dist/resource/index.js"}],[1334,{"./AbstractExecutionService":1331,"./ExecutionService":1332,"./WebWorkerExecutionService":1333},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./AbstractExecutionService"),n),s(e("./ExecutionService"),n),s(e("./WebWorkerExecutionService"),n)}}},{package:"@metamask/snap-controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/snap-controllers/dist/services/index.js"}],[1338,{"./SnapController":1336,"./default-endowments":1337,"./json-schemas":1339,"./utils":1342},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./SnapController"),n),s(e("./json-schemas"),n),s(e("./utils"),n),s(e("./default-endowments"),n)}}},{package:"@metamask/snap-controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/snap-controllers/dist/snaps/index.js"}],[1160,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BIP_39_PATH_REGEX=n.BIP_32_PATH_REGEX=n.BIP44PurposeNodeToken=n.MAX_BIP_44_DEPTH=n.MIN_BIP_44_DEPTH=n.BASE_64_REGEX=n.HEXADECIMAL_KEY_LENGTH=n.BASE_64_ZERO=n.BASE_64_KEY_LENGTH=n.BUFFER_KEY_LENGTH=void 0,n.BUFFER_KEY_LENGTH=64,n.BASE_64_KEY_LENGTH=88,n.BASE_64_ZERO="AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==",n.HEXADECIMAL_KEY_LENGTH=128,n.BASE_64_REGEX=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$/u,n.MIN_BIP_44_DEPTH=0,n.MAX_BIP_44_DEPTH=5,n.BIP44PurposeNodeToken="bip32:44'",n.BIP_32_PATH_REGEX=/^bip32:\d+'?$/u,n.BIP_39_PATH_REGEX=/^bip39:([a-z]+){1}( [a-z]+){11,23}$/u}}},{package:"@metamask/key-tree",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/key-tree/dist/constants.js"}],[1158,{"./BIP44Node":1159,"./utils":1166},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getBIP44AddressKeyDeriver=n.deriveBIP44AddressKey=n.BIP44CoinTypeNode=n.BIP_44_COIN_TYPE_DEPTH=void 0;const r=e("./BIP44Node"),s=e("./utils");n.BIP_44_COIN_TYPE_DEPTH=2;const i=Symbol("_node");class o{constructor(e,t){if(Array.isArray(e)){if(t!==undefined)throw new Error("Invalid parameters: May not specify both coin type and a derivation path. The coin type will be computed from the derivation path.");a(e.length-1),this[i]=new r.BIP44Node({derivationPath:e}),this.coin_type=Number.parseInt(e[n.BIP_44_COIN_TYPE_DEPTH].split(":")[1].replace("'",""),10)}else{a(e.depth),c(e.key);const o=e instanceof r.BIP44Node?e.keyBuffer:s.base64StringToBuffer(e.key);if("number"!=typeof t||!Number.isInteger(t)||t<0)throw new Error("Invalid coin type: The specified coin type must be a non-negative integer number.");this.coin_type=t,this[i]=e instanceof r.BIP44Node?e:new r.BIP44Node({depth:n.BIP_44_COIN_TYPE_DEPTH,key:o})}this.path=s.getBIP44CoinTypePathString(this.coin_type),Object.freeze(this)}get depth(){return this[i].depth}get key(){return this[i].key}get keyBuffer(){return this[i].keyBuffer}deriveBIP44AddressKey({account:e=0,change:t=0,address_index:n}){return this[i].derive(s.getBIP44CoinTypeToAddressPathTuple({account:e,change:t,address_index:n})).keyBuffer}toJSON(){return Object.assign(Object.assign({},this[i].toJSON()),{coin_type:this.coin_type,path:this.path})}}function a(e){if(e!==n.BIP_44_COIN_TYPE_DEPTH)throw new Error(`Invalid depth: Coin type nodes must be of depth ${n.BIP_44_COIN_TYPE_DEPTH}. Received: "${e}"`)}function c(e){if(!s.isValidBase64StringKey(e))throw new Error("Invalid parent key: Must be a non-zero 64-byte key.")}n.BIP44CoinTypeNode=o,n.deriveBIP44AddressKey=function(e,{account:t=0,change:i=0,address_index:u}){let l;return"string"==typeof e?c(e):(a(e.depth),c(e.key)),l=e instanceof o?e.keyBuffer:s.base64StringToBuffer("string"==typeof e?e:e.key),r.deriveChildNode(l,n.BIP_44_COIN_TYPE_DEPTH,s.getBIP44CoinTypeToAddressPathTuple({account:t,change:i,address_index:u})).keyBuffer},n.getBIP44AddressKeyDeriver=function(e,t){const{account:i=0,change:u=0}=t||{},{key:l,depth:d}=e;a(d),c(l);const h=e instanceof o?e.keyBuffer:s.base64StringToBuffer(l),f=s.getHardenedBIP32NodeToken(i),p=s.getUnhardenedBIP32NodeToken(u),m=e=>r.deriveChildNode(h,n.BIP_44_COIN_TYPE_DEPTH,[f,p,s.getUnhardenedBIP32NodeToken(e)]).keyBuffer;return m.coin_type=e.coin_type,m.path=s.getBIP44ChangePathString(e.path,{account:i,change:u}),Object.freeze(m),m}}}},{package:"@metamask/key-tree",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/key-tree/dist/BIP44CoinTypeNode.js"}],[1159,{"../../../is-buffer/index.js":4689,"./constants":1160,"./derivation":1161,"./utils":1166},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.deriveChildNode=n.BIP44Node=void 0;const r=e("./derivation"),s=e("./constants"),i=e("./utils");class o{constructor({depth:e,key:t,derivationPath:n}){const i=o._parseKey(t);if(n){if(i)throw new Error("Invalid parameters: May not specify a derivation path if a key is specified. Initialize the node with just the parent key and its depth, then call BIP44Node.derive() with your desired path.");if(e)throw new Error("Invalid parameters: May not specify a depth if a derivation path is specified. The depth will be calculated from the path.");if(0===n.length)throw new Error("Invalid derivation path: May not specify an empty derivation path.");const t=n.length-1;c(t),this.depth=t,u(n,s.MIN_BIP_44_DEPTH),this.keyBuffer=r.deriveKeyFromPath(n,undefined,this.depth)}else{if(!i)throw new Error("Invalid parameters: Must specify either key or derivation path.");c(e),this.depth=e,this.keyBuffer=i}Object.freeze(this)}get key(){return i.bufferToBase64String(this.keyBuffer)}static _parseKey(e){if(e===undefined||null===e)return undefined;let n;if(t.isBuffer(e)){if(!i.isValidBufferKey(e))throw new Error("Invalid buffer key: Must be a 64-byte, non-empty Buffer.");n=e}else{if("string"!=typeof e)throw new Error(`Invalid key: Must be a Buffer or string if specified. Received: "${typeof e}"`);if(i.isValidHexStringKey(e))n=i.hexStringToBuffer(e);else{if(!i.isValidBase64StringKey(e))throw new Error("Invalid string key: Must be a 64-byte hexadecimal or Base64 string.");n=i.base64StringToBuffer(e)}}return n}derive(e){if(this.depth===s.MAX_BIP_44_DEPTH)throw new Error("Illegal operation: This HD tree node is already a leaf node.");return a(this.keyBuffer,this.depth,e)}toJSON(){return{depth:this.depth,key:this.key}}}function a(e,t,n){if(0===n.length)throw new Error("Invalid HD tree derivation path: Deriving a path of length 0 is not defined");const s=t+n.length;return c(s),u(n,t+1),new o({depth:s,key:r.deriveKeyFromPath(n,e)})}function c(e){if("number"!=typeof e||!Number.isInteger(e)||e<s.MIN_BIP_44_DEPTH||e>s.MAX_BIP_44_DEPTH)throw new Error(`Invalid HD tree path depth: The depth must be a positive integer N such that 0 <= N <= 5. Received: "${e}"`)}function u(e,t){e.forEach(((e,n)=>{switch(t+n){case s.MIN_BIP_44_DEPTH:if(!s.BIP_39_PATH_REGEX.test(e))throw new Error('Invalid derivation path: The "m" / seed node (depth 0) must be a BIP-39 node.');break;case 1:if(e!==s.BIP44PurposeNodeToken)throw new Error(`Invalid derivation path: The "purpose" node node (depth 1) must be the string "${s.BIP44PurposeNodeToken}".`);break;case 2:if(!s.BIP_32_PATH_REGEX.test(e)||!i.isHardened(e))throw new Error('Invalid derivation path: The "coin_type" node (depth 2) must be a hardened BIP-32 node.');break;case 3:if(!s.BIP_32_PATH_REGEX.test(e)||!i.isHardened(e))throw new Error('Invalid derivation path: The "account" node (depth 3) must be a hardened BIP-32 node.');break;case 4:if(!s.BIP_32_PATH_REGEX.test(e)||i.isHardened(e))throw new Error('Invalid derivation path: The "change" node (depth 4) must be an unhardened BIP-32 node.');break;case s.MAX_BIP_44_DEPTH:if(!s.BIP_32_PATH_REGEX.test(e)||i.isHardened(e))throw new Error('Invalid derivation path: The "address_index" node (depth 5) must be an unhardened BIP-32 node.');break;default:throw new Error("Invalid derivation path: The path exceeds the maximum BIP-44 depth.")}}))}n.BIP44Node=o,n.deriveChildNode=a}).call(this)}).call(this,{isBuffer:e("../../../is-buffer/index.js")})}}},{package:"@metamask/key-tree",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/key-tree/dist/BIP44Node.js"}],[1807,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}}}},{package:"axios",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/axios/lib/helpers/isAbsoluteURL.js"}],[1805,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}}}},{package:"axios",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/axios/lib/helpers/combineURLs.js"}],[2427,{buffer:2084},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){Object.defineProperty(n,"__esModule",{value:!0});var t=e.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),r=e.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);n.privateKeyExport=function(n,s,i){void 0===i&&(i=!0);var o=e.from(i?t:r);return n.copy(o,i?8:9),s.copy(o,i?181:214),o},n.privateKeyImport=function(e){var t=e.length,n=0;if(t<n+1||48!==e[n])return null;if(t<(n+=1)+1||!(128&e[n]))return null;var r=127&e[n];if(r<1||r>2)return null;if(t<(n+=1)+r)return null;var s=e[n+r-1]|(r>1?e[n+r-2]<<8:0);return t<(n+=r)+s||t<n+3||2!==e[n]||1!==e[n+1]||1!==e[n+2]||t<(n+=3)+2||4!==e[n]||e[n+1]>32||t<n+2+e[n+1]?null:e.slice(n+2,n+2+e[n+1])},n.signatureImportLax=function(t){var n=e.alloc(32,0),r=e.alloc(32,0),s=t.length,i=0;if(48!==t[i++])return null;var o=t[i++];if(128&o&&(i+=o-128)>s)return null;if(2!==t[i++])return null;var a=t[i++];if(128&a){if(i+(o=a-128)>s)return null;for(;o>0&&0===t[i];i+=1,o-=1);for(a=0;o>0;i+=1,o-=1)a=(a<<8)+t[i]}if(a>s-i)return null;var c=i;if(i+=a,2!==t[i++])return null;var u=t[i++];if(128&u){if(i+(o=u-128)>s)return null;for(;o>0&&0===t[i];i+=1,o-=1);for(u=0;o>0;i+=1,o-=1)u=(u<<8)+t[i]}if(u>s-i)return null;var l=i;for(i+=u;a>0&&0===t[c];a-=1,c+=1);if(a>32)return null;var d=t.slice(c,c+a);for(d.copy(n,32-d.length);u>0&&0===t[l];u-=1,l+=1);if(u>32)return null;var h=t.slice(l,l+u);return h.copy(r,32-h.length),{r:n,s:r}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethereumjs-util",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/eth-json-rpc-middleware/node_modules/ethereumjs-abi/node_modules/ethereumjs-util/dist/secp256k1v3-lib/der.js"}],[2428,{"bn.js":2040,buffer:2084,elliptic:2318},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r=e("bn.js"),s=new(0,e("elliptic").ec)("secp256k1"),i=s.curve;n.privateKeyExport=function(e,t){void 0===t&&(t=!0);var n=new r(e);if(n.ucmp(i.n)>=0)throw new Error("couldn't export to DER format");var a=s.g.mul(n);return o(a.getX(),a.getY(),t)},n.privateKeyModInverse=function(e){var n=new r(e);if(n.ucmp(i.n)>=0||n.isZero())throw new Error("private key range is invalid");return n.invm(i.n).toArrayLike(t,"be",32)},n.signatureImport=function(e){var n=new r(e.r);n.ucmp(i.n)>=0&&(n=new r(0));var s=new r(e.s);return s.ucmp(i.n)>=0&&(s=new r(0)),t.concat([n.toArrayLike(t,"be",32),s.toArrayLike(t,"be",32)])},n.ecdhUnsafe=function(e,t,n){void 0===n&&(n=!0);var a=s.keyFromPublic(e),c=new r(t);if(c.ucmp(i.n)>=0||c.isZero())throw new Error("scalar was invalid (zero or overflow)");var u=a.pub.mul(c);return o(u.getX(),u.getY(),n)};var o=function(e,n,r){var s;return r?((s=t.alloc(33))[0]=n.isOdd()?3:2,e.toArrayLike(t,"be",32).copy(s,1)):((s=t.alloc(65))[0]=4,e.toArrayLike(t,"be",32).copy(s,1),n.toArrayLike(t,"be",32).copy(s,33)),s}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethereumjs-util",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/eth-json-rpc-middleware/node_modules/ethereumjs-abi/node_modules/ethereumjs-util/dist/secp256k1v3-lib/index.js"}],[4716,{},function(){with(this)return function(){"use strict";return function(e,t,n){const r=self.location?self.location.protocol+"//"+self.location.host:"",s=self.URL;t.exports={URLWithLegacySupport:class{constructor(e="",t=r){this.super=new s(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set origin(e){this.super.origin=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set searchParams(e){this.super.searchParams=e}set username(e){this.super.username=e}createObjectURL(e){return this.super.createObjectURL(e)}revokeObjectURL(e){this.super.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}},URLSearchParams:self.URLSearchParams,defaultBase:r,format:function(e){if("string"==typeof e){return new s(e).toString()}if(!(e instanceof s)){const t=e.username&&e.password?`${e.username}:${e.password}@`:"",n=e.auth?e.auth+"@":"",r=e.port?":"+e.port:"",s=e.protocol?e.protocol+"//":"",i=e.host||"",o=e.hostname||"",a=e.search||(e.query?"?"+e.query:""),c=e.hash||"",u=e.pathname||"";return`${s}${t||n}${i||o+r}${e.path||u+a}${c}`}}}}}},{package:"iso-url",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/iso-url/src/url-browser.js"}],[4715,{"./url":4716},function(){with(this)return function(){"use strict";return function(e,t,n){const{URLWithLegacySupport:r,format:s}=e("./url");t.exports=(e,t={},n={},i)=>{let o,a=t.protocol?t.protocol.replace(":",""):"http";a=(n[a]||i||a)+":";try{o=new r(e)}catch(e){o={}}const c=Object.assign({},t,{protocol:a||o.protocol,host:t.host||o.host});return new r(e,s(c)).toString()}}}},{package:"iso-url",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/iso-url/src/relative.js"}],[4399,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=global.MutationObserver||global.WebKitMutationObserver;n.test=function(){return r},n.install=function(e){var t=0,n=new r(e),s=global.document.createTextNode("");return n.observe(s,{characterData:!0}),function(){s.data=t=++t%2}}}}},{package:"immediate",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/immediate/lib/mutation.js"}],[4401,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.test=function(){return"document"in global&&"onreadystatechange"in global.document.createElement("script")},n.install=function(e){return function(){var t=global.document.createElement("script");return t.onreadystatechange=function(){e(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},global.document.documentElement.appendChild(t),e}}}}},{package:"immediate",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/immediate/lib/stateChange.js"}],[4398,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.test=function(){return!global.setImmediate&&void 0!==global.MessageChannel},n.install=function(e){var t=new global.MessageChannel;return t.port1.onmessage=e,function(){t.port2.postMessage(0)}}}}},{package:"immediate",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/immediate/lib/messageChannel.js"}],[4402,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.test=function(){return!0},n.install=function(e){return function(){setTimeout(e,0)}}}}},{package:"immediate",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/immediate/lib/timeout.js"}],[4400,{_process:5423},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){n.test=function(){return void 0!==e&&!e.browser},n.install=function(t){return function(){e.nextTick(t)}}}).call(this)}).call(this,e("_process"))}}},{package:"immediate",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/immediate/lib/nextTick.js"}],[4709,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=i,i.strict=o,i.loose=a;var r=Object.prototype.toString,s={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function i(e){return o(e)||a(e)}function o(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function a(e){return s[r.call(e)]}}}},{package:"is-typedarray",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/is-typedarray/index.js"}],[5346,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={COMPRESSED_TYPE_INVALID:"compressed should be a boolean",EC_PRIVATE_KEY_TYPE_INVALID:"private key should be a Buffer",EC_PRIVATE_KEY_LENGTH_INVALID:"private key length is invalid",EC_PRIVATE_KEY_RANGE_INVALID:"private key range is invalid",EC_PRIVATE_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting private key is invalid",EC_PRIVATE_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PRIVATE_KEY_EXPORT_DER_FAIL:"couldn't export to DER format",EC_PRIVATE_KEY_IMPORT_DER_FAIL:"couldn't import from DER format",EC_PUBLIC_KEYS_TYPE_INVALID:"public keys should be an Array",EC_PUBLIC_KEYS_LENGTH_INVALID:"public keys Array should have at least 1 element",EC_PUBLIC_KEY_TYPE_INVALID:"public key should be a Buffer",EC_PUBLIC_KEY_LENGTH_INVALID:"public key length is invalid",EC_PUBLIC_KEY_PARSE_FAIL:"the public key could not be parsed or is invalid",EC_PUBLIC_KEY_CREATE_FAIL:"private was invalid, try again",EC_PUBLIC_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting public key is invalid",EC_PUBLIC_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PUBLIC_KEY_COMBINE_FAIL:"the sum of the public keys is not valid",ECDH_FAIL:"scalar was invalid (zero or overflow)",ECDSA_SIGNATURE_TYPE_INVALID:"signature should be a Buffer",ECDSA_SIGNATURE_LENGTH_INVALID:"signature length is invalid",ECDSA_SIGNATURE_PARSE_FAIL:"couldn't parse signature",ECDSA_SIGNATURE_PARSE_DER_FAIL:"couldn't parse DER signature",ECDSA_SIGNATURE_SERIALIZE_DER_FAIL:"couldn't serialize signature to DER format",ECDSA_SIGN_FAIL:"nonce generation function failed or private key is invalid",ECDSA_RECOVER_FAIL:"couldn't recover public key from signature",MSG32_TYPE_INVALID:"message should be a Buffer",MSG32_LENGTH_INVALID:"message length is invalid",OPTIONS_TYPE_INVALID:"options should be an Object",OPTIONS_DATA_TYPE_INVALID:"options.data should be a Buffer",OPTIONS_DATA_LENGTH_INVALID:"options.data length is invalid",OPTIONS_NONCEFN_TYPE_INVALID:"options.noncefn should be a Function",RECOVERY_ID_TYPE_INVALID:"recovery should be a Number",RECOVERY_ID_VALUE_INVALID:"recovery should have value between -1 and 4",TWEAK_TYPE_INVALID:"tweak should be a Buffer",TWEAK_LENGTH_INVALID:"tweak length is invalid"}}}},{package:"secp256k1",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/orbit-db-keystore/node_modules/secp256k1/lib/messages.json"}],[5342,{"../../../../is-buffer/index.js":4689},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){var t=Object.prototype.toString;n.isArray=function(e,t){if(!Array.isArray(e))throw TypeError(t)},n.isBoolean=function(e,n){if("[object Boolean]"!==t.call(e))throw TypeError(n)},n.isBuffer=function(t,n){if(!e.isBuffer(t))throw TypeError(n)},n.isFunction=function(e,n){if("[object Function]"!==t.call(e))throw TypeError(n)},n.isNumber=function(e,n){if("[object Number]"!==t.call(e))throw TypeError(n)},n.isObject=function(e,n){if("[object Object]"!==t.call(e))throw TypeError(n)},n.isBufferLength=function(e,t,n){if(e.length!==t)throw RangeError(n)},n.isBufferLength2=function(e,t,n,r){if(e.length!==t&&e.length!==n)throw RangeError(r)},n.isLengthGTZero=function(e,t){if(0===e.length)throw RangeError(t)},n.isNumberInInterval=function(e,t,n,r){if(e<=t||e>=n)throw RangeError(r)}}).call(this)}).call(this,{isBuffer:e("../../../../is-buffer/index.js")})}}},{package:"secp256k1",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/orbit-db-keystore/node_modules/secp256k1/lib/assert.js"}],[5343,{bip66:1973,"safe-buffer":5742},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("safe-buffer").Buffer,s=e("bip66"),i=r.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),o=r.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);n.privateKeyExport=function(e,t,n){var s=r.from(n?i:o);return e.copy(s,n?8:9),t.copy(s,n?181:214),s},n.privateKeyImport=function(e){var t=e.length,n=0;if(!(t<n+1||48!==e[n])&&!(t<(n+=1)+1)&&128&e[n]){var r=127&e[n];if(n+=1,!(r<1||r>2||t<n+r)){var s=e[n+r-1]|(r>1?e[n+r-2]<<8:0);if(!(t<(n+=r)+s||t<n+3||2!==e[n]||1!==e[n+1]||1!==e[n+2]||t<(n+=3)+2||4!==e[n]||e[n+1]>32||t<n+2+e[n+1]))return e.slice(n+2,n+2+e[n+1])}}},n.signatureExport=function(e){for(var t=r.concat([r.from([0]),e.r]),n=33,i=0;n>1&&0===t[i]&&!(128&t[i+1]);--n,++i);for(var o=r.concat([r.from([0]),e.s]),a=33,c=0;a>1&&0===o[c]&&!(128&o[c+1]);--a,++c);return s.encode(t.slice(i),o.slice(c))},n.signatureImport=function(e){var t=r.alloc(32,0),n=r.alloc(32,0);try{var i=s.decode(e);if(33===i.r.length&&0===i.r[0]&&(i.r=i.r.slice(1)),i.r.length>32)throw new Error("R length is too long");if(33===i.s.length&&0===i.s[0]&&(i.s=i.s.slice(1)),i.s.length>32)throw new Error("S length is too long")}catch(e){return}return i.r.copy(t,32-i.r.length),i.s.copy(n,32-i.s.length),{r:t,s:n}},n.signatureImportLax=function(e){var t=r.alloc(32,0),n=r.alloc(32,0),s=e.length,i=0;if(48===e[i++]){var o=e[i++];if(!(128&o&&(i+=o-128)>s)&&2===e[i++]){var a=e[i++];if(128&a){if(i+(o=a-128)>s)return;for(;o>0&&0===e[i];i+=1,o-=1);for(a=0;o>0;i+=1,o-=1)a=(a<<8)+e[i]}if(!(a>s-i)){var c=i;if(i+=a,2===e[i++]){var u=e[i++];if(128&u){if(i+(o=u-128)>s)return;for(;o>0&&0===e[i];i+=1,o-=1);for(u=0;o>0;i+=1,o-=1)u=(u<<8)+e[i]}if(!(u>s-i)){var l=i;for(i+=u;a>0&&0===e[c];a-=1,c+=1);if(!(a>32)){var d=e.slice(c,c+a);for(d.copy(t,32-d.length);u>0&&0===e[l];u-=1,l+=1);if(!(u>32)){var h=e.slice(l,l+u);return h.copy(n,32-h.length),{r:t,s:n}}}}}}}}}}}},{package:"secp256k1",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/orbit-db-keystore/node_modules/secp256k1/lib/der.js"}],[2261,{"abstract-leveldown":1676,inherits:4407},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("abstract-leveldown").AbstractIterator;function s(e){r.call(this,e),this._options=e,this._iterator=null,this._operations=[]}e("inherits")(s,r),s.prototype.setDb=function(e){var t=this._iterator=e.iterator(this._options);this._operations.forEach((function(e){t[e.method].apply(t,e.args)}))},s.prototype._operation=function(e,t){if(this._iterator)return this._iterator[e].apply(this._iterator,t);this._operations.push({method:e,args:t})},"next end".split(" ").forEach((function(e){s.prototype["_"+e]=function(){this._operation(e,arguments)}})),s.prototype.seek=function(){this._operation("seek",arguments)},t.exports=s}}},{package:"deferred-leveldown",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/deferred-leveldown/deferred-iterator.js"}],[2360,{"./custom":2359},function(){with(this)return function(){"use strict";return function(e,t,n){var r=t.exports.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];t.exports.errno={},t.exports.code={},r.forEach((function(e){t.exports.errno[e.errno]=e,t.exports.code[e.code]=e})),t.exports.custom=e("./custom")(t.exports),t.exports.create=t.exports.custom.createError}}},{package:"errno",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/errno/errno.js"}],[4804,{"./lib/_stream_duplex.js":4791,"./lib/_stream_passthrough.js":4792,"./lib/_stream_readable.js":4793,"./lib/_stream_transform.js":4794,"./lib/_stream_writable.js":4795,"./lib/internal/streams/end-of-stream.js":4799,"./lib/internal/streams/pipeline.js":4801},function(){with(this)return function(){"use strict";return function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/level-iterator-stream/node_modules/readable-stream/readable-browser.js"}],[1761,{"./DoublyLinkedList":1744,"./onlyOnce":1759,"./setImmediate":1763,"./wrapAsync":1766,"lodash/_baseIndexOf":5043,"lodash/isArray":5159,"lodash/noop":5178},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var l=(0,u.default)(e),d=0,h=[],f=!1;function p(e,t,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(y.started=!0,(0,s.default)(e)||(e=[e]),0===e.length&&y.idle())return(0,a.default)((function(){y.drain()}));for(var r=0,o=e.length;r<o;r++){var c={data:e[r],callback:n||i.default};t?y._tasks.unshift(c):y._tasks.push(c)}f||(f=!0,(0,a.default)((function(){f=!1,y.process()})))}function m(e){return function(t){d-=1;for(var n=0,s=e.length;n<s;n++){var i=e[n],o=(0,r.default)(h,i,0);0===o?h.shift():o>0&&h.splice(o,1),i.callback.apply(i,arguments),null!=t&&y.error(t,i.data)}d<=y.concurrency-y.buffer&&y.unsaturated(),y.idle()&&y.drain(),y.process()}}var g=!1,y={_tasks:new c.default,concurrency:t,payload:n,saturated:i.default,unsaturated:i.default,buffer:t/4,empty:i.default,drain:i.default,error:i.default,started:!1,paused:!1,push:function(e,t){p(e,!1,t)},kill:function(){y.drain=i.default,y._tasks.empty()},unshift:function(e,t){p(e,!0,t)},remove:function(e){y._tasks.remove(e)},process:function(){if(!g){for(g=!0;!y.paused&&d<y.concurrency&&y._tasks.length;){var e=[],t=[],n=y._tasks.length;y.payload&&(n=Math.min(n,y.payload));for(var r=0;r<n;r++){var s=y._tasks.shift();e.push(s),h.push(s),t.push(s.data)}d+=1,0===y._tasks.length&&y.empty(),d===y.concurrency&&y.saturated();var i=(0,o.default)(m(e));l(t,i)}g=!1}},length:function(){return y._tasks.length},running:function(){return d},workersList:function(){return h},idle:function(){return y._tasks.length+d===0},pause:function(){y.paused=!0},resume:function(){!1!==y.paused&&(y.paused=!1,(0,a.default)(y.process))}};return y};var r=l(e("lodash/_baseIndexOf")),s=l(e("lodash/isArray")),i=l(e("lodash/noop")),o=l(e("./onlyOnce")),a=l(e("./setImmediate")),c=l(e("./DoublyLinkedList")),u=l(e("./wrapAsync"));function l(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default}}},{package:"async",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async/internal/queue.js"}],[2236,{"pull-stream":5480},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("pull-stream");t.exports=class{constructor(e,t){this.child=e,this.transform=t}open(e){this.child.open(e)}put(e,t,n){this.child.put(this.transform.convert(e),t,n)}get(e,t){this.child.get(this.transform.convert(e),t)}has(e,t){this.child.has(this.transform.convert(e),t)}delete(e,t){this.child.delete(this.transform.convert(e),t)}batch(){const e=this.child.batch();return{put:(t,n)=>{e.put(this.transform.convert(t),n)},delete:t=>{e.delete(this.transform.convert(t))},commit:t=>{e.commit(t)}}}query(e){return r(this.child.query(e),r.map((e=>(e.key=this.transform.invert(e.key),e))))}close(e){this.child.close(e)}}}}},{package:"datastore-core",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/datastore-core/src/keytransform.js"}],[2238,{"./keytransform":2236,"interface-datastore":4414},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("interface-datastore").Key,s=e("./keytransform");t.exports=class extends s{constructor(e,t){super(e,{convert:e=>t.child(e),invert(e){if("/"===t.toString())return e;if(!t.isAncestorOf(e))throw new Error(`Expected prefix: (${t.toString()}) in key: ${e.toString()}`);return new r(e.toString().slice(t.toString().length),!1)}}),this.prefix=t}query(e){return e.prefix&&"/"!==this.prefix.toString()?super.query(Object.assign({},e,{prefix:this.prefix.child(new r(e.prefix)).toString()})):super.query(e)}}}}},{package:"datastore-core",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/datastore-core/src/namespace.js"}],[2240,{"./shard-readme":2239,"interface-datastore":4414},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("interface-datastore").Key,s=e("./shard-readme"),i=n.PREFIX="/repo/flatfs/shard/",o=n.SHARDING_FN="SHARDING";n.README_FN="_README";class a{constructor(e){this.param=e}fun(e){throw new Error("implement me")}toString(){return`${i}v1/${this.name}/${this.param}`}}class c extends a{constructor(e){super(e),this._padding="".padStart(e,"_"),this.name="prefix"}fun(e){return(e+this._padding).slice(0,this.param)}}class u extends a{constructor(e){super(e),this._padding="".padStart(e,"_"),this.name="suffix"}fun(e){const t=this._padding+e;return t.slice(t.length-this.param)}}class l extends a{constructor(e){super(e),this._padding="".padStart(e+1,"_"),this.name="next-to-last"}fun(e){const t=this._padding+e,n=t.length-this.param-1;return t.slice(n,n+this.param)}}function d(e){if(0===(e=e.trim()).length)throw new Error("empty shard string");if(!e.startsWith(i))throw new Error(`invalid or no path prefix: ${e}`);const t=e.slice(i.length).split("/"),n=t[0];if("v1"!==n)throw new Error(`expect 'v1' version, got '${n}'`);const r=t[1];if(!t[2])throw new Error("missing param");const s=parseInt(t[2],10);switch(r){case"prefix":return new c(s);case"suffix":return new u(s);case"next-to-last":return new l(s);default:throw new Error(`unkown sharding function: ${r}`)}}n.readShardFun=(e,t,n)=>{const s=new r(e).child(new r(o));("function"==typeof t.getRaw?t.getRaw.bind(t):t.get.bind(t))(s,((e,t)=>{if(e)return n(e);let r;try{r=d((t||"").toString().trim())}catch(e){return n(e)}n(null,r)}))},n.readme=s,n.parseShardFun=d,n.Prefix=c,n.Suffix=u,n.NextToLast=l}}},{package:"datastore-core",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/datastore-core/src/shard.js"}],[2242,{"async/each":1736,"async/whilst":1783,"interface-datastore":4414},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("async/each"),s=e("async/whilst"),i=e("interface-datastore").Errors;t.exports=class{constructor(e){this.stores=e.slice()}open(e){r(this.stores,((e,t)=>{e.open(t)}),(t=>{if(t)return e(i.dbOpenFailedError());e()}))}put(e,t,n){r(this.stores,((n,r)=>{n.put(e,t,r)}),(e=>{if(e)return n(i.dbWriteFailedError());n()}))}get(e,t){const n=this.stores.length;let r=!1,o=0;s((()=>!r&&o<n),(t=>{this.stores[o++].get(e,((e,n)=>{if(null==e)return r=!0,t(null,n);t()}))}),((e,n)=>{if(e||!n)return t(i.notFoundError());t(null,n)}))}has(e,t){const n=this.stores.length;let r=!1,i=0;s((()=>!r&&i<n),(t=>{this.stores[i++].has(e,((e,n)=>{if(null==e)return r=!0,t(null,n);t()}))}),t)}delete(e,t){r(this.stores,((t,n)=>{t.delete(e,n)}),(e=>{if(e)return t(i.dbDeleteFailedError());t()}))}close(e){r(this.stores,((e,t)=>{e.close(t)}),e)}batch(){const e=this.stores.map((e=>e.batch()));return{put:(t,n)=>{e.forEach((e=>e.put(t,n)))},delete:t=>{e.forEach((e=>e.delete(t)))},commit:t=>{r(e,((e,t)=>{e.commit(t)}),t)}}}query(e){return this.stores[this.stores.length-1].query(e)}}}}},{package:"datastore-core",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/datastore-core/src/tiered.js"}],[2241,{"./keytransform":2236,"./shard":2240,"async/parallel":1771,"async/waterfall":1782,buffer:2084,"interface-datastore":4414},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("async/waterfall"),s=e("async/parallel"),i=e("interface-datastore").Key,o=e("./shard"),a=e("./keytransform"),c=new i(o.SHARDING_FN),u=new i(o.README_FN);class l{constructor(e,t){this.child=new a(e,{convert:this._convertKey.bind(this),invert:this._invertKey.bind(this)}),this.shard=t}open(e){this.child.open(e)}_convertKey(e){const t=e.toString();if(t===c.toString()||t===u.toString())return e;return new i(this.shard.fun(t)).child(e)}_invertKey(e){const t=e.toString();return t===c.toString()||t===u.toString()?e:i.withNamespaces(e.list().slice(1))}static createOrOpen(e,t,n){l.create(e,t,(t=>{if(t&&"datastore exists"!==t.message)return n(t);l.open(e,n)}))}static open(e,t){r([t=>o.readShardFun("/",e,t),(t,n)=>{n(null,new l(e,t))}],t)}static create(e,t,r){e.has(c,((i,a)=>{if(i)return r(i);if(!a){const i="function"==typeof e.putRaw?e.putRaw.bind(e):e.put.bind(e);return s([e=>i(c,n.from(t.toString()+"\n"),e),e=>i(u,n.from(o.readme),e)],(e=>r(e)))}o.readShardFun("/",e,((e,n)=>{if(e)return r(e);const s=(n||"").toString(),i=t.toString();if(s!==i)return r(new Error(`specified fun ${i} does not match repo shard fun ${s}`));r(new Error("datastore exists"))}))}))}put(e,t,n){this.child.put(e,t,n)}get(e,t){this.child.get(e,t)}has(e,t){this.child.has(e,t)}delete(e,t){this.child.delete(e,t)}batch(){return this.child.batch()}query(e){const t={keysOnly:e.keysOnly,offset:e.offset,limit:e.limit,filters:[(e,t)=>t(null,e.key.toString()!==c.toString()),(e,t)=>t(null,e.key.toString()!==u.toString())]};if(null!=e.prefix&&t.filters.push(((t,n)=>{n(null,this._invertKey(t.key).toString().startsWith(e.prefix))})),null!=e.filters){const n=e.filters.map((e=>(t,n)=>{e(Object.assign({},t,{key:this._invertKey(t.key)}),n)}));t.filters=t.filters.concat(n)}return null!=e.orders&&(t.orders=e.orders.map((e=>(t,n)=>{t.forEach((e=>{e.key=this._invertKey(e.key)})),e(t,((e,t)=>{if(e)return n(e);t.forEach((e=>{e.key=this._convertKey(e.key)})),n(null,t)}))}))),this.child.query(t)}close(e){this.child.close(e)}}t.exports=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"datastore-core",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/datastore-core/src/sharding.js"}],[2237,{"./keytransform":2236,"async/each":1736,"interface-datastore":4414,"pull-many":5463,"pull-stream":5480},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("async/each"),s=e("pull-many"),i=e("pull-stream"),o=e("interface-datastore").Key,a=e("interface-datastore").Errors,c=e("interface-datastore").utils,u=c.asyncFilter,l=c.asyncSort,d=c.replaceStartWith,h=e("./keytransform");t.exports=class{constructor(e){this.mounts=e.slice()}open(e){r(this.mounts,((e,t)=>{e.datastore.open(t)}),e)}_lookup(e){for(let t of this.mounts)if(t.prefix.toString()===e.toString()||t.prefix.isAncestorOf(e)){const n=d(e.toString(),t.prefix.toString());return{datastore:t.datastore,mountpoint:t.prefix,rest:new o(n)}}}put(e,t,n){const r=this._lookup(e);if(null==r)return n(a.dbWriteFailedError(new Error("No datastore mounted for this key")));r.datastore.put(r.rest,t,n)}get(e,t){const n=this._lookup(e);if(null==n)return t(a.notFoundError(new Error("No datastore mounted for this key")));n.datastore.get(n.rest,t)}has(e,t){const n=this._lookup(e);null!=n?n.datastore.has(n.rest,t):t(null,!1)}delete(e,t){const n=this._lookup(e);if(null==n)return t(a.dbDeleteFailedError(new Error("No datastore mounted for this key")));n.datastore.delete(n.rest,t)}close(e){r(this.mounts,((e,t)=>{e.datastore.close(t)}),e)}batch(){const e={},t=t=>{const n=this._lookup(t);if(null==n)throw new Error("No datastore mounted for this key");const r=n.mountpoint.toString();return null==e[r]&&(e[r]=n.datastore.batch()),{batch:e[r],rest:n.rest}};return{put:(e,n)=>{const r=t(e);r.batch.put(r.rest,n)},delete:e=>{const n=t(e);n.batch.delete(n.rest)},commit:t=>{r(Object.keys(e),((t,n)=>{e[t].commit(n)}),t)}}}query(e){const t=this.mounts.map((t=>{const n=new h(t.datastore,{convert:e=>{throw new Error("should never be called")},invert:e=>t.prefix.child(e)});let r;return null!=e.prefix&&(r=d(e.prefix,t.prefix.toString())),n.query({prefix:r,filters:e.filters,keysOnly:e.keysOnly})}));let n=[s(t)];if(null!=e.filters&&(n=n.concat(e.filters.map((e=>u(e))))),null!=e.orders&&(n=n.concat(e.orders.map((e=>l(e))))),null!=e.offset){let t=0;n.push(i.filter((()=>t++>=e.offset)))}return null!=e.limit&&n.push(i.take(e.limit)),i.apply(null,n)}}}}},{package:"datastore-core",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/datastore-core/src/mount.js"}],[1762,{"./filter":1751},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n,r){(0,i.default)(e,t,(function(e,t){n(e,(function(e,n){t(e,!n)}))}),r)};var r,s=e("./filter"),i=(r=s)&&r.__esModule?r:{default:r};t.exports=n.default}}},{package:"async",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async/internal/reject.js"}],[2248,{"./iterator":2249,_process:5423,"abstract-leveldown":2246,buffer:2084,util:2090,xtend:6174},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n,r){(function(){t.exports=c;var s=e("abstract-leveldown").AbstractLevelDOWN,i=e("util"),o=e("./iterator"),a=e("xtend");function c(e){if(!(this instanceof c))return new c(e);s.call(this,e)}i.inherits(c,s),c.prototype._open=function(e,t){var n=this;if(this._idbOpts=a({storeName:this.location,keyEncoding:"none",valueEncoding:"none"},e),this._idbOpts.idb)s(this._idbOpts.idb);else{var r=indexedDB.open(this.location);r.onerror=function(e){t(e.target.error)},r.onsuccess=function(){s(r.result)}}function s(r){n._db=r;var s=n._db.objectStoreNames.contains(n._idbOpts.storeName);if(e.errorIfExists&&s)return n._db.close(),void t(new Error("store already exists"));if(!e.createIfMissing&&!s)return n._db.close(),void t(new Error("store does not exist"));if(e.createIfMissing&&!s){n._db.close();var i=indexedDB.open(n.location,n._db.version+1);return i.onerror=function(e){t(e.target.error)},i.onupgradeneeded=function(){i.result.createObjectStore(n._idbOpts.storeName,n._idbOpts)},void(i.onsuccess=function(){n._db=i.result,t(null,n)})}t(null,n)}},c.prototype._get=function(e,t,n){t=a(this._idbOpts,t);var s=e;"binary"!==t.keyEncoding||Array.isArray(e)||(e=Array.prototype.slice.call(e));var i=this._db.transaction(this._idbOpts.storeName),o=i.objectStore(this._idbOpts.storeName).openCursor(IDBKeyRange.only(e));i.onabort=function(){n(i.error)},o.onsuccess=function(){var e=o.result;if(e){var i=e.value;if(i instanceof Uint8Array&&(i=new r(i)),"binary"!==t.valueEncoding||r.isBuffer(i)||(i=new r(i)),t.asBuffer&&!r.isBuffer(i))if(null==i)i=new r(0);else if("string"==typeof i)i=new r(i);else if("boolean"==typeof i)i=new r(String(i));else if("number"==typeof i)i=new r(String(i));else if(Array.isArray(i))i=new r(String(i));else{if(!(i instanceof Uint8Array))return void n(new TypeError("can't coerce `"+i.constructor.name+"` into a Buffer"));i=new r(i)}n(null,i,s)}else n(new Error("NotFound"))}},c.prototype._del=function(e,t,n){"binary"!==(t=a(this._idbOpts,t)).keyEncoding||Array.isArray(e)||(e=Array.prototype.slice.call(e));var r="readwrite";!0===t.sync&&(r="readwriteflush");var s=this._db.transaction(this._idbOpts.storeName,r);s.objectStore(this._idbOpts.storeName).delete(e);s.onabort=function(){n(s.error)},s.oncomplete=function(){n()}},c.prototype._put=function(e,t,n,r){"binary"!==(n=a(this._idbOpts,n)).keyEncoding||Array.isArray(e)||(e=Array.prototype.slice.call(e));var s="readwrite";!0===n.sync&&(s="readwriteflush");var i=this._db.transaction(this._idbOpts.storeName,s);i.objectStore(this._idbOpts.storeName).put(t,e);i.onabort=function(){r(i.error)},i.oncomplete=function(){r()}},c.prototype._iterator=function(e){return new o(this,e)},c.prototype._batch=function(e,t,r){if(0===e.length)return n.nextTick(r);var s="readwrite";!0===t.sync&&(s="readwriteflush");var i=this._db.transaction(this._idbOpts.storeName,s),o=i.objectStore(this._idbOpts.storeName);i.onabort=function(){r(i.error)},i.oncomplete=function(){r()},e.forEach((function(e){"binary"!==a(t,e).keyEncoding||Array.isArray(e.key)||(e.key=Array.prototype.slice.call(e.key)),"del"===e.type?o.delete(e.key):o.put(e.value,e.key)}))},c.prototype._close=function(e){this._db.close(),n.nextTick(e)},c.prototype._approximateSize=function(e,t,r){var s=new Error("Not implemented");if(!r)throw s;n.nextTick((function(){r(s)}))},c.destroy=function(e,t){var n;if(null!=e&&"object"==typeof e)n=a({location:e.location,storeName:e.location},e._idbOpts);else{if("string"!=typeof e)throw new TypeError("location must be a string or an object");n={location:e,storeName:e}}if("string"!=typeof n.location)throw new TypeError("location must be a string");if("string"!=typeof n.storeName)throw new TypeError("db.storeName must be a string");var r=indexedDB.open(n.location);r.onerror=function(e){t(e.target.error)},r.onsuccess=function(){var e=r.result;function s(e){var n=indexedDB.deleteDatabase(e);n.onerror=function(e){t(e.target.error)},n.onsuccess=function(){t()}}if(e.close(),0!==e.objectStoreNames.length)if(e.objectStoreNames.contains(n.storeName)){var i=indexedDB.open(n.location,e.version+1);i.onerror=function(e){t(e.target.error)},i.onupgradeneeded=function(){(e=i.result).deleteObjectStore(n.storeName)},i.onsuccess=function(){(e=i.result).close(),0===e.objectStoreNames.length?s(n.location):t()}}else t();else s(n.location)}}}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"level-js",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/datastore-level/node_modules/level-js/index.js"}],[2334,{"abstract-leveldown":2338,inherits:4407,"level-codec":4786,"level-errors":4788},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("abstract-leveldown").AbstractLevelDOWN,s=e("abstract-leveldown").AbstractChainedBatch,i=e("abstract-leveldown").AbstractIterator,o=e("inherits"),a=e("level-codec"),c=e("level-errors").EncodingError;function u(e,t){if(!(this instanceof u))return new u(e,t);r.call(this,""),void 0===(t=t||{}).keyEncoding&&(t.keyEncoding="utf8"),void 0===t.valueEncoding&&(t.valueEncoding="utf8"),this.db=e,this.codec=new a(t)}function l(e,t){i.call(this,e),this.codec=e.codec,this.keys=t.keys,this.values=t.values,this.opts=this.codec.encodeLtgt(t),this.it=e.db.iterator(this.opts)}function d(e,t){s.call(this,e),this.codec=e.codec,this.batch=e.db.batch()}t.exports=u.default=u,o(u,r),u.prototype._serializeKey=u.prototype._serializeValue=function(e){return e},u.prototype._open=function(e,t){this.db.open(e,t)},u.prototype._close=function(e){this.db.close(e)},u.prototype._put=function(e,t,n,r){e=this.codec.encodeKey(e,n),t=this.codec.encodeValue(t,n),this.db.put(e,t,n,r)},u.prototype._get=function(e,t,n){var r=this;e=this.codec.encodeKey(e,t),t.asBuffer=this.codec.valueAsBuffer(t),this.db.get(e,t,(function(e,s){if(e)return n(e);try{s=r.codec.decodeValue(s,t)}catch(e){return n(new c(e))}n(null,s)}))},u.prototype._del=function(e,t,n){e=this.codec.encodeKey(e,t),this.db.del(e,t,n)},u.prototype._chainedBatch=function(){return new d(this)},u.prototype._batch=function(e,t,n){e=this.codec.encodeBatch(e,t),this.db.batch(e,t,n)},u.prototype._iterator=function(e){return e.keyAsBuffer=this.codec.keyAsBuffer(e),e.valueAsBuffer=this.codec.valueAsBuffer(e),new l(this,e)},u.prototype.approximateSize=function(e,t,n,r){return e=this.codec.encodeKey(e,n),t=this.codec.encodeKey(t,n),this.db.approximateSize(e,t,n,r)},o(l,i),l.prototype._next=function(e){var t=this;this.it.next((function(n,r,s){if(n)return e(n);try{r=t.keys&&void 0!==r?t.codec.decodeKey(r,t.opts):undefined,s=t.values&&void 0!==s?t.codec.decodeValue(s,t.opts):undefined}catch(n){return e(new c(n))}e(null,r,s)}))},l.prototype._seek=function(e){e=this.codec.encodeKey(e,this.opts),this.it.seek(e)},l.prototype._end=function(e){this.it.end(e)},o(d,s),d.prototype._put=function(e,t){e=this.codec.encodeKey(e),t=this.codec.encodeValue(t),this.batch.put(e,t)},d.prototype._del=function(e){e=this.codec.encodeKey(e),this.batch.del(e)},d.prototype._clear=function(){this.batch.clear()},d.prototype._write=function(e,t){this.batch.write(e,t)}}}},{package:"encoding-down",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/encoding-down/index.js"}],[5435,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r=function(e,t){var n=e.repeated?"repeated":e.required?"required":"optional";"map"===e.type&&(n="map<"+e.map.from+","+e.map.to+">"),e.oneof&&(n="");var r=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return r&&(r=" ["+r+"]"),t.push((n?n+" ":"")+("map"===e.map?"":e.type+" ")+e.name+" = "+e.tag+r+";"),t},s=function(e,t){t.push("message "+e.name+" {"),e.enums||(e.enums=[]),e.enums.forEach((function(e){t.push(i(e,[]))})),e.messages||(e.messages=[]),e.messages.forEach((function(e){t.push(s(e,[]))}));var n={};return e.fields||(e.fields=[]),e.fields.forEach((function(e){e.oneof?(n[e.oneof]||(n[e.oneof]=[]),n[e.oneof].push(r(e,[]))):t.push(r(e,[]))})),Object.keys(n).forEach((function(e){n[e].unshift("oneof "+e+" {"),n[e].push("}"),t.push(n[e])})),t.push("}",""),t},i=function(e,t){t.push("enum "+e.name+" {"),e.options||(e.options={});var n=a(e.options,[]);return n.length>1&&t.push(n.slice(0,-1)),Object.keys(e.values).map((function(n){var r=o(e.values[n]);t.push([n+" = "+r+";"])})),t.push("}",""),t},o=function(e,t){var n=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return n&&(n=" ["+n+"]"),e.value+n},a=function(e,t){var n=Object.keys(e);return n.forEach((function(n){var r=e[n];~n.indexOf(".")&&(n="("+n+")");var s=typeof r;"object"===s?(r=c(r,[])).length&&t.push("option "+n+" = {",r,"};"):("string"===s&&"optimize_for"!==n&&(r='"'+r+'"'),t.push("option "+n+" = "+r+";"))})),n.length>0&&t.push(""),t},c=function(e,t){return Object.keys(e).forEach((function(n){var r=e[n],s=typeof r;"object"===s?Array.isArray(r)?r.forEach((function(e){(e=c(e,[])).length&&t.push(n+" {",e,"}")})):(r=c(r,[])).length&&t.push(n+" {",r,"}"):("string"===s&&(r='"'+r+'"'),t.push(n+": "+r))})),t},u=function(e,t){var n="rpc "+e.name+"(";e.client_streaming&&(n+="stream "),n+=e.input_type+") returns (",e.server_streaming&&(n+="stream "),n+=e.output_type+")",e.options||(e.options={});var r=a(e.options,[]);return r.length>1?t.push(n+" {",r.slice(0,-1),"}"):t.push(n+";"),t},l=function(e){return function(t){return Array.isArray(t)?t.map(l(e+"  ")).join("\n"):e+t}};t.exports=function(e){var t=[];return t.push('syntax = "proto'+e.syntax+'";',""),e.package&&t.push("package "+e.package+";",""),e.options||(e.options={}),a(e.options,t),e.enums||(e.enums=[]),e.enums.forEach((function(e){i(e,t)})),e.messages||(e.messages=[]),e.messages.forEach((function(e){s(e,t)})),e.services&&e.services.forEach((function(e){!function(e,t){t.push("service "+e.name+" {"),e.options||(e.options={}),a(e.options,t),e.methods||(e.methods=[]),e.methods.forEach((function(e){t.push(u(e,[]))})),t.push("}","")}(e,t)})),t.map(l("")).join("\n")}}}},{package:"protocol-buffers-schema",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/protocol-buffers-schema/stringify.js"}],[5434,{"./tokenize":5436},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./tokenize"),s=["int32","int64","uint32","uint64","sint32","sint64","bool","fixed64","sfixed64","double","fixed32","sfixed32","float"],i=function(e){for(var t={};e.length;)switch(e[0]){case"[":case",":e.shift();var n=e.shift();if("("===n&&(n=e.shift(),e.shift()),"="!==e[0])throw new Error("Unexpected token in field options: "+e[0]);if(e.shift(),"]"===e[0])throw new Error("Unexpected ] in field option");t[n]=e.shift();break;case"]":return e.shift(),t;default:throw new Error("Unexpected token in field options: "+e[0])}throw new Error("No closing tag for field options")},o=function(e){for(var t={name:null,type:null,tag:-1,map:null,oneof:null,required:!1,repeated:!1,options:{}};e.length;)switch(e[0]){case"=":e.shift(),t.tag=Number(e.shift());break;case"map":if(t.type="map",t.map={from:null,to:null},e.shift(),"<"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.from=e.shift(),","!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.to=e.shift(),">"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);e.shift(),t.name=e.shift();break;case"repeated":case"required":case"optional":var n=e.shift();t.required="required"===n,t.repeated="repeated"===n,t.type=e.shift(),t.name=e.shift();break;case"[":t.options=i(e);break;case";":if(null===t.name)throw new Error("Missing field name");if(null===t.type)throw new Error("Missing type in message field: "+t.name);if(-1===t.tag)throw new Error("Missing tag number in message field: "+t.name);return e.shift(),t;default:throw new Error("Unexpected token in message field: "+e[0])}throw new Error("No ; found for message field")},a=function(e){for(var t={enums:[],messages:[],fields:[],extends:[],extensions:null};e.length;)switch(e[0]){case"map":case"repeated":case"optional":case"required":t.fields.push(o(e));break;case"enum":t.enums.push(p(e));break;case"message":t.messages.push(l(e));break;case"extensions":t.extensions=u(e);break;case"oneof":e.shift();var n=e.shift();if("{"!==e[0])throw new Error("Unexpected token in oneof: "+e[0]);for(e.shift();"}"!==e[0];){e.unshift("optional");var r=o(e);r.oneof=n,t.fields.push(r)}e.shift();break;case"extend":t.extends.push(c(e));break;case";":e.shift();break;case"reserved":case"option":for(e.shift();";"!==e[0];)e.shift();break;default:e.unshift("optional"),t.fields.push(o(e))}return t},c=function(e){return{name:e[1],message:l(e)}},u=function(e){e.shift();var t=Number(e.shift());if(isNaN(t))throw new Error("Invalid from in extensions definition");if("to"!==e.shift())throw new Error("Expected keyword 'to' in extensions definition");var n=e.shift();if("max"===n&&(n=536870911),n=Number(n),isNaN(n))throw new Error("Invalid to in extensions definition");if(";"!==e.shift())throw new Error("Missing ; in extensions definition");return{from:t,to:n}},l=function(e){e.shift();var t=1,n=[],r={name:e.shift(),enums:[],extends:[],messages:[],fields:[]};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("{"===e[0]?t++:"}"===e[0]&&t--,!t)return e.shift(),n=a(n),r.enums=n.enums,r.messages=n.messages,r.fields=n.fields,r.extends=n.extends,r.extensions=n.extensions,r;n.push(e.shift())}if(t)throw new Error("No closing tag for message")},d=function(e){e.shift();var t=e.shift();if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},h=function(e){if(e.shift(),"="!==e[0])throw new Error("Expected = but found "+e[0]);e.shift();var t=e.shift();switch(t){case'"proto2"':t=2;break;case'"proto3"':t=3;break;default:throw new Error("Expected protobuf syntax version but found "+t)}if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},f=function(e){if(e.length<4)throw new Error("Invalid enum value: "+e.slice(0,3).join(" "));if("="!==e[1])throw new Error("Expected = but found "+e[1]);if(";"!==e[3]&&"["!==e[3])throw new Error("Expected ; or [ but found "+e[1]);var t=e.shift();e.shift();var n={value:null,options:{}};return n.value=Number(e.shift()),"["===e[0]&&(n.options=i(e)),e.shift(),{name:t,val:n}},p=function(e){e.shift();var t={},n={name:e.shift(),values:{},options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),n;if("option"!==e[0]){var r=f(e);n.values[r.name]=r.val}else t=m(e),n.options[t.name]=t.value}throw new Error("No closing tag for enum")},m=function(e){for(var t=null,n=null,r=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")};e.length;){if(";"===e[0])return e.shift(),{name:t,value:n};switch(e[0]){case"option":e.shift();var s="("===e[0];if(s&&e.shift(),t=e.shift(),s){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}"."===e[0][0]&&(t+=e.shift());break;case"=":if(e.shift(),null===t)throw new Error("Expected key for option with value: "+e[0]);if(n=r(e.shift()),"optimize_for"===t&&!/^(SPEED|CODE_SIZE|LITE_RUNTIME)$/.test(n))throw new Error("Unexpected value for option optimize_for: "+n);"{"===n&&(n=g(e));break;default:throw new Error("Unexpected token in option: "+e[0])}}},g=function(e){for(var t=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")},n={};e.length;){if("}"===e[0])return e.shift(),n;var r="("===e[0];r&&e.shift();var s=e.shift();if(r){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}var i=null;switch(e[0]){case":":if(n[s]!==undefined)throw new Error("Duplicate option map key "+s);e.shift(),"{"===(i=t(e.shift()))&&(i=g(e)),n[s]=i,";"===e[0]&&e.shift();break;case"{":if(e.shift(),i=g(e),n[s]===undefined&&(n[s]=[]),!Array.isArray(n[s]))throw new Error("Duplicate option map key "+s);n[s].push(i);break;default:throw new Error("Unexpected token in option map: "+e[0])}}throw new Error("No closing tag for option map")},y=function(e){e.shift();var t=e.shift().replace(/^"+|"+$/gm,"");if(";"!==e[0])throw new Error("Unexpected token: "+e[0]+'. Expected ";"');return e.shift(),t},_=function(e){e.shift();var t={name:e.shift(),methods:[],options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;switch(e[0]){case"option":var n=m(e);if(t.options[n.name]!==undefined)throw new Error("Duplicate option "+n.name);t.options[n.name]=n.value;break;case"rpc":t.methods.push(b(e));break;default:throw new Error("Unexpected token in service: "+e[0])}}throw new Error("No closing tag for service")},b=function(e){e.shift();var t={name:e.shift(),input_type:null,output_type:null,client_streaming:!1,server_streaming:!1,options:{}};if("("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.client_streaming=!0),t.input_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),"returns"!==e[0])throw new Error("Expected returns but found "+e[0]);if(e.shift(),"("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.server_streaming=!0),t.output_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),";"===e[0])return e.shift(),t;if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;if("option"!==e[0])throw new Error("Unexpected token in rpc options: "+e[0]);var n=m(e);if(t.options[n.name]!==undefined)throw new Error("Duplicate option "+n.name);t.options[n.name]=n.value}throw new Error("No closing tag for rpc")};t.exports=function(e){for(var t=r(e.toString()),n=0;n<t.length;n++){var i;if(/^("|')([^'"]*)$/.test(t[n]))for(i=1===t[n].length?n+1:n;i<t.length;i++)if(/^([^'"]*)("|')$/.test(t[i])){t=t.slice(0,n).concat(t.slice(n,i+1).join("")).concat(t.slice(i+1));break}}for(var o={syntax:3,package:null,imports:[],enums:[],messages:[],options:{},extends:[]},a=!0;t.length;){switch(t[0]){case"package":o.package=d(t);break;case"syntax":if(!a)throw new Error("Protobuf syntax version should be first thing in file");o.syntax=h(t);break;case"message":o.messages.push(l(t));break;case"enum":o.enums.push(p(t));break;case"option":var u=m(t);if(o.options[u.name])throw new Error("Duplicate option "+u.name);o.options[u.name]=u.value;break;case"import":o.imports.push(y(t));break;case"extend":o.extends.push(c(t));break;case"service":o.services||(o.services=[]),o.services.push(_(t));break;default:throw new Error("Unexpected token: "+t[0])}a=!1}return o.extends.forEach((function(e){o.messages.forEach((function(t){t.name===e.name&&e.message.fields.forEach((function(e){if(!t.extensions||e.tag<t.extensions.from||e.tag>t.extensions.to)throw new Error(t.name+" does not declare "+e.tag+" as an extension number");t.fields.push(e)}))}))})),o.messages.forEach((function(e){e.fields.forEach((function(t){var n,r,i,a;if(t.options&&"true"===t.options.packed&&-1===s.indexOf(t.type)){if(-1===t.type.indexOf(".")){if(e.enums&&e.enums.some((function(e){return e.name===t.type})))return}else{if((n=t.type.split(".")).length>2)throw new Error("what is this?");if(r=n[0],i=n[1],o.messages.some((function(e){if(e.name===r)return a=e,e})),a&&a.enums&&a.enums.some((function(e){return e.name===i})))return}throw new Error("Fields of type "+t.type+" cannot be declared [packed=true]. "+"Only repeated fields of primitive numeric types (types which use "+'the varint, 32-bit, or 64-bit wire types) can be declared "packed". '+"See https://developers.google.com/protocol-buffers/docs/encoding#optional")}}))})),o}}}},{package:"protocol-buffers-schema",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/protocol-buffers-schema/parse.js"}],[5438,{"./utils":5442,buffer:2084,varint:6034},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("./utils").defined,s=e("varint");t.exports=function(e,t,i,o,a){for(var c=Object.keys(o),u=i.length,l={},d=0;d<u;d++){l[d]={p:s.encode(e.fields[d].tag<<3|2),h:s.encode(e.fields[d].tag<<3|i[d].type)};var h=e.fields[d];e.fields[d].packed=h.repeated&&h.options&&h.options.packed&&"false"!==h.options.packed}function f(e,t,n,r,i,o){var a=0;if(!i)for(a=0;a<n.length;a++)e[t++]=n[a];return r.message&&(s.encode(r.encodingLength(o),e,t),t+=s.encode.bytes),r.encode(o,e,t),t+r.encode.bytes}return function t(d,h,p){null==p&&(p=0),null==h&&(h=n.allocUnsafe(a(d)));var m=p,g=Object.keys(d),y=0,_=!1;for(y=0;y<c.length;y++){var b=c[y],v=o[y];if(g.indexOf(v)>-1){if(_)throw new Error("only one of the properties defined in oneof "+b+" can be set");_=!0}}for(y=0;y<u;y++){var w=i[y],k=e.fields[y],E=d[k.name],S=0;if(r(E)){var x,C=l[y].p,A=l[y].h,R=k.packed;if(k.map){var P=Object.keys(E);for(S=0;S<P.length;S++)P[S]={key:P[S],value:E[P[S]]};E=P}if(R){var M=0;for(S=0;S<E.length;S++)r(E[S])&&(M+=w.encodingLength(E[S]));if(M){for(S=0;S<A.length;S++)h[p++]=C[S];s.encode(M,h,p),p+=s.encode.bytes}}if(k.repeated)for(S=0;S<E.length;S++)x=E[S],r(x)&&(p=f(h,p,A,w,R,x));else p=f(h,p,A,w,R,E)}else if(k.required)throw new Error(k.name+" is required")}return t.bytes=p-m,h}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"protons",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/protons/src/compile/encode.js"}],[5439,{"./utils":5442,varint:6034},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./utils").defined,s=e("varint");t.exports=function(e,t,n){for(var i=Object.keys(n),o=t.length,a=new Array(o),c=0;c<e.fields.length;c++){a[c]=s.encodingLength(e.fields[c].tag<<3|t[c].type);var u=e.fields[c];e.fields[c].packed=u.repeated&&u.options&&u.options.packed&&"false"!==u.options.packed}return function(c){var u=0,l=0,d=0;for(l=0;l<i.length;l++){var h=i[l],f=n[h],p=!1;for(d=0;d<f.length;d++)if(r(c[f[d]])){if(p)throw new Error("only one of the properties defined in oneof "+h+" can be set");p=!0}}for(l=0;l<o;l++){var m,g=t[l],y=e.fields[l],_=c[y.name],b=a[l];if(r(_)){if(y.map){var v=Object.keys(_);for(d=0;d<v.length;d++)v[d]={key:v[d],value:_[v[d]]};_=v}if(y.packed){var w=0;for(d=0;d<_.length;d++)r(_[d])&&(w+=m=g.encodingLength(_[d]),g.message&&(w+=s.encodingLength(m)));w&&(u+=b+w+s.encodingLength(w))}else if(y.repeated)for(d=0;d<_.length;d++)r(_[d])&&(u+=b+(m=g.encodingLength(_[d]))+(g.message?s.encodingLength(m):0));else u+=b+(m=g.encodingLength(_))+(g.message?s.encodingLength(m):0)}else if(y.required)throw new Error(y.name+" is required")}return u}}}}},{package:"protons",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/protons/src/compile/encoding-length.js"}],[5437,{"./utils":5442,varint:6034},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("varint"),s=e("./utils").defined;var i=function(e,t,n){switch(e){case 0:return r.decode(t,n),n+r.decode.bytes;case 1:return n+8;case 2:var s=r.decode(t,n);return n+r.decode.bytes+s;case 3:case 4:throw new Error("Groups are not supported");case 5:return n+4;default:throw new Error("Unknown wire type: "+e)}},o=function(e,t){if(e.map)return{};if(e.repeated)return[];switch(e.type){case"string":return null!=t?t:"";case"bool":return"true"===t;case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return parseInt(t||0,10);default:return null}};t.exports=function(e,t,n){for(var a=[],c={},u=[],l=[],d=0;d<n.length;d++){var h=e.fields[d];c[h.tag]=d;var f=h.options&&h.options.default,p=t(h.type,e.id,!1);l[d]=[f,p&&p.values],e.fields[d].packed=h.repeated&&h.options&&h.options.packed&&"false"!==h.options.packed,h.required&&a.push(h.name),h.oneof&&u.push(h.name)}function m(e,t,n,s,i,o){var a=t.name;if(t.oneof)for(var c=Object.keys(n),l=0;l<c.length;l++)u.indexOf(c[l])>-1&&delete n[c[l]];if(e.message){var d=r.decode(s,i);i+=r.decode.bytes;var h=e.decode(s,i,i+d);t.map?(n[a]=n[a]||{},n[a][h.key]=h.value):t.repeated?(n[a]=n[a]||[],n[a].push(h)):n[a]=h}else t.repeated?(n[a]=n[a]||[],n[a].push(e.decode(s,i))):n[a]=e.decode(s,i);return i+=e.decode.bytes}return function t(d,h,f){if(null==h&&(h=0),null==f&&(f=d.length),!(f<=d.length&&h<=d.length))throw new Error("Decoded message is not valid");for(var p,g=h,y={};;){if(f<=h){var _,b,v="",w=0;for(w=0;w<a.length;w++)if(v=a[w],!s(y[v]))throw new Error("Decoded message is not valid, missing required field: "+v);for(w=0;w<n.length;w++)if(p=e.fields[w],b=l[w][0],_=l[w][1],v=p.name,!s(y[v])){var k=!1;if(p.oneof)for(var E=Object.keys(y),S=0;S<E.length;S++)if(u.indexOf(E[S])>-1){k=!0;break}k||(_?p.repeated?y[v]=[]:(b=b&&_[b]?_[b].value:_[Object.keys(_)[0]].value,y[v]=parseInt(b||0,10)):y[v]=o(p,b))}return t.bytes=h-g,y}var x=r.decode(d,h);h+=r.decode.bytes;var C=c[x>>3];if(null!=C){var A=n[C];if((p=e.fields[C]).packed){var R=r.decode(d,h);for(R+=h+=r.decode.bytes;h<R;)h=m(A,p,y,d,h)}else h=m(A,p,y,d,h)}else h=i(7&x,d,h)}}}}}},{package:"protons",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/protons/src/compile/decode.js"}],[5440,{"safe-buffer":5742,"signed-varint":5822,varint:6034},function(){with(this)return function(){"use strict";return function(e,t,n){var r,s,i,o=e("varint"),a=e("signed-varint"),c=e("safe-buffer").Buffer,u=function(e,t,n,r){return t.bytes=n.bytes=0,{type:e,encode:t,decode:n,encodingLength:r}};n.make=u,n.bytes=(r=function(e){return c.isBuffer(e)?e.length:c.byteLength(e)},u(2,s=function(e,t,n){var i=n,a=r(e);return o.encode(a,t,n),n+=o.encode.bytes,c.isBuffer(e)?e.copy(t,n):t.write(e,n,a),n+=a,s.bytes=n-i,t},i=function(e,t){var n=t,r=o.decode(e,t);t+=o.decode.bytes;var s=e.slice(t,t+r);return t+=s.length,i.bytes=t-n,s},(function(e){var t=r(e);return o.encodingLength(t)+t}))),n.string=function(){var e=function(t,n,r){var s=r,i=c.byteLength(t);return o.encode(i,n,r,"utf-8"),r+=o.encode.bytes,n.write(t,r,i),r+=i,e.bytes=r-s,n},t=function(e,n){var r=n,s=o.decode(e,n);n+=o.decode.bytes;var i=e.toString("utf-8",n,n+s);return n+=s,t.bytes=n-r,i};return u(2,e,t,(function(e){var t=c.byteLength(e);return o.encodingLength(t)+t}))}(),n.bool=function(){var e=function(t,n,r){return n[r]=t?1:0,e.bytes=1,n},t=function(e,n){var r=e[n]>0;return t.bytes=1,r};return u(0,e,t,(function(e){return 1}))}(),n.int32=function(){var e=function(t,n){var r=o.decode(t,n);return e.bytes=o.decode.bytes,r>2147483647?r-4294967296:r};return u(0,o.encode,e,(function(e){return o.encodingLength(e<0?e+4294967296:e)}))}(),n.int64=function(){var e=function(t,n){var r=o.decode(t,n);if(r>=Math.pow(2,63)){for(var s=9;255===t[n+s-1];)s--;s=s||9;var i=c.allocUnsafe(s);t.copy(i,0,n,n+s),i[s-1]=127&i[s-1],r=-1*o.decode(i,0),e.bytes=10}else e.bytes=o.decode.bytes;return r},t=function(e,n,r){if(e<0){var s=r+9;for(o.encode(-1*e,n,r),n[r+=o.encode.bytes-1]=128|n[r];r<s-1;)n[++r]=255;n[s]=1,t.bytes=10}else o.encode(e,n,r),t.bytes=o.encode.bytes;return n};return u(0,t,e,(function(e){return e<0?10:o.encodingLength(e)}))}(),n.sint32=n.sint64=u(0,a.encode,a.decode,a.encodingLength),n.uint32=n.uint64=n.enum=n.varint=u(0,o.encode,o.decode,o.encodingLength),n.fixed64=n.sfixed64=function(){var e=function(t,n,r){return t.copy(n,r),e.bytes=8,n},t=function(e,n){var r=e.slice(n,n+8);return t.bytes=8,r};return u(1,e,t,(function(e){return 8}))}(),n.double=function(){var e=function(t,n,r){return n.writeDoubleLE(t,r),e.bytes=8,n},t=function(e,n){var r=e.readDoubleLE(n);return t.bytes=8,r};return u(1,e,t,(function(e){return 8}))}(),n.fixed32=function(){var e=function(t,n,r){return n.writeUInt32LE(t,r),e.bytes=4,n},t=function(e,n){var r=e.readUInt32LE(n);return t.bytes=4,r};return u(5,e,t,(function(e){return 4}))}(),n.sfixed32=function(){var e=function(t,n,r){return n.writeInt32LE(t,r),e.bytes=4,n},t=function(e,n){var r=e.readInt32LE(n);return t.bytes=4,r};return u(5,e,t,(function(e){return 4}))}(),n.float=function(){var e=function(t,n,r){return n.writeFloatLE(t,r),e.bytes=4,n},t=function(e,n){var r=e.readFloatLE(n);return t.bytes=4,r};return u(5,e,t,(function(e){return 4}))}()}}},{package:"protons",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/protons/src/compile/encodings.js"}],[4835,{"./blake":4833,"./crypto-sha1-2":4834,"./utils":4837,buffer:2084,"js-sha3":4722,murmurhash3js:5257},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("js-sha3"),s=e("murmurhash3js"),i=e("./utils"),o=e("./crypto-sha1-2"),a=i.toCallback,c=i.toBuf,u=i.fromString,l=i.fromNumberTo32BitBuf;t.exports={sha1:o.sha1,sha2256:o.sha2256,sha2512:o.sha2512,sha3512:a(c(r.sha3_512)),sha3384:a(c(r.sha3_384)),sha3256:a(c(r.sha3_256)),sha3224:a(c(r.sha3_224)),shake128:a(c(r.shake_128,128)),shake256:a(c(r.shake_256,256)),keccak224:a(c(r.keccak_224)),keccak256:a(c(r.keccak_256)),keccak384:a(c(r.keccak_384)),keccak512:a(c(r.keccak_512)),murmur3128:a(c(u(s.x64.hash128))),murmur332:a(l(u(s.x86.hash32))),addBlake:e("./blake"),dblSha2256:(e,t)=>{o.sha2256(e,((e,r)=>{e&&t(e),o.sha2256(n.from(r),t)}))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-crypto/node_modules/multihashing-async/src/crypto.js"}],[4863,{"./../util":4867,"asn1.js":1688},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("asn1.js"),s=e("./../util"),i=s.toBase64,o=s.toBn,a=r.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())})),c=r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid({"1.2.840.113549.1.1.1":"rsa"}),this.key("none").optional().null_(),this.key("curve").optional().objid(),this.key("params").optional().seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()))})),u=r.define("RSAPublicKey",(function(){this.seq().obj(this.key("algorithm").use(c),this.key("subjectPublicKey").bitstr())})),l=r.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));n.pkcs1ToJwk=function(e){const t=a.decode(e,"der");return{kty:"RSA",n:i(t.modulus),e:i(t.publicExponent),d:i(t.privateExponent),p:i(t.prime1),q:i(t.prime2),dp:i(t.exponent1),dq:i(t.exponent2),qi:i(t.coefficient),alg:"RS256",kid:"2011-04-29"}},n.jwkToPkcs1=function(e){return a.encode({version:0,modulus:o(e.n),publicExponent:o(e.e),privateExponent:o(e.d),prime1:o(e.p),prime2:o(e.q),exponent1:o(e.dp),exponent2:o(e.dq),coefficient:o(e.qi)},"der")},n.pkixToJwk=function(e){const t=u.decode(e,"der"),n=l.decode(t.subjectPublicKey.data,"der");return{kty:"RSA",n:i(n.modulus),e:i(n.publicExponent),alg:"RS256",kid:"2011-04-29"}},n.jwkToPkix=function(e){return u.encode({algorithm:{algorithm:"rsa",none:null},subjectPublicKey:{data:l.encode({modulus:o(e.n),publicExponent:o(e.e)},"der")}},"der")}}}},{package:"libp2p-crypto",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-crypto/src/keys/rsa-utils.js"}],[5286,{"./forge":5272,"./util":5294,_process:5423,crypto:2083},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=e("./forge");e("./util");var s=null;!r.util.isNodejs||r.options.usePureJavaScript||n.versions["node-webkit"]||(s=e("crypto")),(t.exports=r.prng=r.prng||{}).create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=e.md,i=new Array(32),o=0;o<32;++o)i[o]=n.create();function a(){if(t.pools[0].messageLength>=32)return c();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),c()}function c(){t.reseeds=4294967295===t.reseeds?0:t.reseeds+1;var e=t.plugin.md.create();e.update(t.keyBytes);for(var n=1,r=0;r<32;++r)t.reseeds%n==0&&(e.update(t.pools[r].digest().getBytes()),t.pools[r].start()),n<<=1;t.keyBytes=e.digest().getBytes(),e.start(),e.update(t.keyBytes);var s=e.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(s),t.generated=0}function u(e){var t=null,n=r.util.globalScope,s=n.crypto||n.msCrypto;s&&s.getRandomValues&&(t=function(e){return s.getRandomValues(e)});var i=r.util.createBuffer();if(t)for(;i.length()<e;){var o=Math.max(1,Math.min(e-i.length(),65536)/4),a=new Uint32Array(Math.floor(o));try{t(a);for(var c=0;c<a.length;++c)i.putInt32(a[c])}catch(e){if(!("undefined"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(i.length()<e)for(var u,l,d,h=Math.floor(65536*Math.random());i.length()<e;){l=16807*(65535&h),l+=(32767&(u=16807*(h>>16)))<<16,h=4294967295&(l=(2147483647&(l+=u>>15))+(l>>31));for(c=0;c<3;++c)d=h>>>(c<<3),d^=Math.floor(256*Math.random()),i.putByte(255&d)}return i.getBytes(e)}return t.pools=i,t.pool=0,t.generate=function(e,n){if(!n)return t.generateSync(e);var s=t.plugin.cipher,i=t.plugin.increment,o=t.plugin.formatKey,a=t.plugin.formatSeed,u=r.util.createBuffer();t.key=null,function l(d){if(d)return n(d);if(u.length()>=e)return n(null,u.getBytes(e));t.generated>1048575&&(t.key=null);if(null===t.key)return r.util.nextTick((function(){!function(e){if(t.pools[0].messageLength>=32)return c(),e();var n=32-t.pools[0].messageLength<<5;t.seedFile(n,(function(n,r){if(n)return e(n);t.collect(r),c(),e()}))}(l)}));var h=s(t.key,t.seed);t.generated+=h.length,u.putBytes(h),t.key=o(s(t.key,i(t.seed))),t.seed=a(s(t.key,t.seed)),r.util.setImmediate(l)}()},t.generateSync=function(e){var n=t.plugin.cipher,s=t.plugin.increment,i=t.plugin.formatKey,o=t.plugin.formatSeed;t.key=null;for(var c=r.util.createBuffer();c.length()<e;){t.generated>1048575&&(t.key=null),null===t.key&&a();var u=n(t.key,t.seed);t.generated+=u.length,c.putBytes(u),t.key=i(n(t.key,s(t.seed))),t.seed=o(n(t.key,t.seed))}return c.getBytes(e)},s?(t.seedFile=function(e,t){s.randomBytes(e,(function(e,n){if(e)return t(e);t(null,n.toString())}))},t.seedFileSync=function(e){return s.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,u(e))}catch(e){t(e)}},t.seedFileSync=u),t.collect=function(e){for(var n=e.length,r=0;r<n;++r)t.pools[t.pool].update(e.substr(r,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,n){for(var r="",s=0;s<n;s+=8)r+=String.fromCharCode(e>>s&255);t.collect(r)},t.registerWorker=function(e){if(e===self)t.seedFile=function(e,t){self.addEventListener("message",(function e(n){var r=n.data;r.forge&&r.forge.prng&&(self.removeEventListener("message",e),t(r.forge.prng.err,r.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:e}}})};else{e.addEventListener("message",(function(n){var r=n.data;r.forge&&r.forge.prng&&t.seedFile(r.forge.prng.needed,(function(t,n){e.postMessage({forge:{prng:{err:t,bytes:n}}})}))}))}},t}}).call(this)}).call(this,e("_process"))}}},{package:"node-forge",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/node-forge/lib/prng.js"}],[5292,{"./forge":5272,"./md":5275,"./util":5294},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./forge");e("./md"),e("./util");var s=t.exports=r.sha256=r.sha256||{};r.md.sha256=r.md.algorithms.sha256=s,s.create=function(){o||(i=String.fromCharCode(128),i+=r.util.fillString(String.fromCharCode(0),64),a=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=!0);var e=null,t=r.util.createBuffer(),n=new Array(64),s={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var n=s.messageLengthSize/4,i=0;i<n;++i)s.fullMessageLength.push(0);return t=r.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},s}};return s.start(),s.update=function(i,o){"utf8"===o&&(i=r.util.encodeUtf8(i));var a=i.length;s.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var u=s.fullMessageLength.length-1;u>=0;--u)s.fullMessageLength[u]+=a[1],a[1]=a[0]+(s.fullMessageLength[u]/4294967296>>>0),s.fullMessageLength[u]=s.fullMessageLength[u]>>>0,a[0]=a[1]/4294967296>>>0;return t.putBytes(i),c(e,n,t),(t.read>2048||0===t.length())&&t.compact(),s},s.digest=function(){var o=r.util.createBuffer();o.putBytes(t.bytes());var a,u=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize&s.blockLength-1;o.putBytes(i.substr(0,s.blockLength-u));for(var l=8*s.fullMessageLength[0],d=0;d<s.fullMessageLength.length-1;++d)l+=(a=8*s.fullMessageLength[d+1])/4294967296>>>0,o.putInt32(l>>>0),l=a>>>0;o.putInt32(l);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};c(h,n,o);var f=r.util.createBuffer();return f.putInt32(h.h0),f.putInt32(h.h1),f.putInt32(h.h2),f.putInt32(h.h3),f.putInt32(h.h4),f.putInt32(h.h5),f.putInt32(h.h6),f.putInt32(h.h7),f},s};var i=null,o=!1,a=null;function c(e,t,n){for(var r,s,i,o,c,u,l,d,h,f,p,m,g,y=n.length();y>=64;){for(c=0;c<16;++c)t[c]=n.getInt32();for(;c<64;++c)r=((r=t[c-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,s=((s=t[c-15])>>>7|s<<25)^(s>>>18|s<<14)^s>>>3,t[c]=r+t[c-7]+s+t[c-16]|0;for(u=e.h0,l=e.h1,d=e.h2,h=e.h3,f=e.h4,p=e.h5,m=e.h6,g=e.h7,c=0;c<64;++c)i=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),o=u&l|d&(u^l),r=g+((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(m^f&(p^m))+a[c]+t[c],g=m,m=p,p=f,f=h+r>>>0,h=d,d=l,l=u,u=r+(s=i+o)>>>0;e.h0=e.h0+u|0,e.h1=e.h1+l|0,e.h2=e.h2+d|0,e.h3=e.h3+h|0,e.h4=e.h4+f|0,e.h5=e.h5+p|0,e.h6=e.h6+m|0,e.h7=e.h7+g|0,y-=64}}}}},{package:"node-forge",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/node-forge/lib/sha256.js"}],[5291,{"./forge":5272,"./md":5275,"./util":5294},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./forge");e("./md"),e("./util");var s=t.exports=r.sha1=r.sha1||{};r.md.sha1=r.md.algorithms.sha1=s,s.create=function(){o||(i=String.fromCharCode(128),i+=r.util.fillString(String.fromCharCode(0),64),o=!0);var e=null,t=r.util.createBuffer(),n=new Array(80),s={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){s.messageLength=0,s.fullMessageLength=s.messageLength64=[];for(var n=s.messageLengthSize/4,i=0;i<n;++i)s.fullMessageLength.push(0);return t=r.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},s}};return s.start(),s.update=function(i,o){"utf8"===o&&(i=r.util.encodeUtf8(i));var c=i.length;s.messageLength+=c,c=[c/4294967296>>>0,c>>>0];for(var u=s.fullMessageLength.length-1;u>=0;--u)s.fullMessageLength[u]+=c[1],c[1]=c[0]+(s.fullMessageLength[u]/4294967296>>>0),s.fullMessageLength[u]=s.fullMessageLength[u]>>>0,c[0]=c[1]/4294967296>>>0;return t.putBytes(i),a(e,n,t),(t.read>2048||0===t.length())&&t.compact(),s},s.digest=function(){var o=r.util.createBuffer();o.putBytes(t.bytes());var c,u=s.fullMessageLength[s.fullMessageLength.length-1]+s.messageLengthSize&s.blockLength-1;o.putBytes(i.substr(0,s.blockLength-u));for(var l=8*s.fullMessageLength[0],d=0;d<s.fullMessageLength.length-1;++d)l+=(c=8*s.fullMessageLength[d+1])/4294967296>>>0,o.putInt32(l>>>0),l=c>>>0;o.putInt32(l);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};a(h,n,o);var f=r.util.createBuffer();return f.putInt32(h.h0),f.putInt32(h.h1),f.putInt32(h.h2),f.putInt32(h.h3),f.putInt32(h.h4),f},s};var i=null,o=!1;function a(e,t,n){for(var r,s,i,o,a,c,u,l=n.length();l>=64;){for(s=e.h0,i=e.h1,o=e.h2,a=e.h3,c=e.h4,u=0;u<16;++u)r=n.getInt32(),t[u]=r,r=(s<<5|s>>>27)+(a^i&(o^a))+c+1518500249+r,c=a,a=o,o=(i<<30|i>>>2)>>>0,i=s,s=r;for(;u<20;++u)r=(r=t[u-3]^t[u-8]^t[u-14]^t[u-16])<<1|r>>>31,t[u]=r,r=(s<<5|s>>>27)+(a^i&(o^a))+c+1518500249+r,c=a,a=o,o=(i<<30|i>>>2)>>>0,i=s,s=r;for(;u<32;++u)r=(r=t[u-3]^t[u-8]^t[u-14]^t[u-16])<<1|r>>>31,t[u]=r,r=(s<<5|s>>>27)+(i^o^a)+c+1859775393+r,c=a,a=o,o=(i<<30|i>>>2)>>>0,i=s,s=r;for(;u<40;++u)r=(r=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|r>>>30,t[u]=r,r=(s<<5|s>>>27)+(i^o^a)+c+1859775393+r,c=a,a=o,o=(i<<30|i>>>2)>>>0,i=s,s=r;for(;u<60;++u)r=(r=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|r>>>30,t[u]=r,r=(s<<5|s>>>27)+(i&o|a&(i^o))+c+2400959708+r,c=a,a=o,o=(i<<30|i>>>2)>>>0,i=s,s=r;for(;u<80;++u)r=(r=t[u-6]^t[u-16]^t[u-28]^t[u-32])<<2|r>>>30,t[u]=r,r=(s<<5|s>>>27)+(i^o^a)+c+3395469782+r,c=a,a=o,o=(i<<30|i>>>2)>>>0,i=s,s=r;e.h0=e.h0+s|0,e.h1=e.h1+i|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,e.h4=e.h4+c|0,l-=64}}}}},{package:"node-forge",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/node-forge/lib/sha1.js"}],[5270,{"./forge":5272,"./util":5294},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./forge");e("./util"),r.cipher=r.cipher||{};var s=t.exports=r.cipher.modes=r.cipher.modes||{};function i(e,t){if("string"==typeof e&&(e=r.util.createBuffer(e)),r.util.isArray(e)&&e.length>4){var n=e;e=r.util.createBuffer();for(var s=0;s<n.length;++s)e.putByte(n[s])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!r.util.isArray(e)){var i=[],o=t/4;for(s=0;s<o;++s)i.push(e.getInt32());e=i}return e}function o(e){e[e.length-1]=e[e.length-1]+1&4294967295}function a(e){return[e/4294967296|0,4294967295&e]}s.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},s.ecb.prototype.start=function(e){},s.ecb.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])},s.ecb.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])},s.ecb.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},s.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return!(r>this.blockSize<<2)&&(e.truncate(r),!0)},s.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},s.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},s.cbc.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(r=0;r<this._ints;++r)t.putInt32(this._outBlock[r]);this._prev=this._outBlock},s.cbc.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(r=0;r<this._ints;++r)t.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)},s.cbc.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0},s.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return!(r>this.blockSize<<2)&&(e.truncate(r),!0)},s.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},s.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},s.cfb.prototype.encrypt=function(e,t,n){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var s=0;s<this._ints;++s)this._inBlock[s]=e.getInt32()^this._outBlock[s],t.putInt32(this._inBlock[s]);else{var i=(this.blockSize-r)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(s=0;s<this._ints;++s)this._partialBlock[s]=e.getInt32()^this._outBlock[s],this._partialOutput.putInt32(this._partialBlock[s]);if(i>0)e.read-=this.blockSize;else for(s=0;s<this._ints;++s)this._inBlock[s]=this._partialBlock[s];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!n)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},s.cfb.prototype.decrypt=function(e,t,n){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var s=0;s<this._ints;++s)this._inBlock[s]=e.getInt32(),t.putInt32(this._inBlock[s]^this._outBlock[s]);else{var i=(this.blockSize-r)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(s=0;s<this._ints;++s)this._partialBlock[s]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[s]^this._outBlock[s]);if(i>0)e.read-=this.blockSize;else for(s=0;s<this._ints;++s)this._inBlock[s]=this._partialBlock[s];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!n)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},s.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},s.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},s.ofb.prototype.encrypt=function(e,t,n){var r=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var s=0;s<this._ints;++s)t.putInt32(e.getInt32()^this._outBlock[s]),this._inBlock[s]=this._outBlock[s];else{var i=(this.blockSize-r)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(s=0;s<this._ints;++s)this._partialOutput.putInt32(e.getInt32()^this._outBlock[s]);if(i>0)e.read-=this.blockSize;else for(s=0;s<this._ints;++s)this._inBlock[s]=this._outBlock[s];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!n)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}},s.ofb.prototype.decrypt=s.ofb.prototype.encrypt,s.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},s.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=i(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},s.ctr.prototype.encrypt=function(e,t,n){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize)for(var s=0;s<this._ints;++s)t.putInt32(e.getInt32()^this._outBlock[s]);else{var i=(this.blockSize-r)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(s=0;s<this._ints;++s)this._partialOutput.putInt32(e.getInt32()^this._outBlock[s]);if(i>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!n)return t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}o(this._inBlock)},s.ctr.prototype.decrypt=s.ctr.prototype.encrypt,s.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0,this._R=3774873600},s.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,n=r.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?r.util.createBuffer(e.additionalData):r.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=r.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var s=n.length();if(12===s)this._j0=[n.getInt32(),n.getInt32(),n.getInt32(),1];else{for(this._j0=[0,0,0,0];n.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(a(8*s)))}this._inBlock=this._j0.slice(0),o(this._inBlock),this._partialBytes=0,t=r.util.createBuffer(t),this._aDataLength=a(8*t.length());var i=t.length()%this.blockSize;for(i&&t.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},s.gcm.prototype.encrypt=function(e,t,n){var r=e.length();if(0===r)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&r>=this.blockSize){for(var s=0;s<this._ints;++s)t.putInt32(this._outBlock[s]^=e.getInt32());this._cipherLength+=this.blockSize}else{var i=(this.blockSize-r)%this.blockSize;i>0&&(i=this.blockSize-i),this._partialOutput.clear();for(s=0;s<this._ints;++s)this._partialOutput.putInt32(e.getInt32()^this._outBlock[s]);if(i<=0||n){if(n){var a=r%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(s=0;s<this._ints;++s)this._outBlock[s]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),i>0&&!n)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=i,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),o(this._inBlock)},s.gcm.prototype.decrypt=function(e,t,n){var r=e.length();if(r<this.blockSize&&!(n&&r>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),o(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var s=0;s<this._ints;++s)t.putInt32(this._outBlock[s]^this._hashBlock[s]);r<this.blockSize?this._cipherLength+=r%this.blockSize:this._cipherLength+=this.blockSize},s.gcm.prototype.afterFinish=function(e,t){var n=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=r.util.createBuffer();var s=this._aDataLength.concat(a(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,s);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n},s.gcm.prototype.multiply=function(e,t){for(var n=[0,0,0,0],r=t.slice(0),s=0;s<128;++s){e[s/32|0]&1<<31-s%32&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r)}return n},s.gcm.prototype.pow=function(e,t){for(var n=1&e[3],r=3;r>0;--r)t[r]=e[r]>>>1|(1&e[r-1])<<31;t[0]=e[0]>>>1,n&&(t[0]^=this._R)},s.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],n=0;n<32;++n){var r=e[n/8|0]>>>4*(7-n%8)&15,s=this._m[n][r];t[0]^=s[0],t[1]^=s[1],t[2]^=s[2],t[3]^=s[3]}return t},s.gcm.prototype.ghash=function(e,t,n){return t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],this.tableMultiply(t)},s.gcm.prototype.generateHashTable=function(e,t){for(var n=8/t,r=4*n,s=16*n,i=new Array(s),o=0;o<s;++o){var a=[0,0,0,0],c=(r-1-o%r)*t;a[o/r|0]=1<<t-1<<c,i[o]=this.generateSubHashTable(this.multiply(a,e),t)}return i},s.gcm.prototype.generateSubHashTable=function(e,t){var n=1<<t,r=n>>>1,s=new Array(n);s[r]=e.slice(0);for(var i=r>>>1;i>0;)this.pow(s[2*i],s[i]=[]),i>>=1;for(i=2;i<r;){for(var o=1;o<i;++o){var a=s[i],c=s[o];s[i+o]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}i*=2}for(s[0]=[0,0,0,0],i=r+1;i<n;++i){var u=s[i^r];s[i]=[e[0]^u[0],e[1]^u[1],e[2]^u[2],e[3]^u[3]]}return s}}}},{package:"node-forge",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/node-forge/lib/cipherModes.js"}],[5269,{"./forge":5272,"./util":5294},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./forge");e("./util"),t.exports=r.cipher=r.cipher||{},r.cipher.algorithms=r.cipher.algorithms||{},r.cipher.createCipher=function(e,t){var n=e;if("string"==typeof n&&(n=r.cipher.getAlgorithm(n))&&(n=n()),!n)throw new Error("Unsupported algorithm: "+e);return new r.cipher.BlockCipher({algorithm:n,key:t,decrypt:!1})},r.cipher.createDecipher=function(e,t){var n=e;if("string"==typeof n&&(n=r.cipher.getAlgorithm(n))&&(n=n()),!n)throw new Error("Unsupported algorithm: "+e);return new r.cipher.BlockCipher({algorithm:n,key:t,decrypt:!0})},r.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),r.cipher.algorithms[e]=t},r.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in r.cipher.algorithms?r.cipher.algorithms[e]:null};var s=r.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};s.prototype.start=function(e){e=e||{};var t={};for(var n in e)t[n]=e[n];t.decrypt=this._decrypt,this._finish=!1,this._input=r.util.createBuffer(),this.output=e.output||r.util.createBuffer(),this.mode.start(t)},s.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},s.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}}}},{package:"node-forge",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/node-forge/lib/cipher.js"}],[4867,{"asn1.js":1688,buffer:2084},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){const r=e("asn1.js").bignum;n.toBase64=function(e,n){return e.toArrayLike(t,"be",n).toString("base64").replace(/(=*)$/,"").replace(/\+/g,"-").replace(/\//g,"_")},n.toBn=function(e){return new r(t.from(e,"base64"))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"libp2p-crypto",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-crypto/src/util.js"}],[1688,{"./asn1/api":1689,"./asn1/base":1691,"./asn1/constants":1695,"./asn1/decoders":1697,"./asn1/encoders":1700,"bn.js":2040},function(){with(this)return function(){"use strict";return function(e,t,n){const r=n;r.bignum=e("bn.js"),r.define=e("./asn1/api").define,r.base=e("./asn1/base"),r.constants=e("./asn1/constants"),r.decoders=e("./asn1/decoders"),r.encoders=e("./asn1/encoders")}}},{package:"asn1.js",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/asn1.js/lib/asn1.js"}],[4828,{"./blake":4826,"./crypto-sha1-2":4827,"./utils":4830,buffer:2084,"js-sha3":4722,murmurhash3js:5257},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("js-sha3"),s=e("murmurhash3js"),i=e("./utils"),o=e("./crypto-sha1-2"),a=i.toCallback,c=i.toBuf,u=i.fromString,l=i.fromNumberTo32BitBuf;t.exports={sha1:o.sha1,sha2256:o.sha2256,sha2512:o.sha2512,sha3512:a(c(r.sha3_512)),sha3384:a(c(r.sha3_384)),sha3256:a(c(r.sha3_256)),sha3224:a(c(r.sha3_224)),shake128:a(c(r.shake_128,128)),shake256:a(c(r.shake_256,256)),keccak224:a(c(r.keccak_224)),keccak256:a(c(r.keccak_256)),keccak384:a(c(r.keccak_384)),keccak512:a(c(r.keccak_512)),murmur3128:a(c(u(s.x64.hash128))),murmur332:a(l(u(s.x86.hash32))),addBlake:e("./blake"),dblSha2256:(e,t)=>{o.sha2256(e,((e,r)=>{e&&t(e),o.sha2256(n.from(r),t)}))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"multihashing-async",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-crypto/node_modules/libp2p-crypto-secp256k1/node_modules/multihashing-async/src/crypto.js"}],[4838,{"./lib":4841,"./lib/js":4847},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("./lib")(e("./lib/js"))}}},{package:"secp256k1",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-crypto/node_modules/secp256k1/js.js"}],[4675,{"../util":4679,"./../dag-link":4667,buffer:2084},function(){with(this)return function(){"use strict";return function(e,t,n){(function(r){(function(){const s=e("./../dag-link"),{cid:i,serialize:o}=e("../util");(n=t.exports).cloneData=function(e){let t;return e.Data&&e.Data.length>0?(t=r.alloc(e.Data.length),e.Data.copy(t)):t=r.alloc(0),t},n.cloneLinks=function(e){return e.Links.slice()},n.linkSort=function(e,t){return r.compare(e.nameAsBuffer,t.nameAsBuffer)},n.toDAGLink=async(e,t={})=>{const n=o(e),r=await i(n);return new s(t.name||"",n.length,r)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ipld-dag-pb",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipld-dag-pb/src/dag-node/util.js"}],[5866,{},function(){with(this)return function(){"use strict";return function(e,t,n){
//! stable.js 0.1.8, https://github.com/Two-Screen/stable
//! © 2018 Angry Bytes and contributors. MIT licensed.
!function(e,r){"object"==typeof n&&void 0!==t?t.exports=r():"function"==typeof define&&define.amd?define(r):e.stable=r()}(this,(function(){var e=function(e,n){return t(e.slice(),n)};function t(e,t){"function"!=typeof t&&(t=function(e,t){return String(e).localeCompare(t)});var r=e.length;if(r<=1)return e;for(var s=new Array(r),i=1;i<r;i*=2){n(e,t,i,s);var o=e;e=s,s=o}return e}e.inplace=function(e,r){var s=t(e,r);return s!==e&&n(s,null,e.length,e),e};var n=function(e,t,n,r){var s,i,o,a,c,u=e.length,l=0,d=2*n;for(s=0;s<u;s+=d)for(o=(i=s+n)+n,i>u&&(i=u),o>u&&(o=u),a=s,c=i;;)if(a<i&&c<o)t(e[a],e[c])<=0?r[l++]=e[a++]:r[l++]=e[c++];else if(a<i)r[l++]=e[a++];else{if(!(c<o))break;r[l++]=e[c++]}};return e}))}}},{package:"stable",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/stable/stable.js"}],[5241,{buffer:2084},function(){with(this)return function(){"use strict";return function(e,t,n){const{Buffer:r}=e("buffer"),s=self.crypto||self.msCrypto;t.exports=e=>{if("undefined"==typeof self||!self.crypto&&!self.msCrypto)throw new Error("Please use a browser with webcrypto support and ensure the code has been delivered securely via HTTPS/TLS and run within a Secure Context");return async t=>{switch(e){case"sha1":return r.from(await s.subtle.digest({name:"SHA-1"},t));case"sha2-256":return r.from(await s.subtle.digest({name:"SHA-256"},t));case"sha2-512":return r.from(await s.subtle.digest({name:"SHA-512"},t));case"dbl-sha2-256":{const e=await s.subtle.digest({name:"SHA-256"},t);return r.from(await s.subtle.digest({name:"SHA-256"},e))}default:throw new Error(`${e} is not a supported algorithm`)}}}}}},{package:"multihashing-async",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/multihashing-async/src/sha.browser.js"}],[5242,{buffer:2084},function(){with(this)return function(){"use strict";return function(e,t,n){const{Buffer:r}=e("buffer");t.exports={fromNumberTo32BitBuf:e=>{const t=new Array(4);for(let n=0;n<4;n++)t[n]=255&e,e>>=8;return r.from(t)}}}}},{package:"multihashing-async",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/multihashing-async/src/utils.js"}],[5238,{blakejs:2037,buffer:2084},function(){with(this)return function(){"use strict";return function(e,t,n){const{Buffer:r}=e("buffer"),s=e("blakejs"),i={init:s.blake2bInit,update:s.blake2bUpdate,digest:s.blake2bFinal},o={init:s.blake2sInit,update:s.blake2sUpdate,digest:s.blake2sFinal},a=(e,t)=>async n=>{const s=t.init(e,null);return t.update(s,n),r.from(t.digest(s))};t.exports=e=>{for(let t=0;t<64;t++)e[45569+t]=a(t+1,i);for(let t=0;t<32;t++)e[45633+t]=a(t+1,o)}}}},{package:"multihashing-async",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/multihashing-async/src/blake.js"}],[5255,{"./lib/murmurHash3js":5256},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("./lib/murmurHash3js")}}},{package:"murmurhash3js-revisited",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/murmurhash3js-revisited/index.js"}],[4691,{},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e,t){this.value=e,this.next=t}t.exports=r,r.prototype.contains=function(e){for(var t=this;t;){if(t.value===e)return!0;t=t.next}return!1}}}},{package:"is-circular",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/is-circular/lib/node.js"}],[4419,{},function(){with(this)return function(){"use strict";return function(e,t,n){const r="(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}",s="[0-9a-fA-F]{1,4}",i=`\n(\n(?:${s}:){7}(?:${s}|:)|                                // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${s}:){6}(?:${r}|:${s}|:)|                         // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${s}:){5}(?::${r}|(:${s}){1,2}|:)|                 // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${s}:){4}(?:(:${s}){0,1}:${r}|(:${s}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${s}:){3}(?:(:${s}){0,2}:${r}|(:${s}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${s}:){2}(?:(:${s}){0,3}:${r}|(:${s}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${s}:){1}(?:(:${s}){0,4}:${r}|(:${s}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::((?::${s}){0,5}:${r}|(?::${s}){1,7}|:))           // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(%[0-9a-zA-Z]{1,})?                                           // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=t.exports=e=>e&&e.exact?new RegExp(`(?:^${r}$)|(?:^${i}$)`):new RegExp(`(?:${r})|(?:${i})`,"g");o.v4=e=>e&&e.exact?new RegExp(`^${r}$`):new RegExp(r,"g"),o.v6=e=>e&&e.exact?new RegExp(`^${i}$`):new RegExp(i,"g")}}},{package:"ip-regex",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ip-regex/index.js"}],[2036,{"./util":2038},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./util");function s(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function i(e,t,n,r,s,i){u[e]=u[e]+u[t]+s,u[r]=o(u[r]^u[e],16),u[n]=u[n]+u[r],u[t]=o(u[t]^u[n],12),u[e]=u[e]+u[t]+i,u[r]=o(u[r]^u[e],8),u[n]=u[n]+u[r],u[t]=o(u[t]^u[n],7)}function o(e,t){return e>>>t^e<<32-t}var a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),c=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),u=new Uint32Array(16),l=new Uint32Array(16);function d(e,t){var n=0;for(n=0;n<8;n++)u[n]=e.h[n],u[n+8]=a[n];for(u[12]^=e.t,u[13]^=e.t/4294967296,t&&(u[14]=~u[14]),n=0;n<16;n++)l[n]=s(e.b,4*n);for(n=0;n<10;n++)i(0,4,8,12,l[c[16*n+0]],l[c[16*n+1]]),i(1,5,9,13,l[c[16*n+2]],l[c[16*n+3]]),i(2,6,10,14,l[c[16*n+4]],l[c[16*n+5]]),i(3,7,11,15,l[c[16*n+6]],l[c[16*n+7]]),i(0,5,10,15,l[c[16*n+8]],l[c[16*n+9]]),i(1,6,11,12,l[c[16*n+10]],l[c[16*n+11]]),i(2,7,8,13,l[c[16*n+12]],l[c[16*n+13]]),i(3,4,9,14,l[c[16*n+14]],l[c[16*n+15]]);for(n=0;n<8;n++)e.h[n]^=u[n]^u[n+8]}function h(e,t){if(!(e>0&&e<=32))throw new Error("Incorrect output length, should be in [1, 32]");var n=t?t.length:0;if(t&&!(n>0&&n<=32))throw new Error("Incorrect key length, should be in [1, 32]");var r={h:new Uint32Array(a),b:new Uint32Array(64),c:0,t:0,outlen:e};return r.h[0]^=16842752^n<<8^e,n>0&&(f(r,t),r.c=64),r}function f(e,t){for(var n=0;n<t.length;n++)64===e.c&&(e.t+=e.c,d(e,!1),e.c=0),e.b[e.c++]=t[n]}function p(e){for(e.t+=e.c;e.c<64;)e.b[e.c++]=0;d(e,!0);for(var t=new Uint8Array(e.outlen),n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(3&n)&255;return t}function m(e,t,n){n=n||32,e=r.normalizeInput(e);var s=h(n,t);return f(s,e),p(s)}t.exports={blake2s:m,blake2sHex:function(e,t,n){var s=m(e,t,n);return r.toHex(s)},blake2sInit:h,blake2sUpdate:f,blake2sFinal:p}}}},{package:"blakejs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/blakejs/blake2s.js"}],[2035,{"./util":2038},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./util");function s(e,t,n){var r=e[t]+e[n],s=e[t+1]+e[n+1];r>=4294967296&&s++,e[t]=r,e[t+1]=s}function i(e,t,n,r){var s=e[t]+n;n<0&&(s+=4294967296);var i=e[t+1]+r;s>=4294967296&&i++,e[t]=s,e[t+1]=i}function o(e,t){return e[t]^e[t+1]<<8^e[t+2]<<16^e[t+3]<<24}function a(e,t,n,r,o,a){var c=d[o],u=d[o+1],h=d[a],f=d[a+1];s(l,e,t),i(l,e,c,u);var p=l[r]^l[e],m=l[r+1]^l[e+1];l[r]=m,l[r+1]=p,s(l,n,r),p=l[t]^l[n],m=l[t+1]^l[n+1],l[t]=p>>>24^m<<8,l[t+1]=m>>>24^p<<8,s(l,e,t),i(l,e,h,f),p=l[r]^l[e],m=l[r+1]^l[e+1],l[r]=p>>>16^m<<16,l[r+1]=m>>>16^p<<16,s(l,n,r),p=l[t]^l[n],m=l[t+1]^l[n+1],l[t]=m>>>31^p<<1,l[t+1]=p>>>31^m<<1}var c=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),u=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3].map((function(e){return 2*e}))),l=new Uint32Array(32),d=new Uint32Array(32);function h(e,t){var n=0;for(n=0;n<16;n++)l[n]=e.h[n],l[n+16]=c[n];for(l[24]=l[24]^e.t,l[25]=l[25]^e.t/4294967296,t&&(l[28]=~l[28],l[29]=~l[29]),n=0;n<32;n++)d[n]=o(e.b,4*n);for(n=0;n<12;n++)a(0,8,16,24,u[16*n+0],u[16*n+1]),a(2,10,18,26,u[16*n+2],u[16*n+3]),a(4,12,20,28,u[16*n+4],u[16*n+5]),a(6,14,22,30,u[16*n+6],u[16*n+7]),a(0,10,20,30,u[16*n+8],u[16*n+9]),a(2,12,22,24,u[16*n+10],u[16*n+11]),a(4,14,16,26,u[16*n+12],u[16*n+13]),a(6,8,18,28,u[16*n+14],u[16*n+15]);for(n=0;n<16;n++)e.h[n]=e.h[n]^l[n]^l[n+16]}function f(e,t){if(0===e||e>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(t&&t.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");for(var n={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:e},r=0;r<16;r++)n.h[r]=c[r];var s=t?t.length:0;return n.h[0]^=16842752^s<<8^e,t&&(p(n,t),n.c=128),n}function p(e,t){for(var n=0;n<t.length;n++)128===e.c&&(e.t+=e.c,h(e,!1),e.c=0),e.b[e.c++]=t[n]}function m(e){for(e.t+=e.c;e.c<128;)e.b[e.c++]=0;h(e,!0);for(var t=new Uint8Array(e.outlen),n=0;n<e.outlen;n++)t[n]=e.h[n>>2]>>8*(3&n);return t}function g(e,t,n){n=n||64,e=r.normalizeInput(e);var s=f(n,t);return p(s,e),m(s)}t.exports={blake2b:g,blake2bHex:function(e,t,n){var s=g(e,t,n);return r.toHex(s)},blake2bInit:f,blake2bUpdate:p,blake2bFinal:m}}}},{package:"blakejs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/blakejs/blake2b.js"}],[4704,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){return e&&"function"==typeof e.then}}}},{package:"is-promise",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/is-promise/index.js"}],[5426,{_process:5423,"is-promise":4704},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r,s=e("is-promise");r="function"==typeof setImediate?setImediate:"object"==typeof n&&n&&n.nextTick?n.nextTick:function(e){setTimeout(e,0)};var i=[];function o(e){if(!(this instanceof o))return"function"==typeof e?new o(e):(n=new o((function(e){t=e})),{resolver:t,promise:n});var t,n,a,c=!1,u=!1,l=[],d=!1;function h(e){l.length?(d=!0,l.shift()(e||!1)):d=!1}this.then=function(e,t){return new o((function(n){l.push((function(s){var i=u?e:t;if("function"==typeof i){function e(){var e;try{e=i(a)}catch(e){return n.reject(e),h()}n.fulfill(e),h(!0)}s?e():r(e)}else u?(n.fulfill(a),h(s)):(n.reject(a),h(s))})),c&&!d&&h()}))},function(){function t(e){c||(c=!0,u=!1,a=e,h())}for(var n={fulfill:function e(n){c||(s(n)?n.then(e,t):(c=u=!0,a=n,h()))},reject:t},r=0;r<i.length;r++)i[r](this,n);if("function"==typeof e)try{e(n)}catch(e){n.reject(e)}}()}t.exports=o,o.use=function(e){i.push(e)}}).call(this)}).call(this,e("_process"))}}},{package:"promise",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/promise/index.js"}],[5494,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){return e=e||Math.random,function(t,n){return t?n&&n(t):n(null,e())}}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/sources/infinite.js"}],[5490,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){var t=0;return e=e||Infinity,function(n,r){return n?r&&r(n):t>e?r(!0):void r(null,t++)}}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/sources/count.js"}],[5491,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){return function(e,t){t(!0)}}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/sources/empty.js"}],[5492,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){return function(t,n){n(e)}}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/sources/error.js"}],[5495,{"./values":5497},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./values");t.exports=function(e){return r(Object.keys(e))}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/sources/keys.js"}],[5488,{"./drain":5484},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./drain");t.exports=function(e){return r(null,e)}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/sinks/on-end.js"}],[5483,{"./reduce":5489},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./reduce");t.exports=function(e){return r((function(e,t){return e+t}),"",e)}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/sinks/concat.js"}],[5487,{"./drain":5484},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./drain");t.exports=function(e){return r((function(e){console.log(e)}),e)}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/sinks/log.js"}],[5485,{"../util/prop":5509,"./drain":5484},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){return e}var s=e("../util/prop"),i=e("./drain");t.exports=function(e,t){var n=!1;return t?e=s(e)||r:(t=e,e=r),i((function(r){if(e(r))return n=!0,t(null,r),!1}),(function(e){n||t(!0===e?null:e,null)}))}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/sinks/find.js"}],[5505,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){var n=(t=t||{}).last||!1,r=!1;if("number"==typeof e){n=!0;var s=e;e=function(){return--s}}return function(t){function s(e){t(!0,(function(t){n=!1,e(t||!0)}))}return function(i,o){r&&!i?n?s(o):o(r):(r=i)?t(r,o):t(null,(function(t,i){(r=r||t)?o(r):e(i)?o(null,i):(r=!0,n?o(null,i):s(o))}))}}}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/throughs/take.js"}],[5506,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){var n=!1;function r(e){!n&&t&&(n=!0,t(!0===e?null:e))}return function(t){return function(n,s){return n&&r(n),t(n,(function(t,n){t?r(t):e&&e(n),s(t,n)}))}}}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/throughs/through.js"}],[5504,{"./unique":5507},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./unique");t.exports=function(e){return r(e,!0)}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/throughs/non-unique.js"}],[5507,{"../util/prop":5509,"./filter":5500},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e){return e}var s=e("../util/prop"),i=e("./filter");t.exports=function(e,t){e=s(e)||r;var n={};return i((function(r){var s=e(r);return n[s]?!!t:(n[s]=!0,!t)}))}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/throughs/unique.js"}],[5499,{"../util/tester":5510,"./filter":5500},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../util/tester"),s=e("./filter");t.exports=function(e){return e=r(e),s((function(t){return!e(t)}))}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/throughs/filter-not.js"}],[2251,{"./utils":2252,assert:1703,buffer:2084,debug:2256,"err-code":2358,"interface-datastore":4414},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const{Key:r}=e("interface-datastore"),{encodeBase32:s,keyToTopic:i,topicToKey:o}=e("./utils"),a=e("err-code"),c=e("assert"),u=e("debug"),l=u("datastore-pubsub:publisher");l.error=u("datastore-pubsub:publisher:error");t.exports=class{constructor(e,t,n,r,s){c.strictEqual(typeof r,"object","missing validator"),c.strictEqual(typeof r.validate,"function","missing validate function"),c.strictEqual(typeof r.select,"function","missing select function"),s&&c.strictEqual(typeof s,"function","invalid subscriptionKeyFn received"),this._pubsub=e,this._datastore=t,this._peerId=n,this._validator=r,this._handleSubscriptionKeyFn=s,this._onMessage=this._onMessage.bind(this)}put(e,t,r){if(!n.isBuffer(e)){const e="datastore key does not have a valid format";return l.error(e),r(a(new Error(e),"ERR_INVALID_DATASTORE_KEY"))}if(!n.isBuffer(t)){const e="received value is not a buffer";return l.error(e),r(a(new Error(e),"ERR_INVALID_VALUE_RECEIVED"))}const s=i(e);l(`publish value for topic ${s}`),this._pubsub.publish(s,t,r)}get(e,t){if(!n.isBuffer(e)){const e="datastore key does not have a valid format";return l.error(e),t(a(new Error(e),"ERR_INVALID_DATASTORE_KEY"))}const r=i(e);this._pubsub.ls(((n,s)=>n?t(n):s&&Array.isArray(s)&&s.indexOf(r)>-1?this._getLocal(e,t):void this._pubsub.subscribe(r,this._onMessage,(n=>{if(n){const e=`cannot subscribe topic ${r}`;return l.error(e),t(a(new Error(e),"ERR_SUBSCRIBING_TOPIC"))}l(`subscribed values for key ${r}`),this._getLocal(e,t)}))))}unsubscribe(e){const t=i(e);this._pubsub.unsubscribe(t,this._onMessage)}_getLocal(e,t){const i=new r("/"+s(e),!1);this._datastore.get(i,((e,r)=>{if(e){if("ERR_NOT_FOUND"!==e.code){const e=`unexpected error getting the ipns record for ${i.toString()}`;return l.error(e),t(a(new Error(e),"ERR_UNEXPECTED_ERROR_GETTING_RECORD"))}const n=`local record requested was not found for ${i.toString()}`;return l.error(n),t(a(new Error(n),"ERR_NOT_FOUND"))}if(!n.isBuffer(r)){const e="found record that we couldn't convert to a value";return l.error(e),t(a(new Error(e),"ERR_INVALID_RECORD_RECEIVED"))}t(null,r)}))}_onMessage(e){const{data:t,from:n,topicIDs:r}=e;let s;try{s=o(r[0])}catch(e){return void l.error(e)}l(`message received for ${s} topic`),n!==this._peerId.toB58String()?this._handleSubscriptionKeyFn?this._handleSubscriptionKeyFn(s,((e,n)=>{e?l.error("message discarded by the subscriptionKeyFn"):this._storeIfSubscriptionIsBetter(n,t)})):this._storeIfSubscriptionIsBetter(s,t):l("message discarded as it is from the same peer")}_storeIfSubscriptionIsBetter(e,t){this._isBetter(e,t,((r,s)=>{!r&&s&&this._storeRecord(n.from(e),t)}))}_validateRecord(e,t,n){this._validator.validate(e,t,n)}_selectRecord(e,t,n){this._validator.select(e,t,((e,t)=>{if(e)return l.error(e),n(e);n(null,0===t)}))}_isBetter(e,t,n){this._validateRecord(t,e,((s,i)=>{if(s||!i){const e="record received through pubsub is not valid";return l.error(e),n(a(new Error(e),"ERR_NOT_VALID_RECORD"))}const o=new r(e);this._getLocal(o.toBuffer(),((e,r)=>e?n(null,!0):r.equals(t)?n(null,!1):void this._selectRecord(t,r,n)))}))}_storeRecord(e,t){const n=new r("/"+s(e),!1);this._datastore.put(n,t,(t=>{t?l.error(`record for ${e.toString()} could not be stored in the routing`):l(`record for ${e.toString()} was stored in the datastore`)}))}open(e){const t="open function was not implemented yet";return l.error(t),e(a(new Error(t),"ERR_NOT_IMPLEMENTED_YET"))}has(e,t){const n="has function was not implemented yet";return l.error(n),t(a(new Error(n),"ERR_NOT_IMPLEMENTED_YET"))}delete(e,t){const n="delete function was not implemented yet";return l.error(n),t(a(new Error(n),"ERR_NOT_IMPLEMENTED_YET"))}close(e){const t="close function was not implemented yet";return l.error(t),e(a(new Error(t),"ERR_NOT_IMPLEMENTED_YET"))}batch(){const e="batch function was not implemented yet";throw l.error(e),a(new Error(e),"ERR_NOT_IMPLEMENTED_YET")}query(){const e="query function was not implemented yet";throw l.error(e),a(new Error(e),"ERR_NOT_IMPLEMENTED_YET")}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"datastore-pubsub",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/datastore-pubsub/src/index.js"}],[4412,{"./lib/bytesToUuid":4410,"./lib/rng":4411},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./lib/rng"),s=e("./lib/bytesToUuid");t.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[i+a]=o[a];return t||s(o)}}}},{package:"uuid",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/interface-datastore/node_modules/uuid/v4.js"}],[5457,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){var e,t,n,r,s=function(s,i){e?e(s,i):s?(r=s,n=i):t=i};return s.resolve=function(s){if(e)throw new Error("already resolved");if(!(e=s))throw new Error("no read cannot resolve!"+e);t&&s(null,t),n&&s(r,n)},s.abort=function(e){s.resolve((function(t,n){n(e||!0)}))},s}}}},{package:"pull-defer",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-defer/source.js"}],[1778,{"./internal/createTester":1746,"./internal/doParallelLimit":1749,"lodash/identity":5156},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=o(e("./internal/createTester")),s=o(e("./internal/doParallelLimit")),i=o(e("lodash/identity"));function o(e){return e&&e.__esModule?e:{default:e}}n.default=(0,s.default)((0,r.default)(Boolean,i.default)),t.exports=n.default}}},{package:"async",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async/someLimit.js"}],[5744,{"truncate-utf8-bytes":5991},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("truncate-utf8-bytes"),s=/[\/\?<>\\:\*\|"]/g,i=/[\x00-\x1f\x80-\x9f]/g,o=/^\.+$/,a=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,c=/[\. ]+$/;function u(e,t){if("string"!=typeof e)throw new Error("Input must be string");var n=e.replace(s,t).replace(i,t).replace(o,t).replace(a,t).replace(c,t);return r(n,255)}t.exports=function(e,t){var n=t&&t.replacement||"",r=u(e,n);return""===n?r:u(r,"")}}}},{package:"sanitize-filename",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/sanitize-filename/index.js"}],[4907,{"./util":4910,"async/detect":1734,"async/series":1775,"async/setImmediate":1776,"async/waterfall":1782,buffer:2084,"err-code":2358,"node-forge/lib/forge":5272,"node-forge/lib/pbe":5279,"node-forge/lib/pkcs7":5283},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("async/setImmediate"),s=e("async/series"),i=e("async/detect"),o=e("async/waterfall");e("node-forge/lib/pkcs7"),e("node-forge/lib/pbe");const a=e("node-forge/lib/forge"),c=e("./util"),u=e("err-code");t.exports=class{constructor(e){if(!e)throw u(new Error("keychain is required"),"ERR_KEYCHAIN_REQUIRED");this.keychain=e}encrypt(e,t,i){const o=this,l=(e,t)=>r((()=>i(e,t)));if(!n.isBuffer(t))return l(u(new Error("Plain data must be a Buffer"),"ERR_INVALID_PARAMS"));s([t=>o.keychain.findKeyByName(e,t),t=>o.keychain._getPrivateKey(e,t)],((e,r)=>{if(e)return l(e);let s=r[0],u=r[1];try{const e=a.pki.decryptRsaPrivateKey(u,o.keychain._());c.certificateForKey(s,e,((e,r)=>{if(e)return i(e);const s=a.pkcs7.createEnvelopedData();s.addRecipient(r),s.content=a.util.createBuffer(t),s.encrypt();const o=a.asn1.toDer(s.toAsn1()).getBytes();l(null,n.from(o,"binary"))}))}catch(e){l(e)}}))}decrypt(e,t){const s=(e,n)=>r((()=>t(e,n)));if(!n.isBuffer(e))return s(u(new Error("CMS data is required"),"ERR_INVALID_PARAMS"));const c=this;let l;try{const t=a.util.createBuffer(e.toString("binary")),n=a.asn1.fromDer(t);l=a.pkcs7.messageFromAsn1(n)}catch(e){return s(u(new Error("Invalid CMS: "+e.message),"ERR_INVALID_CMS"))}const d=l.recipients.filter((e=>e.issuer.find((e=>"O"===e.shortName&&"ipfs"===e.value)))).filter((e=>e.issuer.find((e=>"CN"===e.shortName)))).map((e=>({recipient:e,keyId:e.issuer.find((e=>"CN"===e.shortName)).value})));i(d,((e,t)=>c.keychain.findKeyById(e.keyId,((e,n)=>t(null,!e&&n)))),((e,t)=>{if(e)return s(e);if(!t){const t=d.map((e=>e.keyId));return e=u(new Error("Decryption needs one of the key(s): "+t.join(", ")),"ERR_MISSING_KEYS",{missingKeys:t}),s(e)}o([e=>c.keychain.findKeyById(t.keyId,e),(e,t)=>c.keychain._getPrivateKey(e.name,t)],((e,r)=>{if(e)return s(e);const i=a.pki.decryptRsaPrivateKey(r,c.keychain._());l.decrypt(t.recipient,i),s(null,n.from(l.content.getBytes(),"binary"))}))}))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"libp2p-keychain",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-keychain/src/cms.js"}],[4427,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports={maxProvidersPerRequest:3,providerRequestTimeout:1e4,hasBlockTimeout:15e3,provideTimeout:15e3,kMaxPriority:Math.pow(2,31)-1,rebroadcastDelay:1e4,maxListeners:1e3}}}},{package:"ipfs-bitswap",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-bitswap/src/constants.js"}],[4436,{"./entry":4435,"./message.proto":4437,assert:1703,"async/each":1736,"async/nextTick":1770,cids:2122,"ipfs-block":4444,"lodash.isequalwith":5001,"multicodec/src/name-table":5223,"multihashing-async":4425,protons:5443,"varint-decoder":6031},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("protons"),s=e("ipfs-block"),i=e("lodash.isequalwith"),o=e("assert"),a=e("async/each"),c=e("async/nextTick"),u=e("cids"),l=e("multicodec/src/name-table"),d=e("varint-decoder"),h=e("multihashing-async"),f=r(e("./message.proto")),p=e("./entry");class m{constructor(e){this.full=e,this.wantlist=new Map,this.blocks=new Map}get empty(){return 0===this.blocks.size&&0===this.wantlist.size}addEntry(e,t,n){o(e&&u.isCID(e),"must be a valid cid");const r=e.buffer.toString(),s=this.wantlist.get(r);s?(s.priority=t,s.cancel=Boolean(n)):this.wantlist.set(r,new p(e,t,n))}addBlock(e){o(s.isBlock(e),"must be a valid cid");const t=e.cid.buffer.toString();this.blocks.set(t,e)}cancel(e){o(u.isCID(e),"must be a valid cid");const t=e.buffer.toString();this.wantlist.delete(t),this.addEntry(e,0,!0)}serializeToBitswap100(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map((e=>({block:e.cid.buffer,priority:Number(e.priority),cancel:Boolean(e.cancel)})))},blocks:Array.from(this.blocks.values()).map((e=>e.data))};return this.full&&(e.wantlist.full=!0),f.Message.encode(e)}serializeToBitswap110(){const e={wantlist:{entries:Array.from(this.wantlist.values()).map((e=>({block:e.cid.buffer,priority:Number(e.priority),cancel:Boolean(e.cancel)})))},payload:[]};return this.full&&(e.wantlist.full=!0),this.blocks.forEach((t=>{e.payload.push({prefix:t.cid.prefix,data:t.data})})),f.Message.encode(e)}equals(e){const t=(e,t)=>{if(e.equals&&"function"==typeof e.equals)return e.equals(t)};return!(this.full!==e.full||!i(this.wantlist,e.wantlist,t)||!i(this.blocks,e.blocks,t))}get[Symbol.toStringTag](){const e=Array.from(this.wantlist.keys()),t=Array.from(this.blocks.keys());return`BitswapMessage <full: ${this.full}, list: ${e}, blocks: ${t}>`}}m.deserialize=(e,t)=>{let n;try{n=f.Message.decode(e)}catch(e){return c((()=>t(e)))}const r=n.wantlist&&n.wantlist.full||!1,i=new m(r);return n.wantlist&&n.wantlist.entries.forEach((e=>{let n;try{n=new u(e.block)}catch(e){return t(e)}i.addEntry(n,e.priority,e.cancel)})),n.blocks.length>0?a(n.blocks,((e,n)=>{h(e,"sha2-256",((r,o)=>{if(r)return n(r);let a;try{a=new u(o)}catch(r){return t(r)}i.addBlock(new s(e,a)),n()}))}),(e=>{if(e)return t(e);t(null,i)})):n.payload.length>0?a(n.payload,((e,t)=>{if(!e.prefix||!e.data)return c(t);const n=d(e.prefix),r=n[0],o=n[1],a=n[2];h(e.data,a,((n,a)=>{if(n)return t(n);let c;try{c=new u(r,l[o.toString("16")],a)}catch(n){return t(n)}i.addBlock(new s(e.data,c)),t()}))}),(e=>{if(e)return t(e);t(null,i)})):void t(null,i)},m.Entry=p,t.exports=m}}},{package:"ipfs-bitswap",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-bitswap/src/types/message/index.js"}],[4439,{"../../utils":4440,"./entry":4438},function(){with(this)return function(){"use strict";return function(e,t,n){const{sortBy:r}=e("../../utils"),s=e("./entry");class i{constructor(e){this.set=new Map,this._stats=e}get length(){return this.set.size}add(e,t){const n=e.buffer.toString(),r=this.set.get(n);r?(r.inc(),r.priority=t):(this.set.set(n,new s(e,t)),this._stats&&this._stats.push(null,"wantListSize",1))}remove(e){const t=e.buffer.toString(),n=this.set.get(t);n&&(n.dec(),n.hasRefs()||(this.set.delete(t),this._stats&&this._stats.push(null,"wantListSize",-1)))}removeForce(e){this.set.has(e)&&this.set.delete(e)}forEach(e){return this.set.forEach(e)}entries(){return this.set.entries()}sortedEntries(){return new Map(r((e=>e[1].key),Array.from(this.set.entries())))}contains(e){const t=e.buffer.toString();return this.set.get(t)}}i.Entry=s,t.exports=i}}},{package:"ipfs-bitswap",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-bitswap/src/types/wantlist/index.js"}],[4429,{"../types/wantlist":4439},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("../types/wantlist");t.exports=class{constructor(e){this.partner=e,this.wantlist=new r,this.exchangeCount=0,this.sentToPeer=new Map,this.accounting={bytesSent:0,bytesRecv:0}}sentBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesSent+=e}receivedBytes(e){this.exchangeCount++,this.lastExchange=(new Date).getTime(),this.accounting.bytesRecv+=e}wants(e,t){this.wantlist.add(e,t)}cancelWant(e){this.wantlist.remove(e)}wantlistContains(e){return this.wantlist.contains(e)}debtRatio(){return this.accounting.bytesSent/(this.accounting.bytesRecv+1)}}}}},{package:"ipfs-bitswap",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-bitswap/src/decision-engine/ledger.js"}],[4754,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t,n){var r;return function(){if(!t)return e.apply(this,arguments);var s=this,i=arguments,o=n&&!r;return clearTimeout(r),r=setTimeout((function(){if(r=null,!o)return e.apply(s,i)}),t),o?e.apply(this,arguments):void 0}}}}},{package:"just-debounce-it",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/just-debounce-it/index.js"}],[4434,{"bignumber.js":4421,events:2085,"moving-average":5206},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("events"),s=e("bignumber.js"),i=e("moving-average");t.exports=class extends r{constructor(e,t){super(),this._options=t,this._queue=[],this._stats={},this._frequencyLastTime=Date.now(),this._frequencyAccumulators={},this._movingAverages={},this._update=this._update.bind(this),e.forEach((e=>{this._stats[e]=s(0),this._movingAverages[e]={},this._options.movingAverageIntervals.forEach((t=>{(this._movingAverages[e][t]=i(t)).push(this._frequencyLastTime,0)}))})),this._enabled=this._options.enabled}enable(){this._enabled=!0}disable(){this._disabled=!0}stop(){this._timeout&&clearTimeout(this._timeout)}get snapshot(){return Object.assign({},this._stats)}get movingAverages(){return Object.assign({},this._movingAverages)}push(e,t){this._enabled&&(this._queue.push([e,t,Date.now()]),this._resetComputeTimeout())}_resetComputeTimeout(){this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._update,this._nextTimeout())}_nextTimeout(){const e=this._queue.length/this._options.computeThrottleMaxQueueSize;return Math.max(this._options.computeThrottleTimeout*(1-e),0)}_update(){if(this._timeout=null,this._queue.length){let e;for(;this._queue.length;){const t=e=this._queue.shift();this._applyOp(t)}this._updateFrequency(e[2]),this.emit("update",this._stats)}}_updateFrequency(e){const t=e-this._frequencyLastTime;Object.keys(this._stats).forEach((n=>{this._updateFrequencyFor(n,t,e)})),this._frequencyLastTime=e}_updateFrequencyFor(e,t,n){const r=this._frequencyAccumulators[e]||0;this._frequencyAccumulators[e]=0;const s=r/t*1e3;let o=this._movingAverages[e];o||(o=this._movingAverages[e]={}),this._options.movingAverageIntervals.forEach((e=>{let t=o[e];t||(t=o[e]=i(e)),t.push(n,s)}))}_applyOp(e){const t=e[0],n=e[1];if("number"!=typeof n)throw new Error("invalid increment number:",n);let r;r=this._stats.hasOwnProperty(t)?this._stats[t]:this._stats[t]=s(0),this._stats[t]=r.plus(n),this._frequencyAccumulators[t]||(this._frequencyAccumulators[t]=0),this._frequencyAccumulators[t]+=n}}}}},{package:"ipfs-bitswap",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-bitswap/src/stats/stat.js"}],[4442,{"../types/message":4436,"../utils":4440,"just-debounce-it":4754},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("just-debounce-it"),s=e("../types/message"),i=e("../utils").logger;t.exports=class{constructor(e,t,n){this.peerId=t,this.network=n,this.refcnt=1,this._entries=[],this._log=i(e,"msgqueue",t.toB58String().slice(0,8)),this.sendEntries=r(this._sendEntries.bind(this),200)}addMessage(e){e.empty||this.send(e)}addEntries(e){this._entries=this._entries.concat(e),this.sendEntries()}_sendEntries(){if(!this._entries.length)return;const e=new s(!1);this._entries.forEach((t=>{t.cancel?e.cancel(t.cid):e.addEntry(t.cid,t.priority)})),this._entries=[],this.addMessage(e)}send(e){this.network.connectTo(this.peerId,(t=>{t?this._log.error("cant connect to peer %s: %s",this.peerId.toB58String(),t.message):(this._log("sending message"),this.network.sendMessage(this.peerId,e,(e=>{e&&this._log.error("send error: %s",e.message)})))}))}}}}},{package:"ipfs-bitswap",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-bitswap/src/want-manager/msg-queue.js"}],[5462,{"./decode":5460,"./encode":5461},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("./encode"),s=e("./decode");n.encode=r,n.decode=s.decode,n.decodeFromReader=s.decodeFromReader}}},{package:"pull-length-prefixed",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-length-prefixed/src/index.js"}],[4929,{"../../is-buffer/index.js":4689,"./record.proto":4930,"./utils":4934,assert:1703,protons:5443},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("protons"),s=e("assert"),i=r(e("./record.proto")).Record,o=e("./utils");class a{constructor(e,t,r){e&&s(n.isBuffer(e),"key must be a Buffer"),t&&s(n.isBuffer(t),"value must be a buffer"),this.key=e,this.value=t,this.timeReceived=r}serialize(){return i.encode(this.prepareSerialize())}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:this.timeReceived&&o.toRFC3339(this.timeReceived)}}static deserialize(e){const t=i.decode(e);return a.fromDeserialized(t)}static fromDeserialized(e){let t;e.timeReceived&&(t=o.parseRFC3339(e.timeReceived));return new a(e.key,e.value,t)}}t.exports=a}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"libp2p-record",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-record/src/record.js"}],[4931,{"./selectors":4932,buffer:2084,"buffer-split":2097,"err-code":2358},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("buffer-split"),s=e("err-code");t.exports={bestRecord:(e,t,i)=>{if(0===i.length){throw s(new Error("No records given"),"ERR_NO_RECORDS_RECEIVED")}const o=r(t,n.from("/"));if(o.length<3){throw s(new Error("Record key does not have a selector function"),"ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY")}const a=e[o[1].toString()];if(!a){const e=`Unrecognized key prefix: ${o[1]}`;throw s(new Error(e),"ERR_UNRECOGNIZED_KEY_PREFIX")}return a(t,i)},selectors:e("./selectors")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"libp2p-record",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-record/src/selection.js"}],[4935,{"./validators":4936,buffer:2084,"buffer-split":2097,"err-code":2358},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("buffer-split"),s=e("err-code");t.exports={verifyRecord:(e,t,i)=>{const o=t.key,a=r(o,n.from("/"));if(a.length<3)return i();const c=e[a[1].toString()];if(!c){return i(s(new Error("Invalid record keytype"),"ERR_INVALID_RECORD_KEY_TYPE"))}c.func(o,t.value,i)},validators:e("./validators")}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"libp2p-record",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-record/src/validator.js"}],[4687,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports.toRFC3339=e=>`${e.getUTCFullYear()}-${String(e.getUTCMonth()+1).padStart(2,"0")}-${String(e.getUTCDate()).padStart(2,"0")}T${String(e.getUTCHours()).padStart(2,"0")}:${String(e.getUTCMinutes()).padStart(2,"0")}:${String(e.getUTCSeconds()).padStart(2,"0")}.${1e3*e.getUTCMilliseconds()*1e3}Z`,t.exports.parseRFC3339=e=>{const t=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T"+"(\\d{2}):(\\d{2}):(\\d{2})"+"\\.(\\d+)Z"),n=String(e).trim().match(t);if(!n)throw new Error("Invalid format");const r=parseInt(n[1],10),s=parseInt(n[2],10)-1,i=parseInt(n[3],10),o=parseInt(n[4],10),a=parseInt(n[5],10),c=parseInt(n[6],10),u=parseInt(n[7].slice(0,-6),10);return new Date(Date.UTC(r,s,i,o,a,c,u))}}}},{package:"ipns",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipns/src/utils.js"}],[4684,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.ERR_IPNS_EXPIRED_RECORD="ERR_IPNS_EXPIRED_RECORD",n.ERR_UNRECOGNIZED_VALIDITY="ERR_UNRECOGNIZED_VALIDITY",n.ERR_SIGNATURE_CREATION="ERR_SIGNATURE_CREATION",n.ERR_SIGNATURE_VERIFICATION="ERR_SIGNATURE_VERIFICATION",n.ERR_UNRECOGNIZED_FORMAT="ERR_UNRECOGNIZED_FORMAT",n.ERR_PEER_ID_FROM_PUBLIC_KEY="ERR_PEER_ID_FROM_PUBLIC_KEY",n.ERR_PUBLIC_KEY_FROM_ID="ERR_PUBLIC_KEY_FROM_ID",n.ERR_UNDEFINED_PARAMETER="ERR_UNDEFINED_PARAMETER"}}},{package:"ipns",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipns/src/errors.js"}],[5939,{},function(){with(this)return function(){"use strict";return function(e,t,n){
/**
 * Timestamp for 64-bit time_t, nanosecond precision and strftime
 *
 * @author Yusuke Kawasaki
 * @license MIT
 * @see https://github.com/kawanet/timestamp-nano
 */
!function(){void 0!==t&&(t.exports=g);var e=86400,n=3200,r=1168776,s=100982246400,i=1e3*s,o=864e13,a=4294967296,c=1e6,u=1e9,l="000000000",d=Math.trunc||function(e){var t=e-e%1;return 0===t&&(e<0||0===e&&1/e!=1/0)?-0:t},h=g.prototype;g.fromDate=function(e){return new g(+e)},g.fromInt64BE=w(0,1,2,3,0,4),g.fromInt64LE=w(3,2,1,0,4,0),g.fromString=function(e){var t,n=new g,r=(e+="").replace(/^\s*[+\-]?\d+/,(function(e){var t=+e,r=1970+(t-1970)%400;return n.year=t-r,r})).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,(function(e,n,r){return n<0&&(r*=-1),t=6e4*(60*+n+ +r),""})).replace(/\.\d+$/,(function(e){return n.nano=+(e+l).substr(1,9),""})).split(/\D+/);r.length>1?r[1]--:r[1]=0;if(n.time=t=Date.UTC.apply(Date,r)-(t||0),isNaN(t))throw new TypeError("Invalid Date");return y(n)},g.fromTimeT=function(e){return b(e,0)},h.year=0,h.time=0,h.nano=0,h.addNano=function(e){return this.nano+=+e||0,this},h.getNano=function(){var e=y(this);return(e.time%1e3*c+ +e.nano+u)%u},h.getTimeT=function(){var t=y(this),s=Math.floor(t.time/1e3),i=t.year;i&&(s+=i*r*e/n);return s},h.getYear=function(){return this.toDate().getUTCFullYear()+this.year},h.toDate=function(){return _(y(this).time)},h.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},h.toString=function(e){var t=this,n=t.toDate(),r={H:function(){return E(n.getUTCHours())},L:function(){return S(n.getUTCMilliseconds(),3)},M:function(){return E(n.getUTCMinutes())},N:function(){return S(t.getNano(),9)},S:function(){return E(n.getUTCSeconds())},Y:function(){var e=t.getYear();return e>999999?"+"+e:e>9999?"+"+S(e,6):e>=0?S(e,4):e>=-999999?"-"+S(-e,6):e},a:function(){return p[n.getUTCDay()]},b:function(){return f[n.getUTCMonth()]},d:function(){return E(n.getUTCDate())},e:function(){return e=n.getUTCDate(),(e>9?"":" ")+(0|e);var e},m:function(){return E(n.getUTCMonth()+1)}};return function e(t){return t.replace(/%./g,(function(t){var n=t[1],s=m[n],i=r[n];return s?e(s):i?i():t}))}(e||"%Y-%m-%dT%H:%M:%S.%NZ")},h.writeInt64BE=v(0,1,2,3,0,4),h.writeInt64LE=v(3,2,1,0,4,0);var f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],p=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],m={"%":"%",F:"%Y-%m-%d",n:"\n",R:"%H:%M",T:"%H:%M:%S",t:"\t",X:"%T",Z:"GMT",z:"+0000"};return g;function g(e,t,n){var r=this;if(!(r instanceof g))return new g(e,t,n);r.time=+e||0,r.nano=+t||0,r.year=+n||0,y(r)}function y(e){var t,r,s=e.year,a=e.time,u=e.nano;if(u<0||c<=u){var l=Math.floor(u/c);u-=l*c,a+=l,t=1}var h=s%n;if(a<-o||o<a||h){(r=d(a/i))&&(s+=r*n,a-=r*i);var f=_(a);f.setUTCFullYear(h+f.getUTCFullYear());var p=(a=+f)+(r=d((s-=h)/n))*i;r&&-o<=p&&p<=o&&(s-=r*n,a=p),t=1}return t&&(e.year=s,e.time=a,e.nano=u),e}function _(e){var t=new Date(0);return t.setTime(e),t}function b(e,t){t|=0,e=+e||0;var r=d((t*=a)/s)+d(e/s),i=t%s+e%s,o=d(i/s);return o&&(r+=o,i-=o*s),new g(1e3*i,0,r*n)}function v(e,t,n,r,s,i){return function(e,t){var n=y(this);e||(e=new Array(8));k(e,t|=0);var r=Math.floor(n.time/1e3),c=31556952*n.year,u=d(c/a)+d(r/a),l=c%a+r%a,h=Math.floor(l/a);h&&(u+=h,l-=h*a);return o(e,t+s,u),o(e,t+i,l),e};function o(s,i,o){s[i+e]=o>>24&255,s[i+t]=o>>16&255,s[i+n]=o>>8&255,s[i+r]=255&o}}function w(e,t,n,r,s,i){return function(e,t){k(e,t|=0);var n=o(e,t+s);return b(o(e,t+i),n)};function o(s,i){return 16777216*s[i+e]+(s[i+t]<<16|s[i+n]<<8|s[i+r])}}function k(e,t){var n=e&&e.length;if(null==n)throw new TypeError("Invalid Buffer");if(n<t+8)throw new RangeError("Out of range")}function E(e){return(e>9?"":"0")+(0|e)}function S(e,t){return(l+(0|e)).substr(-t)}}()}}},{package:"timestamp-nano",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/timestamp-nano/timestamp.js"}],[4686,{protons:5443},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("protons");t.exports=r('\nmessage IpnsEntry {\n  enum ValidityType {\n\t\tEOL = 0; // setting an EOL says "this record is valid until..."\n\t}\n\n  required bytes value = 1;\n\trequired bytes signature = 2;\n\n\toptional ValidityType validityType = 3;\n\toptional bytes validity = 4;\n\n\toptional uint64 sequence = 5;\n\n\toptional uint64 ttl = 6;\n\n\t// in order for nodes to properly validate a record upon receipt, they need the public\n\t// key associated with it. For old RSA keys, its easiest if we just send this as part of\n\t// the record itself. For newer ed25519 keys, the public key can be embedded in the\n\t// peerID, making this field unnecessary.\n\toptional bytes pubKey = 7;\n}\n').IpnsEntry}}},{package:"ipns",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipns/src/pb/ipns.proto.js"}],[5466,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports="/mplex/6.7.0"}}},{package:"pull-mplex",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-mplex/src/codec.js"}],[5452,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){var t,n,r=!1,s=!1;function i(){if(e)return e(r&&!0!==r?r:s&&!0!==s?s:null)}function o(){s=s||!0,function(e){i();var n=t;t=null,n&&n(r||s)}(),n&&n(r,(function(e){t&&t(e||r)}))}function a(e){return n=e,function(n,o){if(t=o,n&&(r=n),s)return o(s);r||(!0,e(n,(function(o,a){if(!1,r)return!n&&e(r,(function(){}));if(t){var c=t;t=null,o?(s=r||o,i(),c(r||o)):c(r||o,a)}})))}}return a.abort=function(e){s||(r=e||!0,o())},a}}}},{package:"pull-abortable",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-abortable/index.js"}],[5471,{"./codec":5466,"async/nextTick":1770,debug:2256,events:2085,"interface-connection":4409},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("events").EventEmitter,s=e("interface-connection").Connection,i=e("async/nextTick"),o=e("debug"),a=e("./codec"),c=o("libp2p-mplex:muxer");function u(){}c.err=o("libp2p-mplex:muxer:error");t.exports=class extends r{constructor(e,t){super(),this.conn=e,this.multiplex=t,this.multicodec=a,t.on("close",(()=>this.emit("close"))),t.on("error",(e=>this.emit("error",e))),t.on("stream",(e=>{e.on("error",(e=>{c.err("receiver stream errored",e)})),this.emit("stream",new s(e,this.conn))}))}newStream(e){e=e||u;let t=this.multiplex.createStream();t.on("error",(e=>{c.err("initiator stream errored",e)}));const n=new s(t,this.conn);return i(e,null,n),n}end(e){if(e=e||u,this.multiplex.destroyed)return i(e);this.multiplex.once("close",e),this.multiplex.close()}}}}},{package:"pull-mplex",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-mplex/src/muxer.js"}],[5470,{"./channel":5465,"./coder":5467,"./consts":5468,"./util":5472,"async/nextTick":1770,buffer:2084,debug:2256,events:2085,looper:5464,"pull-pushable":5474,"pull-stream":5480,"pull-through":5511},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("pull-stream"),s=e("pull-pushable"),i=e("pull-through"),o=e("looper"),a=e("async/nextTick"),c=e("events"),u=e("debug"),{emitError:l,emitStream:d}=e("./util"),{Types:h,MAX_MSG_SIZE:f}=e("./consts"),p=e("./channel"),m=e("./coder"),g=u("pull-plex");g.err=u("pull-plex:err");t.exports=class extends c{constructor(e){super(),"boolean"==typeof e&&(e={initiator:e}),e={initiator:!0,onChan:null,maxChannels:1e4,maxMsgSize:f,lazy:!1,...e},this._maxChannels=e.maxChannels,this._maxMsgSize=e.maxMsgSize,this._lazy=e.lazy,this._initiator=Boolean(e.initiator),this._chanId=0,this._inChannels=new Array(this._maxChannels/2),this._outChannels=new Array(this._maxChannels/2),this._endedRemote=!1,this._endedLocal=!1,this._chandata=s((e=>{this._log("mplex ended"),this._endedRemote=!0,this.close(e)})),e.onChan&&this.on("stream",(t=>e.onChan(t,t.id))),this.source=r(this._chandata,m.encode());const t=this;this.sink=r(i((function(e){if(e&&e.length>=t._maxMsgSize)return a(l,t,new Error("message too large!")),this.queue(null);this.queue(e)})),m.decode(),(e=>{const n=o((()=>{e(null,((e,r)=>{if(!t._endedLocal){if(!0===e)return t.close();if(e)return t.destroy(e);t._handle(r),n()}}))}));n()}))}_log(e,t){g({op:e,initiator:this._initiator,endedLocal:this._endedLocal,endedRemote:this._endedRemote,data:t&&t.toString()||""})}get initiator(){return this._initiator}close(e){if(this._log("close",e),this.destroyed)return;e&&a(l,this,e),e=e||"Underlying stream has been closed",this._endedLocal=!0;const t=Array.prototype.concat(this._outChannels,this._inChannels);for(let n of t)n&&n.close(e);this.emit("close")}get destroyed(){return this._endedRemote&&this._endedLocal}destroy(e){e=e||new Error("Underlying stream has been closed"),this._chandata.end(e),this.close(e)}push(e){e.data&&n.byteLength(e.data)>this._maxMsgSize&&this._chandata.end(new Error("message too large!")),this._chandata.push(e)}createStream(e){"number"==typeof e&&(e=e.toString());const t=this._newStream(null,!0,!1,e,this._outChannels);return this._lazy||t.openChan(e),t}_newStream(e,t,n,r,s){if(this.chanSize>=this._maxChannels)return void this.emit("error",new Error("max channels exceeded"));if("string"==typeof t&&(r=t,t=!1,n=!1),"string"==typeof n&&(r=n,n=!1),s[e="number"==typeof e?e:this._chanId++])return void this.emit("error",new Error(`channel with id ${e} already exist!`));const i=new p({id:e,name:r,plex:this,initiator:t,open:n||!1});return this._addChan(e,i,s)}_addChan(e,t,n){return t.once("close",(()=>{n[e]=null})),t.once("error",(e=>{g.err("channel error",e)})),n[e]=t,t}get chanSize(){return this._inChannels.size+this._outChannels.size}_handle(e){this._log("_handle",e);const{id:t,type:n,data:r}=e;switch(n){case h.NEW:{const e=this._newStream(t,!1,!0,r.toString(),this._inChannels);a(d,this,e,t);break}case h.OUT_MESSAGE:case h.IN_MESSAGE:{const e=(1&n?this._outChannels:this._inChannels)[t];e&&e.push(r);break}case h.OUT_CLOSE:case h.IN_CLOSE:{const e=(1&n?this._outChannels:this._inChannels)[t];e&&e.close();break}case h.OUT_RESET:case h.IN_RESET:{const e=(1&n?this._outChannels:this._inChannels)[t];e&&e.destroy();break}default:a(l,this,new Error("Invalid message type"))}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"pull-mplex",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-mplex/src/mplex.js"}],[4409,{"./connection":4408},function(){with(this)return function(){"use strict";return function(e,t,n){n.Connection=e("./connection")}}},{package:"interface-connection",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/interface-connection/src/index.js"}],[4985,{"interface-connection":4409,multiaddr:5211,os:5366,"pull-ws/server":5517},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("interface-connection").Connection,s=e("multiaddr"),i=e("os");function o(){}const a=e("pull-ws/server")||o;t.exports=(e,t)=>{const n=a(e,(e=>{e.getObservedAddrs=e=>e(null,[]),t(new r(e))}));let c;return n._listen=n.listen,n.listen=(e,t)=>{t=t||o,c=e,e.protoNames().includes("ipfs")&&(e=e.decapsulate("ipfs")),n._listen(e.toOptions(),t)},n.getAddrs=e=>{const t=[],r=n.address();if(!r)return e(new Error("Listener is not ready yet"));let o=c.getPeerId();if(-1!==c.toString().indexOf("ip4")){let e=c.decapsulate("tcp");if(e=e.encapsulate("/tcp/"+r.port+"/ws"),c.getPeerId()&&(e=e.encapsulate("/ipfs/"+o)),-1!==e.toString().indexOf("0.0.0.0")){const n=i.networkInterfaces();Object.keys(n).forEach((r=>{n[r].forEach((n=>{"IPv4"===n.family&&t.push(s(e.toString().replace("0.0.0.0",n.address)))}))}))}else t.push(e)}e(null,t)},n}}}},{package:"libp2p-websockets",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-websockets/src/listener.js"}],[5513,{"./duplex":5514,"./web-socket":5520,"./ws-url":5521},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./web-socket"),s=e("./duplex"),i=e("./ws-url");function o(e){return"function"==typeof e}t.exports=function(e,t){o(t)&&(t={onConnect:t});var n="undefined"==typeof window?{}:window.location,a=i(e,n),c=new r(a),u=s(c,t);return u.remoteAddress=a,u.close=function(e){o(e)&&c.addEventListener("close",e),c.close()},c.addEventListener("open",(function(e){t&&o(t.onConnect)&&t.onConnect(null,u)})),u},t.exports.connect=t.exports}}},{package:"pull-ws",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-ws/client.js"}],[4951,{"pull-defer":5455,"pull-handshake":5459},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("pull-handshake"),s=e("pull-defer");t.exports=class{constructor(e,t,n,i){"function"==typeof n&&(i=n,n=undefined),this.setup(),this.id.local=e,this.id.remote=t,this.key.local=e.privKey,this.timeout=n||6e4,i=i||(()=>{}),this.secure=s.duplex(),this.stream=r({timeout:this.timeout},i),this.shake=this.stream.handshake,delete this.stream.handshake}setup(){this.id={local:null,remote:null},this.key={local:null,remote:null},this.shake=null,this.cleanSecrets()}cleanSecrets(){this.shared={},this.ephemeralKey={local:null,remote:null},this.proposal={in:null,out:null},this.proposalEncoded={in:null,out:null},this.protocols={local:null,remote:null},this.exchange={in:null,out:null}}}}}},{package:"libp2p-secio",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-secio/src/state.js"}],[4947,{"./exchange":4945,"./finish":4946,"./propose":4948,"async/series":1775},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("async/series"),s=e("./propose"),i=e("./exchange"),o=e("./finish");t.exports=function(e,t){return r([t=>s(e,t),t=>i(e,t),t=>o(e,t)],(n=>{e.cleanSecrets(),n&&(!0===n&&(n=new Error("Stream ended prematurely")),e.shake.abort(n)),t(n)})),e.stream}}}},{package:"libp2p-secio",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-secio/src/handshake/index.js"}],[4880,{},function(){with(this)return function(){"use strict";return function(e,t,n){const r=n.second=1e3,s=n.minute=60*r,i=n.hour=60*s;n.MAX_RECORD_AGE=36*i,n.PROTOCOL_DHT="/ipfs/kad/1.0.0",n.PROVIDERS_KEY_PREFIX="/providers/",n.PROVIDERS_LRU_CACHE_SIZE=256,n.PROVIDERS_VALIDITY=24*i,n.PROVIDERS_CLEANUP_INTERVAL=i,n.READ_MESSAGE_TIMEOUT=10*r,n.GET_MANY_RECORD_COUNT=16,n.K=20,n.ALPHA=3,n.maxMessageSize=2<<22,n.defaultRandomWalk={enabled:!0,queriesPerPeriod:1,interval:5*s,timeout:10*r,delay:10*r}}}},{package:"libp2p-kad-dht",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-kad-dht/src/constants.js"}],[4891,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=class{constructor(){this.queries=new Set,this.running=!1}queryStarted(e){this.queries.add(e)}queryCompleted(e){this.queries.delete(e)}start(){this.running=!0}stop(){this.running=!1;for(const e of this.queries)e.stop();this.queries.clear()}}}}},{package:"libp2p-kad-dht",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-kad-dht/src/query-manager.js"}],[1780,{"./internal/initialParams":1754,"./internal/wrapAsync":1766},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,n){var i=(0,s.default)(e);return(0,r.default)((function(r,s){var o,a=!1;r.push((function(){a||(s.apply(null,arguments),clearTimeout(o))})),o=setTimeout((function(){var t=e.name||"anonymous",r=new Error('Callback function "'+t+'" timed out.');r.code="ETIMEDOUT",n&&(r.info=n),a=!0,s(r)}),t),i.apply(null,r)}))};var r=i(e("./internal/initialParams")),s=i(e("./internal/wrapAsync"));function i(e){return e&&e.__esModule?e:{default:e}}t.exports=n.default}}},{package:"async",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async/timeout.js"}],[1743,{"./internal/doParallel":1748,"./internal/filter":1751},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=i(e("./internal/filter")),s=i(e("./internal/doParallel"));function i(e){return e&&e.__esModule?e:{default:e}}n.default=(0,s.default)(r.default),t.exports=n.default}}},{package:"async",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async/filter.js"}],[4889,{"./constants":4880,"./limited-peer-list":4882,"./message":4884,"./query":4892,"./utils":4906,"async/timeout":1780,"err-code":2358,"libp2p-record":4928,"peer-id":5413,"peer-info":5414,"promise-to-callback":5425,"promisify-es6":5427},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("peer-id"),s=e("libp2p-record"),i=e("async/timeout"),o=e("peer-info"),a=e("promisify-es6"),c=e("promise-to-callback"),u=e("err-code"),l=e("./utils"),d=e("./message"),h=e("./constants"),f=e("./query"),p=e("./limited-peer-list"),m=s.Record;t.exports=e=>({_nearestPeersToQuery(e,t){c(this._nearestPeersToQueryAsync(e))(t)},async _nearestPeersToQueryAsync(t){const n=await a(l.convertBuffer)(t.key);return e.routingTable.closestPeers(n,e.kBucketSize).map((t=>e.peerBook.has(t)?e.peerBook.get(t):e.peerBook.put(new o(t))))},_betterPeersToQuery(e,t,n){c(this._betterPeersToQueryAsync(e,t))(n)},async _betterPeersToQueryAsync(t,n){e._log("betterPeersToQuery");return(await e._nearestPeersToQueryAsync(t)).filter((t=>e._isSelf(t.id)?(e._log.error("trying to return self as closer"),!1):!t.id.isEqual(n.id)))},_checkLocalDatastore(e,t){c(this._checkLocalDatastoreAsync(e))(t)},async _checkLocalDatastoreAsync(t){e._log("checkLocalDatastore: %b",t);const n=l.bufferToKey(t);let r;try{r=await a((t=>e.datastore.get(n,t)))()}catch(e){if("ERR_NOT_FOUND"===e.code)return undefined;throw e}const s=m.deserialize(r);if(!s)throw u("Invalid record","ERR_INVALID_RECORD");return null==s.timeReceived||l.now()-s.timeReceived>h.MAX_RECORD_AGE?(await a((t=>e.datastore.delete(n,t)))(),undefined):s},_add(e,t){c(this._addAsync(e))((e=>t(e)))},_addAsync:async t=>(t=e.peerBook.put(t),await a((n=>e.routingTable.add(t.id,n)))(),undefined),_verifyRecordLocally(e,t){c(this._verifyRecordLocallyAsync(e))((e=>t(e)))},async _verifyRecordLocallyAsync(t){e._log("verifyRecordLocally"),await a((n=>s.validator.verifyRecord(e.validators,t,n)))()},_closerPeersSingle(e,t,n){c(this._closerPeersSingleAsync(e,t))(n)},async _closerPeersSingleAsync(t,n){e._log("_closerPeersSingle %b from %s",t,n.toB58String());return(await e._findPeerSingleAsync(n,new r(t))).closerPeers.filter((t=>!e._isSelf(t.id))).map((t=>e.peerBook.put(t)))},_isSelf:t=>t&&e.peerInfo.id.id.equals(t.id),_findPeerSingle(e,t,n){c(this._findPeerSingleAsync(e,t))(n)},async _findPeerSingleAsync(t,n){e._log("_findPeerSingle %s",t.toB58String());const r=new d(d.TYPES.FIND_NODE,n.id,0);return a((n=>e.network.sendRequest(t,r,n)))()},_putValueToPeer(e,t,n,r){c(this._putValueToPeerAsync(e,t,n))(r)},async _putValueToPeerAsync(t,n,r){const s=new d(d.TYPES.PUT_VALUE,t,0);s.record=n;if(!(await a((t=>e.network.sendRequest(r,s,t)))()).record.value.equals(m.deserialize(n).value))throw u(new Error("value not put correctly"),"ERR_PUT_VALUE_INVALID")},_putLocal(e,t,n){c(this._putLocalAsync(e,t))((e=>n(e)))},_putLocalAsync:async(t,n)=>(await a((r=>e.datastore.put(l.bufferToKey(t),n,r)))(),undefined),_get(e,t,n){c(this._getAsync(e,t))(n)},async _getAsync(t,n){e._log("_get %b",t);const r=await a((r=>e.getMany(t,h.GET_MANY_RECORD_COUNT,n,r)))(),i=r.map((e=>e.val));let o=0;try{o=s.selection.bestRecord(e.selectors,t,i)}catch(e){if("ERR_NO_SELECTOR_FUNCTION_FOR_RECORD_KEY"!==e.code)throw e}const c=i[o];if(e._log("GetValue %b %s",t,c),!c)throw u(new Error("best value was not found"),"ERR_NOT_FOUND");return await this._sendCorrectionRecord(t,r,c),c},async _sendCorrectionRecord(t,n,r){const s=await a((e=>l.createPutRecord(t,r,e)))();return Promise.all(n.map((async n=>{if(!n.val.equals(r))if(e._isSelf(n.from))try{await e._putLocalAsync(t,s)}catch(t){e._log.error("Failed error correcting self",t)}else try{await e._putValueToPeerAsync(t,s,n.from)}catch(t){e._log.error("Failed error correcting entry",t)}})))},_getLocal(e,t){c(this._getLocalAsync(e))(t)},async _getLocalAsync(t){e._log("getLocal %b",t);const n=await a((n=>e.datastore.get(l.bufferToKey(t),n)))();e._log("found %b in local datastore",t);const r=m.deserialize(n);return await e._verifyRecordLocallyAsync(r),r},_getValueOrPeers(e,t,n){c(this._getValueOrPeersAsync(e,t))(((e,t)=>{if(e)return n(e);n(null,t.record,t.peers)}))},async _getValueOrPeersAsync(t,n){const r=await a((r=>e._getValueSingle(t,n,r)))(),s=r.closerPeers,i=r.record;if(i){try{await e._verifyRecordOnlineAsync(i)}catch(t){const n="invalid record received, discarded";throw e._log(n),u(new Error(n),"ERR_INVALID_RECORD")}return{record:i,peers:s}}if(s.length>0)return{peers:s};throw u(new Error("Not found"),"ERR_NOT_FOUND")},_getValueSingle(e,t,n){c(this._getValueSingleAsync(e,t))(n)},async _getValueSingleAsync(t,n){const r=new d(d.TYPES.GET_VALUE,n,0);return a((n=>e.network.sendRequest(t,r,n)))()},_verifyRecordOnline(e,t){c(this._verifyRecordOnlineAsync(e))((e=>t(e)))},async _verifyRecordOnlineAsync(t){await a((n=>s.validator.verifyRecord(e.validators,t,n)))()},_getPublicKeyFromNode(e,t){c(this._getPublicKeyFromNodeAsync(e))(t)},async _getPublicKeyFromNodeAsync(t){const n=l.keyForPublicKey(t),s=await a((r=>e._getValueSingle(t,n,r)))();if(!s.record||!s.record.value)throw u(`Node not responding with its public key: ${t.toB58String()}`,"ERR_INVALID_RECORD");const i=await a((e=>r.createFromPubKey(s.record.value,e)))();if(!i.isEqual(t))throw u("public key does not match id","ERR_PUBLIC_KEY_DOES_NOT_MATCH_ID");return i.pubKey},_findNProviders(e,t,n,r){c(this._findNProvidersAsync(e,t,n))(r)},async _findNProvidersAsync(t,n,r){const s=new p(r);if((await e.providers.getProviders(t)).forEach((t=>{let n;n=e.peerBook.has(t)?e.peerBook.get(t):e.peerBook.put(new o(t)),s.push(n)})),s.length>=r)return s.toArray();const d=[],h=new f(e,t.buffer,((n,i)=>{const o=l.pathSize(r-s.length,i),a=new p(o);return d.push(a),async n=>{const r=await e._findProvidersSingleAsync(n,t),s=r.providerPeers;return e._log("(%s) found %s provider entries",e.peerInfo.id.toB58String(),s.length),s.forEach((t=>{a.push(e.peerBook.put(t))})),a.length>=o?{pathComplete:!0}:{closerPeers:r.closerPeers}}})),m=e.routingTable.closestPeers(t.buffer,e.kBucketSize);try{await a((e=>i((e=>{c(h.run(m))(e)}),n)(e)))()}catch(e){if("ETIMEDOUT"!==e.code)throw e}finally{h.stop()}if(d.forEach((e=>{e.toArray().forEach((e=>{s.push(e)}))})),0===s.length)throw u(new Error("no providers found"),"ERR_NOT_FOUND");return s.toArray()},_findProvidersSingle(e,t,n){c(this._findProvidersSingleAsync(e,t))(n)},async _findProvidersSingleAsync(t,n){const r=new d(d.TYPES.GET_PROVIDERS,n.buffer,0);return a((n=>e.network.sendRequest(t,r,n)))()}})}}},{package:"libp2p-kad-dht",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-kad-dht/src/private.js"}],[4884,{"../../../is-buffer/index.js":4689,"./dht.proto":4883,assert:1703,"libp2p-record":4928,"peer-id":5413,"peer-info":5414,protons:5443},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("assert"),s=e("peer-info"),i=e("peer-id"),o=e("protons"),a=e("libp2p-record").Record,c=o(e("./dht.proto")),u=c.Message.MessageType,l=c.Message.ConnectionType;class d{constructor(e,t,s){t&&r(n.isBuffer(t)),this.type=e,this.key=t,this._clusterLevelRaw=s,this.closerPeers=[],this.providerPeers=[],this.record=null}get clusterLevel(){const e=this._clusterLevelRaw-1;return e<0?0:e}set clusterLevel(e){this._clusterLevelRaw=e}serialize(){const e={key:this.key,type:this.type,clusterLevelRaw:this._clusterLevelRaw,closerPeers:this.closerPeers.map(h),providerPeers:this.providerPeers.map(h)};return this.record&&(n.isBuffer(this.record)?e.record=this.record:e.record=this.record.serialize()),c.Message.encode(e)}static deserialize(e){const t=c.Message.decode(e),n=new d(t.type,t.key,t.clusterLevelRaw);return n.closerPeers=t.closerPeers.map(f),n.providerPeers=t.providerPeers.map(f),t.record&&(n.record=a.deserialize(t.record)),n}}function h(e){const t={id:e.id.id,addrs:e.multiaddrs.toArray().map((e=>e.buffer))};return e.isConnected()?t.connection=l.CONNECTED:t.connection=l.NOT_CONNECTED,t}function f(e){const t=new s(new i(e.id));return e.addrs.forEach((e=>t.multiaddrs.add(e))),t}d.TYPES=u,d.CONNECTION_TYPES=l,t.exports=d}).call(this)}).call(this,{isBuffer:e("../../../is-buffer/index.js")})}}},{package:"libp2p-kad-dht",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-kad-dht/src/message/index.js"}],[4897,{"./utils":4906,"k-bucket":4757},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("k-bucket"),s=e("./utils");t.exports=class{constructor(e,t){this.self=e,this._onPing=this._onPing.bind(this),s.convertPeerId(e,((e,n)=>{if(e)throw e;this.kb=new r({localNodeId:n,numberOfNodesPerKBucket:t,numberOfNodesToPing:1}),this.kb.on("ping",this._onPing)}))}_onPing(e,t){const n=e[0];this.kb.remove(n.id),this.kb.add(t)}get size(){return this.kb.count()}find(e,t){s.convertPeerId(e,((n,r)=>{if(n)return t(n);const s=this.closestPeer(r);if(s&&s.isEqual(e))return t(null,s);t()}))}closestPeer(e,t){const n=this.closestPeers(e,1);if(n.length>0)return n[0]}closestPeers(e,t){return this.kb.closest(e,t).map((e=>e.peer))}add(e,t){s.convertPeerId(e,((n,r)=>{if(n)return t(n);this.kb.add({id:r,peer:e}),t()}))}remove(e,t){s.convertPeerId(e,((e,n)=>{if(e)return t(e);this.kb.remove(n),t()}))}}}}},{package:"libp2p-kad-dht",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-kad-dht/src/routing.js"}],[4896,{"./constants":4880,"./utils":4906,"abort-controller":1672,assert:1703,"err-code":2358,"libp2p-crypto":4853,"multihashing-async":4878,"p-times":5374,"peer-id":5413,"promisify-es6":5427},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("promisify-es6"),s=e("libp2p-crypto"),i=r(e("multihashing-async")),o=e("peer-id"),a=e("assert"),c=e("abort-controller"),u=e("err-code"),l=e("p-times"),d=e("./constants"),{logger:h}=e("./utils");t.exports=class{constructor(e,t){a(e,"Random Walk needs an instance of the Kademlia DHT"),this._options={...d.defaultRandomWalk,...t},this._kadDHT=e,this.log=h(e.peerInfo.id,"random-walk"),this._timeoutId=undefined}start(){!this._timeoutId&&this._options.enabled&&(this._timeoutId=setTimeout((()=>{this._runPeriodically()}),this._options.delay))}stop(){this._timeoutId&&(clearTimeout(this._timeoutId),this._timeoutId=undefined),this._controller&&this._controller.abort()}async _runPeriodically(){for(;this._timeoutId;){try{await this._walk(this._options.queriesPerPeriod,this._options.timeout)}catch(e){this._kadDHT._log.error("random-walk:error",e)}await new Promise((e=>{this._timeoutId=setTimeout(e,this._options.interval)}))}}async _walk(e,t){this.log("start"),this._controller=new c;try{await l(e,(async e=>{this.log("running query %d",e);try{const e=await this._randomPeerId();if(!this._controller)return;await this._query(e,{timeout:t,signal:this._controller.signal})}catch(t){if(t&&"ETIMEDOUT"!==t.code)throw this.log.error("query %d finished with error",e,t),t}this.log("finished query %d",e)}))}finally{this._controller=null,this.log("finished queries")}}async _query(e,t){let n;this.log("query:%s",e.toB58String());try{n=await r((n=>this._kadDHT.findPeer(e,t,n)))()}catch(e){if(e&&"ERR_NOT_FOUND"===e.code)return;throw e}throw this.log("query:found",n),u(`random-walk: ACTUALLY FOUND PEER: ${n}, ${e.toB58String()}`,"ERR_FOUND_RANDOM_PEER")}async _randomPeerId(){const e=await i(s.randomBytes(16),"sha2-256");return new o(e)}}}}},{package:"libp2p-kad-dht",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-kad-dht/src/random-walk.js"}],[4890,{"./constants":4880,"./utils":4906,buffer:2084,hashlru:4377,"interface-datastore":4414,"p-queue":5370,"peer-id":5413,"promisify-es6":5427,"pull-stream-to-async-iterator":5478,varint:6034},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("hashlru"),s=e("varint"),i=e("peer-id"),o=e("interface-datastore").Key,a=e("p-queue"),c=e("promisify-es6"),u=e("pull-stream-to-async-iterator"),l=e("./constants"),d=e("./utils");function h(e){return e="string"==typeof e?e:d.encodeBase32(e.buffer),l.PROVIDERS_KEY_PREFIX+e}function f(e){const t=e.toString().split("/");if(4!==t.length)throw new Error("incorrectly formatted provider entry key in datastore: "+e);return{cid:t[2],peerId:t[3]}}function p(e){return s.decode(e)}t.exports=class{constructor(e,t,n){this.datastore=e,this._log=d.logger(t,"providers"),this.cleanupInterval=l.PROVIDERS_CLEANUP_INTERVAL,this.provideValidity=l.PROVIDERS_VALIDITY,this.lruCacheSize=n||l.PROVIDERS_LRU_CACHE_SIZE,this.providers=r(this.lruCacheSize),this.syncQueue=new a({concurrency:1})}stop(){this._cleaner&&(clearInterval(this._cleaner),this._cleaner=null)}_cleanup(){return this.syncQueue.add((async()=>{this._log("start cleanup");const e=Date.now();let t=0,n=0;const r=new Map,s=this.datastore.batch(),i=this.datastore.query({prefix:l.PROVIDERS_KEY_PREFIX});for await(const e of u(i))try{const{cid:i,peerId:o}=f(e.key),a=p(e.value),c=Date.now(),u=c-a,l=u>this.provideValidity;if(this._log("comparing: %d - %d = %d > %d %s",c,a,u,this.provideValidity,l?"(expired)":""),l){n++,s.delete(e.key);const t=r.get(i)||new Set;t.add(o),r.set(i,t)}t++}catch(e){this._log.error(e.message)}this._log("deleting %d / %d entries",n,t),r.size&&await c((e=>s.commit(e)))();for(const[e,t]of r){const n=h(e),r=this.providers.get(n);if(r){for(const e of t)r.delete(e);0===r.size?this.providers.remove(n):this.providers.set(n,r)}}this._log("Cleanup successful (%dms)",Date.now()-e)}))}async _getProvidersMap(e){const t=h(e);let n=this.providers.get(t);return n||(n=await async function(e,t){const n=new Map,r=e.query({prefix:h(t)});for await(const e of u(r)){const{peerId:t}=f(e.key);n.set(t,p(e.value))}return n}(this.datastore,e),this.providers.set(t,n)),n}get cleanupInterval(){return this._cleanupInterval}set cleanupInterval(e){this._cleanupInterval=e,this._cleaner&&clearInterval(this._cleaner),this._cleaner=setInterval((()=>this._cleanup()),this.cleanupInterval)}async addProvider(e,t){return this.syncQueue.add((async()=>{this._log("addProvider %s",e.toBaseEncodedString());const r=await this._getProvidersMap(e);this._log("loaded %s provs",r.size);const i=Date.now();r.set(d.encodeBase32(t.id),i);const a=h(e);return this.providers.set(a,r),async function(e,t,r,i){const a=[h(t),"/",d.encodeBase32(r.id)].join(""),u=new o(a),l=n.from(s.encode(i));return c((t=>e.put(u,l,t)))()}(this.datastore,e,t,i)}))}async getProviders(e){return this.syncQueue.add((async()=>{this._log("getProviders %s",e.toBaseEncodedString());return[...(await this._getProvidersMap(e)).keys()].map((e=>new i(d.decodeBase32(e))))}))}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"libp2p-kad-dht",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-kad-dht/src/providers.js"}],[4906,{"async/map":1767,"async/setImmediate":1776,"base32.js":1955,buffer:2084,debug:2256,"err-code":2358,"interface-datastore":4414,"libp2p-record":4928,multihashes:5237,"multihashing-async":4878,"peer-id":5413,"xor-distance":6173},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){const r=e("debug"),s=e("multihashing-async"),i=e("multihashes"),o=e("interface-datastore").Key,a=e("base32.js"),c=e("xor-distance"),u=e("async/map"),l=e("libp2p-record").Record,d=e("async/setImmediate"),h=e("peer-id"),f=e("err-code");n.convertBuffer=(e,t)=>{s.digest(e,"sha2-256",t)},n.convertPeerId=(e,t)=>{s.digest(e.id,"sha2-256",t)},n.bufferToKey=e=>new o("/"+n.encodeBase32(e),!1),n.keyForPublicKey=e=>t.concat([t.from("/pk/"),e.id]),n.isPublicKeyKey=e=>"/pk/"===e.slice(0,4).toString(),n.fromPublicKeyKey=e=>new h(e.slice(4)),n.now=()=>Date.now(),n.encodeBase32=e=>(new a.Encoder).write(e).finalize(),n.decodeBase32=e=>{const n=new a.Decoder;return t.from(n.write(e).finalize())},n.sortClosestPeers=(e,t,r)=>{u(e,((e,r)=>{n.convertPeerId(e,((n,s)=>{if(n)return r(n);r(null,{peer:e,distance:c(s,t)})}))}),((e,t)=>{if(e)return r(e);r(null,t.sort(n.xorCompare).map((e=>e.peer)))}))},n.xorCompare=(e,t)=>c.compare(e.distance,t.distance),n.pathSize=(e,t)=>Math.ceil(e/t),n.createPutRecord=(e,t,n)=>{const r=new Date,s=new l(e,t,r);d((()=>{n(null,s.serialize())}))},n.logger=(e,t)=>{const n=["libp2p","dht"];t&&n.push(t),e&&n.push(`${e.toB58String().slice(0,8)}`),r.formatters.b=e=>i.toB58String(e);const s=r(n.join(":"));return s.error=r(n.concat(["error"]).join(":")),s},n.TimeoutError=class extends Error{get code(){return"ETIMEDOUT"}},n.withTimeout=(e,t)=>async(...n)=>Promise.race([e(...n),new Promise(((e,n)=>{setTimeout((()=>{n(f(new Error("Async function did not complete before timeout"),"ETIMEDOUT"))}),t)}))])}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"libp2p-kad-dht",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-kad-dht/src/utils.js"}],[4892,{"../utils":4906,"./run":4894,multihashes:5237},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("multihashes"),s=e("../utils"),i=e("./run");t.exports=class{constructor(e,t,n){this.dht=e,this.key=t,this.makePath=n,this._log=s.logger(this.dht.peerInfo.id,"query:"+r.toB58String(t)),this.running=!1,this._onStart=this._onStart.bind(this),this._onComplete=this._onComplete.bind(this)}async run(e){return this.dht._queryManager.running?0===e.length?(this._log.error("Running query with no peers"),{finalSet:new Set,paths:[]}):(this._run=new i(this),this._log(`query running with K=${this.dht.kBucketSize}, A=${this.dht.concurrency}, D=${Math.min(this.dht.disjointPaths,e.length)}`),this._run.once("start",this._onStart),this._run.once("complete",this._onComplete),this._run.execute(e)):(this._log.error("Attempt to run query after shutdown"),{finalSet:new Set,paths:[]})}_onStart(){this.running=!0,this._startTime=Date.now(),this._log("query:start"),this.dht._queryManager.queryStarted(this)}_onComplete(){this.stop()}stop(){this._log(`query:done in ${Date.now()-this._startTime}ms`),this._run&&this._log(`${this._run.errors.length} of ${this._run.peersSeen.size} peers errored (${this._run.errors.length/this._run.peersSeen.size*100}% fail rate)`),this.running&&(this._run.removeListener("start",this._onStart),this._run.removeListener("complete",this._onComplete),this.running=!1,this._run&&this._run.stop(),this.dht._queryManager.queryCompleted(this))}}}}},{package:"libp2p-kad-dht",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-kad-dht/src/query/index.js"}],[4885,{"./constants":4880,"./message":4884,"./rpc":4905,"./utils":4906,"async/setImmediate":1776,"async/timeout":1780,"err-code":2358,"pull-length-prefixed":5462,"pull-stream":5480},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("pull-stream"),s=e("async/timeout"),i=e("pull-length-prefixed"),o=e("async/setImmediate"),a=e("err-code"),c=e("./rpc"),u=e("./constants"),l=e("./message"),d=e("./utils");function h(e,t,n){r(r.values([t]),i.encode(),e,r.filter((e=>e.length<u.maxMessageSize)),i.decode(),r.collect(((e,t)=>{if(e)return n(e);if(0===t.length)return n(a(new Error("No message received"),"ERR_NO_MESSAGE_RECEIVED"));let r;try{r=l.deserialize(t[0])}catch(e){return n(a(e,"ERR_FAILED_DESERIALIZE_RESPONSE"))}n(null,r)})))}t.exports=class{constructor(e){this.dht=e,this.readMessageTimeout=u.READ_MESSAGE_TIMEOUT,this._log=d.logger(this.dht.peerInfo.id,"net"),this._rpc=c(this.dht),this._onPeerConnected=this._onPeerConnected.bind(this),this._running=!1}start(e){const t=t=>o((()=>e(t)));return this._running?t(a(new Error("Network is already running"),"ERR_NETWORK_ALREADY_RUNNING")):this.dht.isStarted?(this._running=!0,this.dht.switch.handle(u.PROTOCOL_DHT,this._rpc),this.dht.switch.on("peer-mux-established",this._onPeerConnected),void t()):t(a(new Error("Can not start network"),"ERR_CANNOT_START_NETWORK"))}stop(e){const t=t=>o((()=>e(t)));if(!this.dht.isStarted&&!this.isStarted)return t(a(new Error("Network is already stopped"),"ERR_NETWORK_ALREADY_STOPPED"));this._running=!1,this.dht.switch.removeListener("peer-mux-established",this._onPeerConnected),this.dht.switch.unhandle(u.PROTOCOL_DHT),t()}get isStarted(){return this._running}get isConnected(){return this.dht.isStarted&&this.isStarted}_onPeerConnected(e){if(!this.isConnected)return this._log.error("Network is offline");this.dht.switch.dial(e,u.PROTOCOL_DHT,((t,n)=>{if(t)return this._log("%s does not support protocol: %s",e.id.toB58String(),u.PROTOCOL_DHT);r(r.empty(),n),this.dht._add(e,(t=>{if(t)return this._log.error("Failed to add to the routing table",t);this._log("added to the routing table: %s",e.id.toB58String())}))}))}sendRequest(e,t,n){if(!this.isConnected)return n(a(new Error("Network is offline"),"ERR_NETWORK_OFFLINE"));this._log("sending to: %s",e.toB58String()),this.dht.switch.dial(e,u.PROTOCOL_DHT,((e,r)=>{if(e)return n(e);this._writeReadMessage(r,t.serialize(),n)}))}sendMessage(e,t,n){if(!this.isConnected)return o((()=>n(a(new Error("Network is offline"),"ERR_NETWORK_OFFLINE"))));this._log("sending to: %s",e.toB58String()),this.dht.switch.dial(e,u.PROTOCOL_DHT,((e,r)=>{if(e)return n(e);this._writeMessage(r,t.serialize(),n)}))}_writeReadMessage(e,t,n){s(h,this.readMessageTimeout)(e,t,n)}_writeMessage(e,t,n){r(r.values([t]),i.encode(),e,r.onEnd(n))}}}}},{package:"libp2p-kad-dht",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-kad-dht/src/network.js"}],[4981,{"./listener":4982,"./utils":4983,"async/setImmediate":1776,"class-is":2124,debug:2256,events:2085,"interface-connection":4409,mafmt:5193,multiaddr:5211,"peer-id":5413,"peer-info":5414},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("debug")("libp2p:websocket-star"),s=e("multiaddr"),i=e("events").EventEmitter,o=e("peer-id"),a=e("peer-info"),c=e("interface-connection").Connection,u=e("async/setImmediate"),l=e("./utils"),d=e("./listener"),h=l.cleanUrlSIO,f=e("mafmt"),p=e("class-is");t.exports=p(class{constructor(e){e=e||{},this.id=e.id,this.flag=e.allowJoinWithDisabledChallenge,this.discovery=new i,this.discovery.tag="websocketStar",this.discovery.start=e=>{u(e)},this.discovery.stop=e=>{u(e)},this.listeners_list={},this._peerDiscovered=this._peerDiscovered.bind(this)}lazySetId(e){e&&(this.id=e,this.canCrypto=!0)}dial(e,t,n){let r;"function"==typeof t&&(n=t,t={});try{r=h(e)}catch(e){return n(e)}const s=this.listeners_list[r];return s?s.dial(e,t,n):(n(new Error("No listener for this server")),new c)}createListener(e,t){"function"==typeof e&&(t=e,e={});const n=new d({id:this.id,handler:t,listeners:this.listeners_list,flag:this.flag});return n.on("peer",this._peerDiscovered),n}filter(e){return Array.isArray(e)||(e=[e]),e.filter((e=>f.WebSocketStar.matches(e)))}_peerDiscovered(e){r("Peer Discovered:",e);const t=e.split("/ipfs/").pop(),n=o.createFromB58String(t),i=new a(n);i.multiaddrs.add(s(e)),this.discovery.emit("peer",i)}},{className:"WebsocketStar",symbolName:"@libp2p/js-libp2p-websocket-star/websocketstar"})}}},{package:"libp2p-websocket-star",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-websocket-star/src/index.js"}],[6164,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r,s;self.mozRTCPeerConnection||navigator.mozGetUserMedia?(r="moz",s=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10)):(self.webkitRTCPeerConnection||navigator.webkitGetUserMedia)&&(r="webkit",s=navigator.userAgent.match(/Chrom(e|ium)/)&&parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10));var i=self.RTCPeerConnection||self.mozRTCPeerConnection||self.webkitRTCPeerConnection,o=self.mozRTCIceCandidate||self.RTCIceCandidate,a=self.mozRTCSessionDescription||self.RTCSessionDescription,c=self.webkitMediaStream||self.MediaStream,u="https:"===self.location.protocol&&("webkit"===r&&s>=26||"moz"===r&&s>=33),l=self.AudioContext||self.webkitAudioContext,d=self.document&&document.createElement("video"),h=d&&d.canPlayType&&"probably"===d.canPlayType('video/webm; codecs="vp8", vorbis'),f=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia;t.exports={prefix:r,browserVersion:s,support:!!i&&!!f,supportRTCPeerConnection:!!i,supportVp8:h,supportGetUserMedia:!!f,supportDataChannel:!!(i&&i.prototype&&i.prototype.createDataChannel),supportWebAudio:!(!l||!l.prototype.createMediaStreamSource),supportMediaStream:!(!c||!c.prototype.removeTrack),supportScreenSharing:!!u,AudioContext:l,PeerConnection:i,SessionDescription:a,IceCandidate:o,MediaStream:c,getUserMedia:f}}}},{package:"webrtcsupport",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/webrtcsupport/index-browser.js"}],[4978,{multiaddr:5211},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("multiaddr");(n=t.exports).cleanUrlSIO=function(e){const t=e.toString().split("/"),n=e.protos()[1].name,s=e.protos()[2].name,i=e.stringTuples()[1][1];if("tcp"!==n||"ws"!==s&&"wss"!==s)throw new Error("invalid multiaddr: "+e.toString());return r.isName(e)?"ws"===s?"http://"+t[2]+(80===i?"":":"+i):"wss"===s?"https://"+t[2]+(443===i?"":":"+i):void 0:"http://"+t[2]+":"+t[4]},n.cleanMultiaddr=function(e){const t="/libp2p-webrtc-star";if(-1!==e.indexOf(t)){e=e.substring(t.length,e.length);let n=r(e);const s=n.stringTuples().filter((e=>421===e[0]))[0];n=n.decapsulate("ipfs"),n=n.encapsulate("/p2p-webrtc-star"),n=n.encapsulate(`/ipfs/${s[1]}`),e=n.toString()}return e}}}},{package:"libp2p-webrtc-star",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-webrtc-star/src/utils.js"}],[5823,{buffer:2084,debug:2256,"get-browser-rtc":4311,inherits:4407,randombytes:5557,"readable-stream":5838},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){t.exports=u;var r=e("debug")("simple-peer"),s=e("get-browser-rtc"),i=e("inherits"),o=e("randombytes"),a=e("readable-stream"),c=65536;function u(e){var t=this;if(!(t instanceof u))return new u(e);if(t._id=o(4).toString("hex").slice(0,7),t._debug("new peer %o",e),e=Object.assign({allowHalfOpen:!1},e),a.Duplex.call(t,e),t.channelName=e.initiator?e.channelName||o(20).toString("hex"):null,t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||u.channelConfig,t.config=Object.assign({},u.config,e.config),t.offerOptions=e.offerOptions||{},t.answerOptions=e.answerOptions||{},t.sdpTransform=e.sdpTransform||function(e){return e},t.streams=e.streams||(e.stream?[e.stream]:[]),t.trickle=e.trickle===undefined||e.trickle,t.allowHalfTrickle=e.allowHalfTrickle!==undefined&&e.allowHalfTrickle,t.iceCompleteTimeout=e.iceCompleteTimeout||5e3,t.destroyed=!1,t._connected=!1,t.remoteAddress=undefined,t.remoteFamily=undefined,t.remotePort=undefined,t.localAddress=undefined,t.localFamily=undefined,t.localPort=undefined,t._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:s(),!t._wrtc)throw"undefined"==typeof window?d("No WebRTC support: Specify `opts.wrtc` option in this environment","ERR_WEBRTC_SUPPORT"):d("No WebRTC support: Not a supported browser","ERR_WEBRTC_SUPPORT");t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._iceCompleteTimer=null,t._channel=null,t._pendingCandidates=[],t._isNegotiating=!t.initiator,t._batchedNegotiation=!1,t._queuedNegotiation=!1,t._sendersAwaitingStable=[],t._senderMap=new Map,t._firstStable=!0,t._closingInterval=null,t._remoteTracks=[],t._remoteStreams=[],t._chunk=null,t._cb=null,t._interval=null;try{t._pc=new t._wrtc.RTCPeerConnection(t.config)}catch(e){return void setTimeout((()=>t.destroy(e)),0)}t._isReactNativeWebrtc="number"==typeof t._pc._peerConnectionId,t._pc.oniceconnectionstatechange=function(){t._onIceStateChange()},t._pc.onicegatheringstatechange=function(){t._onIceStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},t.initiator?t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)}):t._pc.ondatachannel=function(e){t._setupData(e)},t.streams&&t.streams.forEach((function(e){t.addStream(e)})),t._pc.ontrack=function(e){t._onTrack(e)},t.initiator&&t._needsNegotiation(),t._onFinishBound=function(){t._onFinish()},t.once("finish",t._onFinishBound)}function l(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function d(e,t){var n=new Error(e);return n.code=t,n}i(u,a.Duplex),u.WEBRTC_SUPPORT=!!s(),u.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}],sdpSemantics:"unified-plan"},u.channelConfig={},Object.defineProperty(u.prototype,"bufferSize",{get:function(){return this._channel&&this._channel.bufferedAmount||0}}),Object.defineProperty(u.prototype,"connected",{get:function(){return this._connected&&"open"===this._channel.readyState}}),u.prototype.address=function(){var e=this;return{port:e.localPort,family:e.localFamily,address:e.localAddress}},u.prototype.signal=function(e){var t=this;if(t.destroyed)throw d("cannot signal after peer is destroyed","ERR_SIGNALING");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}t._debug("signal()"),e.renegotiate&&t.initiator&&(t._debug("got request to renegotiate"),t._needsNegotiation()),e.transceiverRequest&&t.initiator&&(t._debug("got request for transceiver"),t.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(t._pc.localDescription&&t._pc.localDescription.type&&t._pc.remoteDescription&&t._pc.remoteDescription.type?t._addIceCandidate(e.candidate):t._pendingCandidates.push(e.candidate)),e.sdp&&t._pc.setRemoteDescription(new t._wrtc.RTCSessionDescription(e)).then((function(){t.destroyed||(t._pendingCandidates.forEach((function(e){t._addIceCandidate(e)})),t._pendingCandidates=[],"offer"===t._pc.remoteDescription.type&&t._createAnswer())})).catch((function(e){t.destroy(d(e,"ERR_SET_REMOTE_DESCRIPTION"))})),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||t.destroy(d("signal() called with invalid signal data","ERR_SIGNALING"))},u.prototype._addIceCandidate=function(e){var t=this,n=new t._wrtc.RTCIceCandidate(e);t._pc.addIceCandidate(n).catch((function(e){var r;!n.address||n.address.endsWith(".local")?(r="Ignoring unsupported ICE candidate.",console.warn(r)):t.destroy(d(e,"ERR_ADD_ICE_CANDIDATE"))}))},u.prototype.send=function(e){this._channel.send(e)},u.prototype.addTransceiver=function(e,t){var n=this;if(n._debug("addTransceiver()"),n.initiator)try{n._pc.addTransceiver(e,t),n._needsNegotiation()}catch(e){n.destroy(e)}else n.emit("signal",{transceiverRequest:{kind:e,init:t}})},u.prototype.addStream=function(e){var t=this;t._debug("addStream()"),e.getTracks().forEach((function(n){t.addTrack(n,e)}))},u.prototype.addTrack=function(e,t){var n=this;n._debug("addTrack()");var r=n._senderMap.get(e)||new Map,s=r.get(t);s?s.removed?n.destroy(d("Track has been removed. You should enable/disable tracks that you want to re-add.","ERR_SENDER_REMOVED")):n.destroy(d("Track has already been added to that stream.","ERR_SENDER_ALREADY_ADDED")):(s=n._pc.addTrack(e,t),r.set(t,s),n._senderMap.set(e,r),n._needsNegotiation())},u.prototype.replaceTrack=function(e,t,n){var r=this;r._debug("replaceTrack()");var s=r._senderMap.get(e),i=s?s.get(n):null;i||r.destroy(d("Cannot replace track that was never added.","ERR_TRACK_NOT_ADDED")),t&&r._senderMap.set(t,s),null!=i.replaceTrack?i.replaceTrack(t):r.destroy(d("replaceTrack is not supported in this browser","ERR_UNSUPPORTED_REPLACETRACK"))},u.prototype.removeTrack=function(e,t){var n=this;n._debug("removeSender()");var r=n._senderMap.get(e),s=r?r.get(t):null;s||n.destroy(d("Cannot remove track that was never added.","ERR_TRACK_NOT_ADDED"));try{s.removed=!0,n._pc.removeTrack(s)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?n._sendersAwaitingStable.push(s):n.destroy(e)}n._needsNegotiation()},u.prototype.removeStream=function(e){var t=this;t._debug("removeSenders()"),e.getTracks().forEach((function(n){t.removeTrack(n,e)}))},u.prototype._needsNegotiation=function(){var e=this;e._debug("_needsNegotiation"),e._batchedNegotiation||(e._batchedNegotiation=!0,setTimeout((function(){e._batchedNegotiation=!1,e._debug("starting batched negotiation"),e.negotiate()}),0))},u.prototype.negotiate=function(){var e=this;e.initiator?e._isNegotiating?(e._queuedNegotiation=!0,e._debug("already negotiating, queueing")):(e._debug("start negotiation"),setTimeout((()=>{e._createOffer()}),0)):e._isNegotiating||(e._debug("requesting negotiation from initiator"),e.emit("signal",{renegotiate:!0})),e._isNegotiating=!0},u.prototype.destroy=function(e){this._destroy(e,(function(){}))},u.prototype._destroy=function(e,t){var n=this;if(!n.destroyed){if(n._debug("destroy (error: %s)",e&&(e.message||e)),n.readable=n.writable=!1,n._readableState.ended||n.push(null),n._writableState.finished||n.end(),n.destroyed=!0,n._connected=!1,n._pcReady=!1,n._channelReady=!1,n._remoteTracks=null,n._remoteStreams=null,n._senderMap=null,clearInterval(n._closingInterval),n._closingInterval=null,clearInterval(n._interval),n._interval=null,n._chunk=null,n._cb=null,n._onFinishBound&&n.removeListener("finish",n._onFinishBound),n._onFinishBound=null,n._channel){try{n._channel.close()}catch(e){}n._channel.onmessage=null,n._channel.onopen=null,n._channel.onclose=null,n._channel.onerror=null}if(n._pc){try{n._pc.close()}catch(e){}n._pc.oniceconnectionstatechange=null,n._pc.onicegatheringstatechange=null,n._pc.onsignalingstatechange=null,n._pc.onicecandidate=null,n._pc.ontrack=null,n._pc.ondatachannel=null}n._pc=null,n._channel=null,e&&n.emit("error",e),n.emit("close"),t()}},u.prototype._setupData=function(e){var t=this;if(!e.channel)return t.destroy(d("Data channel event is missing `channel` property","ERR_DATA_CHANNEL"));t._channel=e.channel,t._channel.binaryType="arraybuffer","number"==typeof t._channel.bufferedAmountLowThreshold&&(t._channel.bufferedAmountLowThreshold=c),t.channelName=t._channel.label,t._channel.onmessage=function(e){t._onChannelMessage(e)},t._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},t._channel.onopen=function(){t._onChannelOpen()},t._channel.onclose=function(){t._onChannelClose()},t._channel.onerror=function(e){t.destroy(d(e,"ERR_DATA_CHANNEL"))};var n=!1;t._closingInterval=setInterval((function(){t._channel&&"closing"===t._channel.readyState?(n&&t._onChannelClose(),n=!0):n=!1}),5e3)},u.prototype._read=function(){},u.prototype._write=function(e,t,n){var r=this;if(r.destroyed)return n(d("cannot write after peer is destroyed","ERR_DATA_CHANNEL"));if(r._connected){try{r.send(e)}catch(e){return r.destroy(d(e,"ERR_DATA_CHANNEL"))}r._channel.bufferedAmount>c?(r._debug("start backpressure: bufferedAmount %d",r._channel.bufferedAmount),r._cb=n):n(null)}else r._debug("write before connect"),r._chunk=e,r._cb=n},u.prototype._onFinish=function(){var e=this;function t(){setTimeout((function(){e.destroy()}),1e3)}e.destroyed||(e._connected?t():e.once("connect",t))},u.prototype._startIceCompleteTimeout=function(){var e=this;e.destroyed||e._iceCompleteTimer||(e._debug("started iceComplete timeout"),e._iceCompleteTimer=setTimeout((function(){e._iceComplete||(e._iceComplete=!0,e._debug("iceComplete timeout completed"),e.emit("iceTimeout"),e.emit("_iceComplete"))}),e.iceCompleteTimeout))},u.prototype._createOffer=function(){var e=this;e.destroyed||e._pc.createOffer(e.offerOptions).then((function(t){function n(){if(!e.destroyed){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})}}e.destroyed||(e.trickle||e.allowHalfTrickle||(t.sdp=l(t.sdp)),t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t).then((function(){if(e._debug("createOffer success"),e.destroyed)return;e.trickle||e._iceComplete?n():e.once("_iceComplete",n)})).catch((function(t){e.destroy(d(t,"ERR_SET_LOCAL_DESCRIPTION"))})))})).catch((function(t){e.destroy(d(t,"ERR_CREATE_OFFER"))}))},u.prototype._requestMissingTransceivers=function(){var e=this;e._pc.getTransceivers&&e._pc.getTransceivers().forEach((t=>{t.mid||!t.sender.track||t.requested||(t.requested=!0,e.addTransceiver(t.sender.track.kind))}))},u.prototype._createAnswer=function(){var e=this;e.destroyed||e._pc.createAnswer(e.answerOptions).then((function(t){function n(){if(!e.destroyed){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp}),e.initiator||e._requestMissingTransceivers()}}e.destroyed||(e.trickle||e.allowHalfTrickle||(t.sdp=l(t.sdp)),t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t).then((function(){if(e.destroyed)return;e.trickle||e._iceComplete?n():e.once("_iceComplete",n)})).catch((function(t){e.destroy(d(t,"ERR_SET_LOCAL_DESCRIPTION"))})))})).catch((function(t){e.destroy(d(t,"ERR_CREATE_ANSWER"))}))},u.prototype._onIceStateChange=function(){var e=this;if(!e.destroyed){var t=e._pc.iceConnectionState,n=e._pc.iceGatheringState;e._debug("iceStateChange (connection: %s) (gathering: %s)",t,n),e.emit("iceStateChange",t,n),"connected"!==t&&"completed"!==t||(e._pcReady=!0,e._maybeReady()),"failed"===t&&e.destroy(d("Ice connection failed.","ERR_ICE_CONNECTION_FAILURE")),"closed"===t&&e.destroy(d("Ice connection closed.","ERR_ICE_CONNECTION_CLOSED"))}},u.prototype.getStats=function(e){var t=this;function n(e){return"[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach((function(t){Object.assign(e,t)})),e}0===t._pc.getStats.length?t._pc.getStats().then((function(t){var r=[];t.forEach((function(e){r.push(n(e))})),e(null,r)}),(function(t){e(t)})):t._isReactNativeWebrtc?t._pc.getStats(null,(function(t){var r=[];t.forEach((function(e){r.push(n(e))})),e(null,r)}),(function(t){e(t)})):t._pc.getStats.length>0?t._pc.getStats((function(r){if(!t.destroyed){var s=[];r.result().forEach((function(e){var t={};e.names().forEach((function(n){t[n]=e.stat(n)})),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,s.push(n(t))})),e(null,s)}}),(function(t){e(t)})):e(null,[])},u.prototype._maybeReady=function(){var e=this;e._debug("maybeReady pc %s channel %s",e._pcReady,e._channelReady),!e._connected&&!e._connecting&&e._pcReady&&e._channelReady&&(e._connecting=!0,function t(){e.destroyed||e.getStats((function(n,r){if(!e.destroyed){n&&(r=[]);var s={},i={},o={},a=!1;if(r.forEach((function(e){"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(s[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(i[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(o[e.id]=e)})),r.forEach((function(e){"transport"===e.type&&e.selectedCandidatePairId&&u(o[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&u(e)})),a||Object.keys(o).length&&!Object.keys(i).length){if(e._connecting=!1,e._connected=!0,e._chunk){try{e.send(e._chunk)}catch(n){return e.destroy(d(n,"ERR_DATA_CHANNEL"))}e._chunk=null,e._debug('sent chunk from "write before connect"');var c=e._cb;e._cb=null,c(null)}"number"!=typeof e._channel.bufferedAmountLowThreshold&&(e._interval=setInterval((function(){e._onInterval()}),150),e._interval.unref&&e._interval.unref()),e._debug("connect"),e.emit("connect")}else setTimeout(t,100)}function u(t){a=!0;var n=i[t.localCandidateId];n&&(n.ip||n.address)?(e.localAddress=n.ip||n.address,e.localPort=Number(n.port)):n&&n.ipAddress?(e.localAddress=n.ipAddress,e.localPort=Number(n.portNumber)):"string"==typeof t.googLocalAddress&&(n=t.googLocalAddress.split(":"),e.localAddress=n[0],e.localPort=Number(n[1])),e.localAddress&&(e.localFamily=e.localAddress.includes(":")?"IPv6":"IPv4");var r=s[t.remoteCandidateId];r&&(r.ip||r.address)?(e.remoteAddress=r.ip||r.address,e.remotePort=Number(r.port)):r&&r.ipAddress?(e.remoteAddress=r.ipAddress,e.remotePort=Number(r.portNumber)):"string"==typeof t.googRemoteAddress&&(r=t.googRemoteAddress.split(":"),e.remoteAddress=r[0],e.remotePort=Number(r[1])),e.remoteAddress&&(e.remoteFamily=e.remoteAddress.includes(":")?"IPv6":"IPv4"),e._debug("connect local: %s:%s remote: %s:%s",e.localAddress,e.localPort,e.remoteAddress,e.remotePort)}}))}())},u.prototype._onInterval=function(){var e=this;!e._cb||!e._channel||e._channel.bufferedAmount>c||e._onChannelBufferedAmountLow()},u.prototype._onSignalingStateChange=function(){var e=this;e.destroyed||("stable"!==e._pc.signalingState||e._firstStable||(e._isNegotiating=!1,e._debug("flushing sender queue",e._sendersAwaitingStable),e._sendersAwaitingStable.forEach((function(t){e._pc.removeTrack(t),e._queuedNegotiation=!0})),e._sendersAwaitingStable=[],e._queuedNegotiation&&(e._debug("flushing negotiation queue"),e._queuedNegotiation=!1,e._needsNegotiation()),e._debug("negotiate"),e.emit("negotiate")),e._firstStable=!1,e._debug("signalingStateChange %s",e._pc.signalingState),e.emit("signalingStateChange",e._pc.signalingState))},u.prototype._onIceCandidate=function(e){var t=this;t.destroyed||(e.candidate&&t.trickle?t.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||t._iceComplete||(t._iceComplete=!0,t.emit("_iceComplete")),e.candidate&&t._startIceCompleteTimeout())},u.prototype._onChannelMessage=function(e){if(!this.destroyed){var t=e.data;t instanceof ArrayBuffer&&(t=n.from(t)),this.push(t)}},u.prototype._onChannelBufferedAmountLow=function(){var e=this;if(!e.destroyed&&e._cb){e._debug("ending backpressure: bufferedAmount %d",e._channel.bufferedAmount);var t=e._cb;e._cb=null,t(null)}},u.prototype._onChannelOpen=function(){var e=this;e._connected||e.destroyed||(e._debug("on channel open"),e._channelReady=!0,e._maybeReady())},u.prototype._onChannelClose=function(){var e=this;e.destroyed||(e._debug("on channel close"),e.destroy())},u.prototype._onTrack=function(e){var t=this;t.destroyed||e.streams.forEach((function(n){t._debug("on track"),t.emit("track",e.track,n),t._remoteTracks.push({track:e.track,stream:n}),t._remoteStreams.some((function(e){return e.id===n.id}))||(t._remoteStreams.push(n),setTimeout((function(){t.emit("stream",n)}),0))}))},u.prototype._debug=function(){var e=this,t=[].slice.call(arguments);t[0]="["+e._id+"] "+t[0],r.apply(null,t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"simple-peer",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/simple-peer/index.js"}],[5841,{"./manager":5842,"./socket":5844,"./url":5845,debug:5846,"socket.io-parser":5850},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./url"),s=e("socket.io-parser"),i=e("./manager"),o=e("debug")("socket.io-client");t.exports=n=c;var a=n.managers={};function c(e,t){"object"==typeof e&&(t=e,e=undefined),t=t||{};var n,s=r(e),c=s.source,u=s.id,l=s.path,d=a[u]&&l in a[u].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||d?(o("ignoring socket cache for %s",c),n=i(c,t)):(a[u]||(o("new io instance for %s",c),a[u]=i(c,t)),n=a[u]),s.query&&!t.query&&(t.query=s.query),n.socket(s.path,t)}n.protocol=s.protocol,n.connect=c,n.Manager=e("./manager"),n.Socket=e("./socket")}}},{package:"socket.io-client",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/socket.io-client/lib/index.js"}],[4989,{},function(){with(this)return function(){"use strict";return function(e,t,n){n.messages={NOT_STARTED_YET:"The libp2p node is not started yet",DHT_DISABLED:"DHT is not available"},n.codes={DHT_DISABLED:"ERR_DHT_DISABLED",PUBSUB_NOT_STARTED:"ERR_PUBSUB_NOT_STARTED",ERR_NODE_NOT_STARTED:"ERR_NODE_NOT_STARTED",ERR_DISCOVERED_SELF:"ERR_DISCOVERED_SELF"}}}},{package:"libp2p",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p/src/errors.js"}],[4986,{superstruct:5909},function(){with(this)return function(){"use strict";return function(e,t,n){const{struct:r,superstruct:s}=e("superstruct"),{optional:i,list:o}=r,a=s(),c=a.union([a.interface({createListener:"function",dial:"function"}),"function"]),u=a({connEncryption:i(o([a("object|function")])),connProtector:a.union(["undefined",a.interface({protect:"function"})]),contentRouting:i(o(["object"])),dht:i(a("null|function|object")),peerDiscovery:i(o([a("object|function")])),peerRouting:i(o(["object"])),streamMuxer:i(o([a("object|function")])),transport:a.intersection([[c],a.interface({length:e=>e>0||"ERROR_EMPTY"})])}),l=a({peerDiscovery:a("object",{autoDial:!0}),relay:a({enabled:"boolean",hop:i(a({enabled:"boolean",active:"boolean"},{enabled:!1,active:!1}))},{enabled:!0}),dht:a("object?",{enabled:!1,kBucketSize:20,randomWalk:{enabled:!1,queriesPerPeriod:1,interval:3e5,timeout:1e4}}),EXPERIMENTAL:a({pubsub:"boolean"},{pubsub:!1})},{}),d=a({switch:"object?",connectionManager:a("object",{minPeers:25}),datastore:"object?",peerInfo:"object",peerBook:"object?",modules:u,config:l});t.exports.validate=e=>{const[t,n]=d.validate(e);if(t)throw new Error(`${t.message}${t.reason?" - "+t.reason:""}`);return n.config.dht.enabled&&a("function|object")(n.modules.dht),n.config.peerDiscovery.autoDial===undefined&&(n.config.peerDiscovery.autoDial=!0),n}}}},{package:"libp2p",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p/src/config.js"}],[4990,{"err-code":2358,multiaddr:5211,"peer-id":5413,"peer-info":5414},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("peer-id"),s=e("peer-info"),i=e("multiaddr"),o=e("err-code");t.exports=e=>function(t,n){let a;if(s.isPeerInfo(t))a=t;else if(i.isMultiaddr(t)||"string"==typeof t){if("string"==typeof t)try{t=i(t)}catch(e){return n(o(e,"ERR_INVALID_MULTIADDR"))}const c=t.getPeerId();if(!c)return n(o(new Error("peer multiaddr instance or string must include peerId"),"ERR_INVALID_MULTIADDR"));try{a=e.peerBook.get(c)}catch(e){a=new s(r.createFromB58String(c))}a.multiaddrs.add(t)}else{if(!r.isPeerId(t))return n(o(new Error(`${a} is not a valid peer type`),"ERR_INVALID_PEER_TYPE"));{const r=t.toB58String();try{a=e.peerBook.get(r)}catch(r){return e.peerRouting.findPeer(t,n)}}}n(null,a)}}}},{package:"libp2p",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p/src/get-peer-info.js"}],[4992,{"async/tryEach":1781,"err-code":2358},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("async/tryEach"),s=e("err-code");t.exports=e=>{const t=e._modules.peerRouting||[];return e._dht&&t.unshift(e._dht),{findPeer:(e,n,i)=>{"function"==typeof n&&(i=n,n={}),t.length||i(s(new Error("No peer routers available"),"NO_ROUTERS_AVAILABLE"));const o=t.map((t=>r=>t.findPeer(e,n,((e,t)=>e?r(e):t&&0!==Object.keys(t).length?void r(null,t):r(s(new Error("not found"),"NOT_FOUND"),null)))));r(o,((e,t)=>{if(e)return i(e);i(null,t=t||[])}))}}}}}},{package:"libp2p",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p/src/peer-routing.js"}],[4988,{"./errors":4989,"async/nextTick":1770,"err-code":2358},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("async/nextTick"),s=e("err-code"),{messages:i,codes:o}=e("./errors");t.exports=e=>({put:(t,n,a)=>{if(!e._dht)return r(a,s(new Error(i.DHT_DISABLED),o.DHT_DISABLED));e._dht.put(t,n,a)},get:(t,n,a)=>{if("function"==typeof n&&(a=n,n={}),!e._dht)return r(a,s(new Error(i.DHT_DISABLED),o.DHT_DISABLED));e._dht.get(t,n,a)},getMany:(t,n,a,c)=>{if("function"==typeof a&&(c=a,a={}),!e._dht)return r(c,s(new Error(i.DHT_DISABLED),o.DHT_DISABLED));e._dht.getMany(t,n,a,c)}})}}},{package:"libp2p",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p/src/dht.js"}],[4994,{once:5310},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("once");t.exports.emitFirst=function(e,t,n){n=r(n),t.forEach((r=>{e.once(r,((...r)=>{t.forEach((t=>{e.removeListener(t,n)})),n.apply(e,r)}))}))}}}},{package:"libp2p",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p/src/util/index.js"}],[4987,{"async/parallel":1771,"async/tryEach":1781,"err-code":2358},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("async/tryEach"),s=e("async/parallel"),i=e("err-code");t.exports=e=>{const t=e._modules.contentRouting||[];return e._dht&&t.unshift(e._dht),{findProviders:(e,n,s)=>{if("function"==typeof n?(s=n,n={}):"number"==typeof n&&(n={maxTimeout:n}),!t.length)return s(i(new Error("No content routers available"),"NO_ROUTERS_AVAILABLE"));const o=t.map((t=>r=>t.findProviders(e,n,((e,t)=>e?r(e):t&&0!==Object.keys(t).length?void r(null,t):r(i(new Error("not found"),"NOT_FOUND"),null)))));r(o,((e,t)=>{if(e&&"NOT_FOUND"!==e.code)return s(e);s(null,t=t||[])}))},provide:(e,n)=>{if(!t.length)return n(i(new Error("No content routers available"),"NO_ROUTERS_AVAILABLE"));s(t.map((t=>n=>t.provide(e,n))),n)}}}}}},{package:"libp2p",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p/src/content-routing.js"}],[4913,{"./handler":4912,"./ping":4914},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("./handler");(n=t.exports=e("./ping")).mount=r.mount,n.unmount=r.unmount}}},{package:"libp2p-ping",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-ping/src/index.js"}],[4993,{"../../is-buffer/index.js":4689,"./errors":4989,"async/nextTick":1770,"err-code":2358,"libp2p-floodsub":4870},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("async/nextTick"),{messages:s,codes:i}=e("./errors"),o=e("libp2p-floodsub"),a=e("err-code");t.exports=e=>{const t=new o(e);return e._floodSub=t,{subscribe:(n,o,c,u)=>{if("function"==typeof o&&(u=c,c=o,o={}),!e.isStarted()&&!t.started)return r(u,a(new Error(s.NOT_STARTED_YET),i.PUBSUB_NOT_STARTED));var l;l=u,0===t.listenerCount(n)&&t.subscribe(n),t.on(n,c),r(l)},unsubscribe:(n,o,c)=>{if(!e.isStarted()&&!t.started)return r(c,a(new Error(s.NOT_STARTED_YET),i.PUBSUB_NOT_STARTED));o||c?t.removeListener(n,o):t.removeAllListeners(n),0===t.listenerCount(n)&&t.unsubscribe(n),"function"==typeof c&&r((()=>c()))},publish:(o,c,u)=>e.isStarted()||t.started?n.isBuffer(c)?void t.publish(o,c,u):r(u,a(new Error("data must be a Buffer"),"ERR_DATA_IS_NOT_A_BUFFER")):r(u,a(new Error(s.NOT_STARTED_YET),i.PUBSUB_NOT_STARTED)),ls:n=>{if(!e.isStarted()&&!t.started)return r(n,a(new Error(s.NOT_STARTED_YET),i.PUBSUB_NOT_STARTED));const o=Array.from(t.subscriptions);r((()=>n(null,o)))},peers:(n,o)=>{if(!e.isStarted()&&!t.started)return r(o,a(new Error(s.NOT_STARTED_YET),i.PUBSUB_NOT_STARTED));"function"==typeof n&&(o=n,n=null);const c=Array.from(t.peers.values()).filter((e=>!n||e.topics.has(n))).map((e=>e.info.id.toB58String()));r((()=>o(null,c)))},setMaxListeners:e=>t.setMaxListeners(e)}}}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"libp2p",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p/src/pubsub.js"}],[4825,{debug:2256,events:2085,"latency-monitor":4782},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("events"),s=e("latency-monitor").default,i=e("debug")("libp2p:connection-manager"),o={maxPeers:Infinity,minPeers:0,maxData:Infinity,maxSentData:Infinity,maxReceivedData:Infinity,maxEventLoopDelay:Infinity,pollInterval:2e3,movingAverageInterval:6e4,defaultPeerValue:1};function a(e,t){return e[1]-t[1]}function c(e){return e.name.toLowerCase()}t.exports=class extends r{constructor(e,t){if(super(),this._libp2p=e,this._options=Object.assign({},o,t),this._options.maxPeersPerProtocol=function(e){e||(e={});return Object.keys(e).forEach((t=>{const n=e[t];delete e[t],e[t.toLowerCase()]=n})),e}(this._options.maxPeersPerProtocol),i("options: %j",this._options),this._stats=e.stats,t&&!this._stats)throw new Error("No libp2p.stats");this._peerValues=new Map,this._peers=new Map,this._peerProtocols=new Map,this._peerCountPerProtocol=new Map,this._onStatsUpdate=this._onStatsUpdate.bind(this),this._onPeerConnect=this._onPeerConnect.bind(this),this._onPeerDisconnect=this._onPeerDisconnect.bind(this),this._libp2p.isStarted()?this._onceStarted():this._libp2p.once("start",this._onceStarted.bind(this))}start(){this._stats.on("update",this._onStatsUpdate),this._libp2p.on("connection:start",this._onPeerConnect),this._libp2p.on("connection:end",this._onPeerDisconnect),this._latencyMonitor=new s({dataEmitIntervalMs:this._options.pollInterval}),this._onLatencyMeasure=this._onLatencyMeasure.bind(this),this._latencyMonitor.on("data",this._onLatencyMeasure)}stop(){this._stats.removeListener("update",this._onStatsUpdate),this._libp2p.removeListener("connection:start",this._onPeerConnect),this._libp2p.removeListener("connection:end",this._onPeerDisconnect),this._latencyMonitor.removeListener("data",this._onLatencyMeasure)}setPeerValue(e,t){if(t<0||t>1)throw new Error("value should be a number between 0 and 1");e.toB58String&&(e=e.toB58String()),this._peerValues.set(e,t)}_onceStarted(){this._peerId=this._libp2p.peerInfo.id.toB58String()}_onStatsUpdate(){const e=this._stats.global.movingAverages,t=e.dataReceived[this._options.movingAverageInterval].movingAverage();this._checkLimit("maxReceivedData",t);const n=e.dataSent[this._options.movingAverageInterval].movingAverage();this._checkLimit("maxSentData",n);const r=t+n;this._checkLimit("maxData",r),i("stats update",r)}_onPeerConnect(e){const t=e.id.toB58String();i("%s: connected to %s",this._peerId,t),this._peerValues.set(t,this._options.defaultPeerValue),this._peers.set(t,e),this.emit("connected",t),this._checkLimit("maxPeers",this._peers.size),function(e){const t=new Set;return e.multiaddrs.forEach((e=>{e.protos().map(c).forEach((e=>{t.add(e)}))})),Array.from(t)}(e).forEach((e=>{this._peerCountPerProtocol[e]||(this._peerCountPerProtocol[e]=0),this._peerCountPerProtocol[e]++;let n=this._peerProtocols[t];n||(n=this._peerProtocols[t]=new Set),n.add(e),this._checkProtocolMaxPeersLimit(e,this._peerCountPerProtocol[e])}))}_onPeerDisconnect(e){const t=e.id.toB58String();i("%s: disconnected from %s",this._peerId,t),this._peerValues.delete(t),this._peers.delete(t);const n=this._peerProtocols[t];n&&Array.from(n).forEach((e=>{this._peerCountPerProtocol[e]&&this._peerCountPerProtocol[e]--})),this.emit("disconnected",t)}_onLatencyMeasure(e){this._checkLimit("maxEventLoopDelay",e.avgMs)}_checkLimit(e,t){const n=this._options[e];i("checking limit of %s. current value: %d of %d",e,t,n),t>n&&(i("%s: limit exceeded: %s, %d",this._peerId,e,t),this.emit("limit:exceeded",e,t),this._maybeDisconnectOne())}_checkProtocolMaxPeersLimit(e,t){i("checking protocol limit. current value of %s is %d",e,t);t>this._options.maxPeersPerProtocol[e]&&(i("%s: protocol max peers limit exceeded: %s, %d",this._peerId,e,t),this.emit("limit:exceeded",e,t),this._maybeDisconnectOne())}_maybeDisconnectOne(){if(this._options.minPeers<this._peerValues.size){const e=Array.from(this._peerValues).sort(a);i("%s: sorted peer values: %j",this._peerId,e);const t=e[0];if(t){const e=t[0];i("%s: lowest value peer is %s",this._peerId,e),i("%s: forcing disconnection from %j",this._peerId,e),this._disconnectPeer(e)}}}_disconnectPeer(e){i("preemptively disconnecting peer",e),this.emit("%s: disconnect:preemptive",this._peerId,e);const t=this._peers.get(e);this._libp2p.hangUp(t,(e=>{e&&this.emit("error",e)}))}}}}},{package:"libp2p-connection-manager",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-connection-manager/src/index.js"}],[4965,{"./connection/handler":4955,"./connection/manager":4958,"./dialer":4960,"./errors":4963,"./get-peer-info":4964,"./observer":4969,"./plaintext":4970,"./protocol-muxer":4971,"./stats":4972,"./transport":4975,assert:1703,"async/each":1736,"async/eachSeries":1741,"async/series":1775,debug:2256,events:2085,"fsm-event":4306,"libp2p-circuit":4821},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("fsm-event"),s=e("events").EventEmitter,i=e("async/each"),o=e("async/eachSeries"),a=e("async/series"),c=e("libp2p-circuit"),u=e("./transport"),l=e("./connection/manager"),d=e("./get-peer-info"),h=e("./dialer"),f=e("./connection/handler"),p=e("./protocol-muxer"),m=e("./plaintext"),g=e("./observer"),y=e("./stats"),_=e("assert"),b=e("./errors"),v=e("debug"),w=v("libp2p:switch");w.error=v("libp2p:switch:error");t.exports=class extends s{constructor(e,t,n){super(),_(e,"You must provide a `peerInfo`"),_(t,"You must provide a `peerBook`"),this._peerInfo=e,this._peerBook=t,this._options=n||{},this.setMaxListeners(Infinity),this.transports={},this.conns={},this.protocols={},this.muxers={},this.identify=!1,this.crypto=m,this.protector=this._options.protector||null,this.transport=new u(this),this.connection=new l(this),this.observer=g(this),this.stats=y(this.observer,this._options.stats),this.protocolMuxer=p(this.protocols,this.observer),this._connectionHandler=f(this),this.state=new r("STOPPED",{STOPPED:{start:"STARTING",stop:"STOPPING"},STARTING:{done:"STARTED",stop:"STOPPING"},STARTED:{stop:"STOPPING",start:"STARTED"},STOPPING:{stop:"STOPPING",done:"STOPPED"}}),this.state.on("STARTING",(()=>{w("The switch is starting"),this._onStarting()})),this.state.on("STOPPING",(()=>{w("The switch is stopping"),this._onStopping()})),this.state.on("STARTED",(()=>{w("The switch has started"),this.emit("start")})),this.state.on("STOPPED",(()=>{w("The switch has stopped"),this.emit("stop")})),this.state.on("error",(e=>{w.error(e),this.emit("error",e)})),this.dialer=h(this),this.dial=this.dialer.dial,this.dialFSM=this.dialer.dialFSM}availableTransports(e){const t=e.multiaddrs.toArray();return Object.keys(this.transports).filter((e=>this.transports[e].filter(t).length>0)).sort(((e,t)=>e===c.tag?1:t===c.tag||e<t?-1:1))}handle(e,t,n){this.protocols[e]={handlerFunc:t,matchFunc:n},this._peerInfo.protocols.add(e)}unhandle(e){this.protocols[e]&&delete this.protocols[e],this._peerInfo.protocols.delete(e)}hangUp(e,t){const n=d(e,this._peerBook).id.toB58String(),r=[...this.connection.getAllById(n)];i(r,((e,t)=>{e.once("close",t),e.close()}),t)}hasTransports(){const e=Object.keys(this.transports).filter((e=>e!==c.tag));return e&&e.length>0}start(e=(()=>{})){this.once("start",e),this.state("start")}stop(e=(()=>{})){this.once("stop",e),this.state("stop")}_onStarting(){this.stats.start(),o(this.availableTransports(this._peerInfo),((e,t)=>{this.transport.listen(e,{},null,t)}),(e=>{if(e)return w.error(e),this.emit("error",e),this.state("stop");this.state("done")}))}_onStopping(){this.stats.stop(),a([e=>{i(this.transports,((e,t)=>{i(e.listeners,((e,t)=>{e.close((e=>{e&&w.error(e),t()}))}),t)}),e)},e=>i(this.connection.getAll(),((e,t)=>{e.once("close",t),e.close()}),e)],(e=>{this.state("done")}))}},t.exports.errors=b}}},{package:"libp2p-switch",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/libp2p-switch/src/index.js"}],[5456,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){var t,n=!1;function r(r){if(!r)throw new Error("must be passed a readable");t=r,n&&e(t)}return r.resolve=r.ready=r.start=function(s){return n=!0,e=s||e,t&&e(t),r},r}}}},{package:"pull-defer",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-defer/sink.js"}],[5458,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){var e,t,n,r,s;function i(i){return s?s(i):(e=i,function(e,s){t?t(e,s):(r=e,n=s)})}return i.resolve=function(i){if(s)throw new Error("already resolved");if(!(s=i))throw new Error("resolve *must* be passed a transform stream");e&&(t=s(e),n&&t(r,n))},i}}}},{package:"pull-defer",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-defer/through.js"}],[5454,{"./sink":5456,"./source":5457},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./source"),s=e("./sink");t.exports=function(){var e=r(),t=s();return{source:e,sink:t,resolve:function(n){e.resolve(n.source),t.resolve(n.sink)}}}}}},{package:"pull-defer",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-defer/duplex.js"}],[1710,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=async e=>{let t;for await(const n of e)t=n;return t}}}},{package:"async-iterator-last",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async-iterator-last/index.js"}],[4513,{"./dag-cbor":4512,"./raw":4514,"./unixfs-v1":4518,"err-code":2358},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("err-code"),s={"dag-pb":e("./unixfs-v1"),raw:e("./raw"),"dag-cbor":e("./dag-cbor")},i=(e,t,n,o,a,c)=>{const u=s[e.codec];if(!u)throw r(new Error(`No resolver for codec ${e.codec}`),"ERR_NO_RESOLVER");return u(e,t,n,o,i,a,c)};t.exports=i}}},{package:"ipfs-unixfs-exporter",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-unixfs-exporter/src/resolvers/index.js"}],[5508,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e,t,n){e(t),n&&n(!0===t?null:t)}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/util/abort-cb.js"}],[5510,{"./prop":5509},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("./prop");function s(e){return e}t.exports=function(e){return"object"==typeof e&&"function"==typeof e.test?function(t){return e.test(t)}:r(e)||s}}}},{package:"pull-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/pull-stream/util/tester.js"}],[4542,{},function(){with(this)return function(){"use strict";return function(e,t,n){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
t.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}}}},{package:"is-buffer",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-utils/node_modules/is-buffer/index.js"}],[5187,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(e){!function t(){var n=!0,r=!1;do{r=!0,n=!1,e.call(this,(function(){r?n=!0:t()})),r=!1}while(n)}()}}}},{package:"looper",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/looper/index.js"}],[4537,{"./dir":4534,"./dir-flat":4532,"./flat-to-shard":4535,"./utils/to-path-components":4539,"async-iterator-first":1709,"err-code":2358},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("./dir-flat"),s=e("./flat-to-shard"),i=e("./dir"),o=e("./utils/to-path-components"),a=e("err-code"),c=e("async-iterator-first");async function u(e,t,n){const a=o(e.path||""),c=a.length-1;let u=t,l="";for(let o=0;o<a.length;o++){const d=a[o];l+=`${l?"/":""}${d}`;const h=o===c;if(u.dirty=!0,u.cid=null,u.size=null,h)await u.put(d,e),t=await s(null,u,n.shardSplitThreshold,n);else{let e=await u.get(d);e&&e instanceof i||(e=new r({dir:!0,parent:u,parentKey:d,path:l,dirty:!0,flat:!0},n)),await u.put(d,e),u=e}}return t}t.exports=async function*(e,t,n){let s=new r({root:!0,dir:!0,path:"",dirty:!0,flat:!0},n);for await(const t of e)s=await u(t,s,n),yield t;if(s){if(!n.wrapWithDirectory){if(s.childCount()>1)throw a(new Error("detected more than one root"),"ERR_MORE_THAN_ONE_ROOT");const e=await c(s.eachChildSeries());if(!e)return;s=e.child}if(!s.dir)return;for await(const e of s.flush(s.path,t))yield e}}}}},{package:"ipfs-unixfs-importer",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-unixfs-importer/src/tree-builder.js"}],[4530,{"../chunker":4523,"./dir":4525,"./file":4528,"./validate-chunks":4531},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("./dir"),s=e("./file"),i=e("../chunker"),o=e("./validate-chunks");t.exports=async function*(e,t,n){for await(const a of e)if(a.path&&("./"===a.path.substring(0,2)&&(n.wrapWithDirectory=!0),a.path=a.path.split("/").filter((e=>e&&"."!==e)).join("/")),a.content){let e=a.content;(e[Symbol.asyncIterator]||e[Symbol.iterator])&&e.length===undefined||(e={[Symbol.iterator]:function*(){yield a.content}});const r=i(n.chunker,o(e),n.chunkerOptions);yield s(a,r,t,n)}else yield r(a,t,n)}}}},{package:"ipfs-unixfs-importer",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-unixfs-importer/src/dag-builder/index.js"}],[4557,{"./lib/_stream_duplex.js":4544,"./lib/_stream_passthrough.js":4545,"./lib/_stream_readable.js":4546,"./lib/_stream_transform.js":4547,"./lib/_stream_writable.js":4548,"./lib/internal/streams/end-of-stream.js":4552,"./lib/internal/streams/pipeline.js":4554},function(){with(this)return function(){"use strict";return function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-utils/node_modules/readable-stream/readable-browser.js"}],[4567,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r={};function s(e,t,n){n||(n=Error);var s=function(e){var n,r;function s(n,r,s){return e.call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,r,s))||this}return r=e,(n=s).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,s}(n);s.prototype.name=n.name,s.prototype.code=e,r[e]=s}function i(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}s("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),s("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,s,o,a;if("string"==typeof t&&(s="not ",t.substr(!o||o<0?0:+o,s.length)===s)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(n===undefined||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))a="The ".concat(e," ").concat(r," ").concat(i(t,"type"));else{var c=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(c," ").concat(r," ").concat(i(t,"type"))}return a+=". Received type ".concat(typeof n)}),TypeError),s("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),s("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),s("ERR_STREAM_PREMATURE_CLOSE","Premature close"),s("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),s("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),s("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),s("ERR_STREAM_WRITE_AFTER_END","write after end"),s("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),s("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),s("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/node_modules/readable-stream/errors-browser.js"}],[4575,{_process:5423},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){function n(e,t){s(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(e,t){e.emit("error",t)}t.exports={destroy:function(t,i){var o=this,a=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return a||c?(i?i(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(s,this,t)):e.nextTick(s,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!i&&t?o._writableState?o._writableState.errorEmitted?e.nextTick(r,o):(o._writableState.errorEmitted=!0,e.nextTick(n,o,t)):e.nextTick(n,o,t):i?(e.nextTick(r,o),i(t)):e.nextTick(r,o)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/node_modules/readable-stream/lib/internal/streams/destroy.js"}],[4580,{events:2085},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("events").EventEmitter}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/node_modules/readable-stream/lib/internal/streams/stream-browser.js"}],[4579,{"../../../errors":4567},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,s){var i=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,s,n);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new r(s?n:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/node_modules/readable-stream/lib/internal/streams/state.js"}],[4577,{},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/node_modules/readable-stream/lib/internal/streams/from-browser.js"}],[4574,{buffer:2084,util:2083},function(){with(this)return function(){"use strict";return function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=e("buffer").Buffer,a=e("util").inspect,c=a&&a.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n,u;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t,n,r,s=o.allocUnsafe(e>>>0),i=this.head,a=0;i;)t=i.data,n=s,r=a,o.prototype.copy.call(t,n,r),a+=i.data.length,i=i.next;return s}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var s=t.data,i=e>s.length?s.length:e;if(i===s.length?r+=s:r+=s.slice(0,e),0==(e-=i)){i===s.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=s.slice(i));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var s=n.data,i=e>s.length?s.length:e;if(s.copy(t,t.length-e,0,i),0==(e-=i)){i===s.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=s.slice(i));break}++r}return this.length-=r,t}},{key:c,value:function(e,t){return a(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&i(t.prototype,n),u&&i(t,u),e}()}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/node_modules/readable-stream/lib/internal/streams/buffer_list.js"}],[4573,{"./end-of-stream":4576,_process:5423},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=e("./end-of-stream"),o=Symbol("lastResolve"),a=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),l=Symbol("lastPromise"),d=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t=e[o];if(null!==t){var n=e[h].read();null!==n&&(e[l]=null,e[o]=null,e[a]=null,t(f(n,!1)))}}function m(e){n.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((s(r={get stream(){return this[h]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(f(undefined,!0));if(this[h].destroyed)return new Promise((function(t,r){n.nextTick((function(){e[c]?r(e[c]):t(f(undefined,!0))}))}));var r,s=this[l];if(s)r=new Promise(function(e,t){return function(n,r){e.then((function(){t[u]?n(f(undefined,!0)):t[d](n,r)}),r)}}(s,this));else{var i=this[h].read();if(null!==i)return Promise.resolve(f(i,!1));r=new Promise(this[d])}return this[l]=r,r}},Symbol.asyncIterator,(function(){return this})),s(r,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(f(undefined,!0))}))}))})),r),g);t.exports=function(e){var t,n=Object.create(y,(s(t={},h,{value:e,writable:!0}),s(t,o,{value:null,writable:!0}),s(t,a,{value:null,writable:!0}),s(t,c,{value:null,writable:!0}),s(t,u,{value:e._readableState.endEmitted,writable:!0}),s(t,d,{value:function(e,t){var r=n[h].read();r?(n[l]=null,n[o]=null,n[a]=null,e(f(r,!1))):(n[o]=e,n[a]=t)},writable:!0}),t));return n[l]=null,i(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[a];return null!==t&&(n[l]=null,n[o]=null,n[a]=null,t(e)),void(n[c]=e)}var r=n[o];null!==r&&(n[l]=null,n[o]=null,n[a]=null,r(f(undefined,!0))),n[u]=!0})),e.on("readable",m.bind(null,n)),n}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs/node_modules/readable-stream/lib/internal/streams/async_iterator.js"}],[1722,{"../../../errors":1713},function(){with(this)return function(){"use strict";return function(e,t,n){var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function s(){}t.exports=function e(t,n,i){if("function"==typeof n)return e(t,null,n);n||(n={}),i=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];e.apply(this,r)}}}(i||s);var o=n.readable||!1!==n.readable&&t.readable,a=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){a=!1,u=!0,o||i.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){o=!1,d=!0,a||i.call(t)},f=function(e){i.call(t,e)},p=function(){var e;return o&&!d?(t._readableState&&t._readableState.ended||(e=new r),i.call(t,e)):a&&!u?(t._writableState&&t._writableState.ended||(e=new r),i.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?a&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",l),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",h),t.on("finish",l),!1!==n.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",f),t.removeListener("close",p)}}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async-iterator-to-stream/node_modules/readable-stream/lib/internal/streams/end-of-stream.js"}],[1724,{"../../../errors":1713,"./end-of-stream":1722},function(){with(this)return function(){"use strict";return function(e,t,n){var r;var s=e("../../../errors").codes,i=s.ERR_MISSING_ARGS,o=s.ERR_STREAM_DESTROYED;function a(e){if(e)throw e}function c(t,n,s,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var a=!1;t.on("close",(function(){a=!0})),r===undefined&&(r=e("./end-of-stream")),r(t,{readable:n,writable:s},(function(e){if(e)return i(e);a=!0,i()}));var c=!1;return function(e){if(!a&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void i(e||new o("pipe"))}}function u(e){e()}function l(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?a:e.pop():a}t.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,s=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new i("streams");var o=t.map((function(e,n){var i=n<t.length-1;return c(e,i,n>0,(function(e){r||(r=e),e&&o.forEach(u),i||(o.forEach(u),s(r))}))}));return t.reduce(l)}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async-iterator-to-stream/node_modules/readable-stream/lib/internal/streams/pipeline.js"}],[1714,{"./_stream_readable":1716,"./_stream_writable":1718,_process:5423,inherits:4407},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=u;var s=e("./_stream_readable"),i=e("./_stream_writable");e("inherits")(u,s);for(var o=r(i.prototype),a=0;a<o.length;a++){var c=o[a];u.prototype[c]||(u.prototype[c]=i.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);s.call(this,e),i.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||n.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async-iterator-to-stream/node_modules/readable-stream/lib/_stream_duplex.js"}],[1715,{"./_stream_transform":1717,inherits:4407},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=s;var r=e("./_stream_transform");function s(e){if(!(this instanceof s))return new s(e);r.call(this,e)}e("inherits")(s,r),s.prototype._transform=function(e,t,n){n(null,e)}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async-iterator-to-stream/node_modules/readable-stream/lib/_stream_passthrough.js"}],[1718,{"../errors":1713,"./_stream_duplex":1714,"./internal/streams/destroy":1721,"./internal/streams/state":1725,"./internal/streams/stream":1726,_process:5423,buffer:2084,inherits:4407,"util-deprecate":6011},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){function r(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var s=r.callback;t.pendingcb--,s(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var s;t.exports=S,S.WritableState=E;var i={deprecate:e("util-deprecate")},o=e("./internal/streams/stream"),a=e("buffer").Buffer,c=global.Uint8Array||function(){};var u,l=e("./internal/streams/destroy"),d=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,f=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,y=h.ERR_STREAM_DESTROYED,_=h.ERR_STREAM_NULL_VALUES,b=h.ERR_STREAM_WRITE_AFTER_END,v=h.ERR_UNKNOWN_ENCODING,w=l.errorOrDestroy;function k(){}function E(t,i,o){s=s||e("./_stream_duplex"),t=t||{},"boolean"!=typeof o&&(o=i instanceof s),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,s=r.sync,i=r.writecb;if("function"!=typeof i)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,s,i){--t.pendingcb,r?(n.nextTick(i,s),n.nextTick(M,e,t),e._writableState.errorEmitted=!0,w(e,s)):(i(s),e._writableState.errorEmitted=!0,w(e,s),M(e,t))}(e,r,s,t,i);else{var o=R(r)||e.destroyed;o||r.corked||r.bufferProcessing||!r.bufferedRequest||A(e,r),s?n.nextTick(C,e,r,o,i):C(e,r,o,i)}}(i,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function S(t){var n=this instanceof(s=s||e("./_stream_duplex"));if(!n&&!u.call(S,this))return new S(t);this._writableState=new E(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),o.call(this)}function x(e,t,n,r,s,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(s,t.onwrite):e._write(s,i,t.onwrite),t.sync=!1}function C(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),M(e,t)}function A(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var s=t.bufferedRequestCount,i=new Array(s),o=t.corkedRequestsFree;o.entry=n;for(var a=0,c=!0;n;)i[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;i.allBuffers=c,x(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new r(t),t.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,d=n.callback;if(x(e,t,!1,t.objectMode?1:u.length,u,l,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function R(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function P(e,t){e._final((function(n){t.pendingcb--,n&&w(e,n),t.prefinished=!0,e.emit("prefinish"),M(e,t)}))}function M(e,t){var r=R(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(P,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var s=e._readableState;(!s||s.autoDestroy&&s.endEmitted)&&e.destroy()}return r}e("inherits")(S,o),E.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(E.prototype,"buffer",{get:i.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===S&&(e&&e._writableState instanceof E)}})):u=function(e){return e instanceof this},S.prototype.pipe=function(){w(this,new g)},S.prototype.write=function(e,t,r){var s,i=this._writableState,o=!1,u=!i.objectMode&&(s=e,a.isBuffer(s)||s instanceof c);return u&&!a.isBuffer(e)&&(e=function(e){return a.from(e)}(e)),"function"==typeof t&&(r=t,t=null),u?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=k),i.ending?function(e,t){var r=new b;w(e,r),n.nextTick(t,r)}(this,r):(u||function(e,t,r,s){var i;return null===r?i=new _:"string"==typeof r||t.objectMode||(i=new f("chunk",["string","Buffer"],r)),!i||(w(e,i),n.nextTick(s,i),!1)}(this,i,e,r))&&(i.pendingcb++,o=function(e,t,n,r,s,i){if(!n){var o=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,n));return t}(t,r,s);r!==o&&(n=!0,s="buffer",r=o)}var c=t.objectMode?1:r.length;t.length+=c;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:s,isBuf:n,callback:i,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else x(e,t,!1,c,r,s,i);return u}(this,i,u,e,t,r)),o},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new v(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,n){n(new p("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,r){var s=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&e!==undefined&&this.write(e,t),s.corked&&(s.corked=1,this.uncork()),s.ending||function(e,t,r){t.ending=!0,M(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,s,r),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=l.destroy,S.prototype._undestroy=l.undestroy,S.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async-iterator-to-stream/node_modules/readable-stream/lib/_stream_writable.js"}],[1717,{"../errors":1713,"./_stream_duplex":1714,inherits:4407},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=l;var r=e("../errors").codes,s=r.ERR_METHOD_NOT_IMPLEMENTED,i=r.ERR_MULTIPLE_CALLBACK,o=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,c=e("./_stream_duplex");function u(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new i);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var s=this._readableState;s.reading=!1,(s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);c.call(this,e),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}e("inherits")(l,c),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,n){n(new s("_transform()"))},l.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var s=this._readableState;(r.needTransform||s.needReadable||s.length<s.highWaterMark)&&this._read(s.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async-iterator-to-stream/node_modules/readable-stream/lib/_stream_transform.js"}],[1716,{"../errors":1713,"./_stream_duplex":1714,"./internal/streams/async_iterator":1719,"./internal/streams/buffer_list":1720,"./internal/streams/destroy":1721,"./internal/streams/from":1723,"./internal/streams/state":1725,"./internal/streams/stream":1726,_process:5423,buffer:2084,events:2085,inherits:4407,"string_decoder/":5900,util:2083},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){var r;t.exports=S,S.ReadableState=E;e("events").EventEmitter;var s=function(e,t){return e.listeners(t).length},i=e("./internal/streams/stream"),o=e("buffer").Buffer,a=global.Uint8Array||function(){};var c,u=e("util");c=u&&u.debuglog?u.debuglog("stream"):function(){};var l,d,h,f=e("./internal/streams/buffer_list"),p=e("./internal/streams/destroy"),m=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,y=g.ERR_INVALID_ARG_TYPE,_=g.ERR_STREAM_PUSH_AFTER_EOF,b=g.ERR_METHOD_NOT_IMPLEMENTED,v=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(S,i);var w=p.errorOrDestroy,k=["error","close","destroy","pause","resume"];function E(t,n,s){r=r||e("./_stream_duplex"),t=t||{},"boolean"!=typeof s&&(s=n instanceof r),this.objectMode=!!t.objectMode,s&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",s),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function S(t){if(r=r||e("./_stream_duplex"),!(this instanceof S))return new S(t);var n=this instanceof r;this._readableState=new E(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),i.call(this)}function x(e,t,n,r,s){c("readableAddChunk",t);var i,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(c("onEofChunk"),t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?P(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,M(e)))}(e,u);else if(s||(i=function(e,t){var n;r=t,o.isBuffer(r)||r instanceof a||"string"==typeof t||t===undefined||e.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],t));var r;return n}(u,t)),i)w(e,i);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),r)u.endEmitted?w(e,new v):C(e,u,t,!0);else if(u.ended)w(e,new _);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!n?(t=u.decoder.write(t),u.objectMode||0!==t.length?C(e,u,t,!1):T(e,u)):C(e,u,t,!1)}else r||(u.reading=!1,T(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function C(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&P(e)),T(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=p.destroy,S.prototype._undestroy=p.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=o.from(e,t),t=""),n=!0),x(this,e,t,!1,n)},S.prototype.unshift=function(e){return x(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var n=new l(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,s="";null!==r;)s+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==s&&this._readableState.buffer.push(s),this._readableState.length=s.length,this};var A=1073741824;function R(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function P(e){var t=e._readableState;c("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(c("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(M,e))}function M(e){var t=e._readableState;c("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,N(e)}function T(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(I,e,t))}function I(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(c("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function D(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function O(e){c("readable nexttick read 0"),e.read(0)}function j(e,t){c("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(c("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function L(e){var t=e._readableState;c("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(U,t,e))}function U(e,t){if(c("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function F(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}S.prototype.read=function(e){c("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return c("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L(this):P(this),null;if(0===(e=R(e,t))&&t.ended)return 0===t.length&&L(this),null;var r,s=t.needReadable;return c("need readable",s),(0===t.length||t.length-e<t.highWaterMark)&&c("length less than watermark",s=!0),t.ended||t.reading?c("reading or ended",s=!1):s&&(c("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=R(n,t))),null===(r=e>0?B(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&L(this)),null!==r&&this.emit("data",r),r},S.prototype._read=function(e){w(this,new b("_read()"))},S.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,c("pipe count=%d opts=%j",i.pipesCount,t);var o=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?u:g;function a(t,n){c("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,c("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",f),e.removeListener("unpipe",a),r.removeListener("end",u),r.removeListener("end",g),r.removeListener("data",h),d=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function u(){c("onend"),e.end()}i.endEmitted?n.nextTick(o):r.once("end",o),e.on("unpipe",a);var l=function(e){return function(){var t=e._readableState;c("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,N(e))}}(r);e.on("drain",l);var d=!1;function h(t){c("ondata");var n=e.write(t);c("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==F(i.pipes,e))&&!d&&(c("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function f(t){c("onerror",t),g(),e.removeListener("error",f),0===s(e,"error")&&w(e,t)}function p(){e.removeListener("finish",m),g()}function m(){c("onfinish"),e.removeListener("close",p),g()}function g(){c("unpipe"),r.unpipe(e)}return r.on("data",h),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",f),e.once("close",p),e.once("finish",m),e.emit("pipe",r),i.flowing||(c("pipe resume"),r.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<s;i++)r[i].emit("unpipe",this,{hasUnpiped:!1});return this}var o=F(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},S.prototype.on=function(e,t){var r=i.prototype.on.call(this,e,t),s=this._readableState;return"data"===e?(s.readableListening=this.listenerCount("readable")>0,!1!==s.flowing&&this.resume()):"readable"===e&&(s.endEmitted||s.readableListening||(s.readableListening=s.needReadable=!0,s.flowing=!1,s.emittedReadable=!1,c("on readable",s.length,s.reading),s.length?P(this):s.reading||n.nextTick(O,this))),r},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var r=i.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(D,this),r},S.prototype.removeAllListeners=function(e){var t=i.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||n.nextTick(D,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(j,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var s in e.on("end",(function(){if(c("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(s){(c("wrapped data"),n.decoder&&(s=n.decoder.write(s)),!n.objectMode||null!==s&&s!==undefined)&&((n.objectMode||s&&s.length)&&(t.push(s)||(r=!0,e.pause())))})),e)this[s]===undefined&&"function"==typeof e[s]&&(this[s]=function(t){return function(){return e[t].apply(e,arguments)}}(s));for(var i=0;i<k.length;i++)e.on(k[i],this.emit.bind(this,k[i]));return this._read=function(t){c("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return d===undefined&&(d=e("./internal/streams/async_iterator")),d(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=B,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(t,n){return h===undefined&&(h=e("./internal/streams/from")),h(S,t,n)})}).call(this)}).call(this,e("_process"))}}},{package:"readable-stream",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/async-iterator-to-stream/node_modules/readable-stream/lib/_stream_readable.js"}],[4463,{"./stat":4470,"./utils/apply-default-options":4472,"./utils/constants":4473},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("./utils/apply-default-options"),s=e("./stat"),{FILE_SEPARATOR:i}=e("./utils/constants"),o={};t.exports=e=>async function(t=i,n=o){n=r(n,o),await s(e)(t,n)}}}},{package:"ipfs-mfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-mfs/src/core/flush.js"}],[4467,{"./cp":4462,"./rm":4469,"./utils/apply-default-options":4472,"./utils/to-sources":4482},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("./utils/apply-default-options"),s=e("./utils/to-sources"),i=e("./cp"),o=e("./rm"),a={parents:!1,recursive:!1,flush:!0,format:"dag-pb",hashAlg:"sha2-256",shardSplitThreshold:1e3};t.exports=e=>async function(...t){Array.isArray(t[0])&&(t=t[0].concat(t.slice(1)));const{sources:n}=await s(e,t),c=r(t,a),u=n.map((e=>e.path)).concat(c),l=n.slice(0,-1).map((e=>e.path)).concat(Object.assign(c,{recursive:!0}));await i(e).apply(null,u),await o(e).apply(null,l)}}}},{package:"ipfs-mfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-mfs/src/core/mv.js"}],[4468,{"./utils/apply-default-options":4472,"./utils/to-mfs-path":4479,"err-code":2358,"ipfs-unixfs-exporter":4511},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("ipfs-unixfs-exporter"),s=e("./utils/apply-default-options"),i=e("./utils/to-mfs-path"),o=e("err-code"),a={offset:0,length:Infinity};t.exports=e=>function(t,n={}){return n=s(n,a),{[Symbol.asyncIterator]:async function*(){const s=await i(e,t),a=await r(s.mfsPath,e.ipld);if("file"!==a.unixfs.type)throw o(new Error(`${t} was not a file`),"ERR_NOT_FILE");if(!a.content)throw o(new Error(`Could not load content stream from ${t}`),"ERR_NO_CONTENT");for await(const e of a.content({offset:n.offset,length:n.length}))yield e}}}}}},{package:"ipfs-mfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-mfs/src/core/read.js"}],[4465,{"./utils/apply-default-options":4472,"./utils/constants":4473,"./utils/to-mfs-path":4479,"ipfs-unixfs-exporter":4511},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("ipfs-unixfs-exporter"),s=e("./utils/apply-default-options"),i=e("./utils/to-mfs-path"),{FILE_SEPARATOR:o,FILE_TYPES:a}=e("./utils/constants"),c={},u=e=>{let t=0,n=e.node.size||e.node.length;return e.unixfs&&(n=e.unixfs.fileSize(),t=a[e.unixfs.type]),{cid:e.cid,name:e.name,type:t,size:n}};t.exports=e=>async function*(t=o,n={}){"object"!=typeof t||t instanceof String||(n=t,t=o),n=s(n,c);const a=await i(e,t),l=await r(a.mfsPath,e.ipld);if(l.unixfs&&l.unixfs.type.includes("directory"))for await(const e of l.content(n))yield u(e);else yield u(l)}}}},{package:"ipfs-mfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-mfs/src/core/ls.js"}],[4470,{"./utils/apply-default-options":4472,"./utils/to-mfs-path":4479,debug:2256,"err-code":2358,"ipfs-unixfs-exporter":4511},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("./utils/apply-default-options"),s=e("./utils/to-mfs-path"),i=e("ipfs-unixfs-exporter"),o=e("debug")("ipfs:mfs:stat"),a=e("err-code"),c={withLocal:!1};t.exports=e=>async function(t,n){n=r(n,c),o(`Fetching stats for ${t}`);const{type:l,cid:d,mfsPath:h}=await s(e,t);let f,p="ipfs"===l&&d?d:h;try{f=await i(p,e.ipld)}catch(e){if("ERR_NOT_FOUND"===e.code)throw a(new Error(`${t} does not exist`),"ERR_NOT_FOUND");throw e}if(!u[f.cid.codec])throw new Error(`Cannot stat codec ${f.cid.codec}`);return u[f.cid.codec](f,n)};const u={raw:e=>({cid:e.cid,size:e.node.length,cumulativeSize:e.node.length,blocks:0,type:"file",local:undefined,sizeLocal:undefined,withLocality:!1}),"dag-pb":e=>{let t=e.node.Links.length,n=e.node.size,r=e.node.size,s=null;return e.unixfs&&(n=e.unixfs.fileSize(),s=e.unixfs.type,s.includes("directory")&&(n=0,r=e.node.size),"file"===s&&(t=e.unixfs.blockSizes.length)),{cid:e.cid,size:n,cumulativeSize:r,blocks:t,type:s,local:undefined,sizeLocal:undefined,withLocality:!1}},"dag-cbor":e=>({cid:e.cid,local:undefined,sizeLocal:undefined,withLocality:!1})}}}},{package:"ipfs-mfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-mfs/src/core/stat.js"}],[4469,{"./utils/apply-default-options":4472,"./utils/constants":4473,"./utils/remove-link":4477,"./utils/to-mfs-path":4479,"./utils/to-sources":4482,"./utils/to-trail":4483,"./utils/update-mfs-root":4484,"./utils/update-tree":4485,"err-code":2358},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("err-code"),s=e("./utils/update-tree"),i=e("./utils/update-mfs-root"),o=e("./utils/to-sources"),a=e("./utils/remove-link"),c=e("./utils/to-mfs-path"),u=e("./utils/to-trail"),l=e("./utils/apply-default-options"),{FILE_SEPARATOR:d}=e("./utils/constants"),h={recursive:!1,cidVersion:0,hashAlg:"sha2-256",format:"dag-pb",flush:!0};t.exports=e=>async function(){const t=Array.from(arguments),{sources:n}=await o(e,t,h),s=l(t,h);if(!n.length)throw r(new Error("Please supply at least one path to remove"),"ERR_INVALID_PARAMS");n.forEach((e=>{if(e.path===d)throw r(new Error("Cannot delete root"),"ERR_INVALID_PARAMS")}));for(const t of n)await f(e,t.path,s)};const f=async(e,t,n)=>{const o=await c(e,t),l=await u(e,o.mfsPath,n),d=l.pop(),h=l[l.length-1];if(!h)throw r(new Error(`${t} does not exist`),"ERR_NOT_FOUND");if("directory"===d.type&&!n.recursive)throw r(new Error(`${t} is a directory, use -r to remove directories`),"ERR_WAS_DIR");const{cid:f}=await a(e,{parentCid:h.cid,name:d.name,format:n.format,hashAlg:n.hashAlg,cidVersion:n.cidVersion,flush:n.flush});h.cid=f;const p=await s(e,l,n);await i(e,p)}}}},{package:"ipfs-mfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-mfs/src/core/rm.js"}],[4466,{"./utils/add-link":4471,"./utils/apply-default-options":4472,"./utils/constants":4473,"./utils/create-node":4475,"./utils/to-path-components":4480,"./utils/update-mfs-root":4484,"./utils/update-tree":4485,"./utils/with-mfs-root":4486,debug:2256,"err-code":2358,"ipfs-unixfs-exporter":4511},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("err-code"),s=e("debug")("ipfs:mfs:mkdir"),i=e("ipfs-unixfs-exporter"),o=e("./utils/create-node"),a=e("./utils/to-path-components"),c=e("./utils/update-mfs-root"),u=e("./utils/update-tree"),l=e("./utils/add-link"),d=e("./utils/with-mfs-root"),h=e("./utils/apply-default-options"),{FILE_SEPARATOR:f}=e("./utils/constants"),p={parents:!1,hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3,format:"dag-pb",flush:!0};t.exports=e=>async function(t,n){if(n=h(n,p),!t)throw new Error("no path given to Mkdir");if((t=t.trim())===f){if(n.parents)return;throw r(new Error(`cannot create directory '${f}': Already exists`),"ERR_INVALID_PATH")}if(t.substring(0,1)!==f)throw r(new Error("paths must start with a leading /"),"ERR_INVALID_PATH");s(`Creating ${t}`);const l=a(t);if("ipfs"===l[0])throw r(new Error("path cannot have the prefix 'ipfs'"),"ERR_INVALID_PATH");let g,y=await d(e),_=[];const b=await o(e,"directory",n);for(let t=0;t<=l.length;t++){const o=l.slice(0,t),a=`/ipfs/${y}/${o.join("/")}`;try{if(g=await i(a,e.ipld),s(`${a} existed`),s(`${a} had children ${g.node.Links.map((e=>e.Name))}`),t===l.length){if(n.parents)return;throw r(new Error("file already exists"),"ERR_ALREADY_EXISTS")}_.push({name:g.name,cid:g.cid})}catch(s){if("ERR_NOT_FOUND"!==s.code)throw s;if(t<l.length&&!n.parents)throw r(new Error(`Intermediate directory path ${a} does not exist, use the -p flag to create it`),"ERR_NOT_FOUND");await m(e,o[o.length-1],b,_[_.length-1],_,n)}}const v=await u(e,_,n);await c(e,v)};const m=async(e,t,n,r,i,o)=>{s(`Adding empty dir called ${t} to ${r.cid}`);const a=await l(e,{parent:r.node,parentCid:r.cid,size:n.node.size,cid:n.cid,name:t,format:o.format,hashAlg:o.hashAlg,cidVersion:o.cidVersion});i[i.length-1].cid=a.cid,i.push({name:t,cid:n.cid})}}}},{package:"ipfs-mfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-mfs/src/core/mkdir.js"}],[4487,{"./mkdir":4466,"./stat":4470,"./utils/add-link":4471,"./utils/apply-default-options":4472,"./utils/constants":4473,"./utils/create-lock":4474,"./utils/to-async-iterator":4478,"./utils/to-mfs-path":4479,"./utils/to-path-components":4480,"./utils/to-trail":4483,"./utils/update-mfs-root":4484,"./utils/update-tree":4485,"async-iterator-last":1710,buffer:2084,debug:2256,"err-code":2358,"ipfs-unixfs-importer":4536},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){const r=e("debug")("ipfs:mfs:write"),s=e("ipfs-unixfs-importer"),i=e("./stat"),o=e("./mkdir"),a=e("./utils/add-link"),c=e("./utils/apply-default-options"),u=e("./utils/create-lock"),l=e("./utils/to-async-iterator"),d=e("./utils/to-mfs-path"),h=e("./utils/to-path-components"),f=e("./utils/to-trail"),p=e("./utils/update-tree"),m=e("./utils/update-mfs-root"),g=e("err-code"),{MAX_CHUNK_SIZE:y}=e("./utils/constants"),_=e("async-iterator-last"),b={offset:0,length:undefined,create:!1,truncate:!1,rawLeaves:!1,reduceSingleLeafToSelf:!1,cidVersion:0,hashAlg:"sha2-256",format:"dag-pb",parents:!1,progress:()=>{},strategy:"trickle",flush:!0,leafType:"raw",shardSplitThreshold:1e3};t.exports=e=>async function(t,n,s){let i,o,a;if(r("Hello world, writing",t,n,s),s=c(s,b),r("Reading source, destination and parent"),await u().readLock((async()=>{i=await l(n,s),o=await d(e,t),a=await d(e,o.mfsDirectory)}))(),r("Read source, destination and parent"),!s.parents&&!a.exists)throw g(new Error("directory does not exist"),"ERR_NO_EXIST");if(!s.create&&!o.exists)throw g(new Error("file does not exist"),"ERR_NO_EXIST");return v(e,t,i,o,s)};const v=async(e,t,n,r,s)=>{const c=await w(e,n,r,s);await u().writeLock((async()=>{const n=h(t),r=n.pop();let u=!1;try{await i(e)(`/${n.join("/")}`,s),u=!0}catch(e){if("ERR_NOT_FOUND"!==e.code)throw e}u||await o(e)(`/${n.join("/")}`,s);const l=await d(e,t),y=await f(e,l.mfsDirectory,s),_=y[y.length-1];if(!_.type.includes("directory"))throw g(new Error(`cannot write to ${_.name}: Not a directory`),"ERR_NOT_A_DIRECTORY");const b=await e.ipld.get(_.cid),v=await a(e,{parent:b,name:r,cid:c.cid,size:c.size,flush:s.flush,shardSplitThreshold:s.shardSplitThreshold,format:s.format,hashAlg:s.hashAlg,cidVersion:s.cidVersion});_.cid=v.cid;const w=await p(e,y,s);await m(e,w)}))()},w=async(e,t,n,i)=>{n.exists?r(`Overwriting file ${n.cid} offset ${i.offset} length ${i.length}`):r(`Writing file offset ${i.offset} length ${i.length}`);const o=[];i.offset>0&&(n.unixfs&&n.unixfs.fileSize()>i.offset?(r(`Writing first ${i.offset} bytes of original file`),o.push((()=>n.content({offset:0,length:i.offset})))):(r(`Writing zeros for first ${i.offset} bytes`),o.push(E(i.offset)))),o.push(k(t,i.length));const a=x(S(o),(e=>{if(n.unixfs&&!i.truncate){const t=n.unixfs.fileSize();if(t>e)return r(`Writing last ${t-e} of ${t} bytes from original file starting at offset ${e}`),n.content({offset:e});r("Not writing last bytes from original file")}return{[Symbol.asyncIterator]:async function*(){}}}));let c=await _(s([{content:a}],e.ipld,{progress:i.progress,hashAlg:i.hashAlg,cidVersion:i.cidVersion,strategy:i.strategy,rawLeaves:i.rawLeaves,reduceSingleLeafToSelf:i.reduceSingleLeafToSelf,leafType:i.leafType}));return r(`Wrote ${c.cid}`),{cid:c.cid,size:c.size}},k=(e,t)=>async function*(){let n=0;for await(const r of e){if(n+=r.length,n>t)return void(yield r.slice(0,t-n));yield r}},E=(e,t=y)=>{const r=n.alloc(t,0),s={[Symbol.asyncIterator]:async function*(){for(;;)yield r.slice()}};return k(s,e)},S=async function*(e){for(let t=0;t<e.length;t++)for await(const n of e[t]())yield n},x=async function*(e,t){let n=0;for await(const t of e)n+=t.length,yield t;for await(const e of t(n))n+=e.length,yield e}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ipfs-mfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-mfs/src/core/write.js"}],[4462,{"./mkdir":4466,"./utils/add-link":4471,"./utils/apply-default-options":4472,"./utils/to-mfs-path":4479,"./utils/to-sources-and-destination":4481,"./utils/to-trail":4483,"./utils/update-mfs-root":4484,"./utils/update-tree":4485,debug:2256,"err-code":2358},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("./mkdir"),s=e("debug")("ipfs:mfs:cp"),i=e("err-code"),o=e("./utils/update-tree"),a=e("./utils/update-mfs-root"),c=e("./utils/add-link"),u=e("./utils/apply-default-options"),l=e("./utils/to-mfs-path"),d=e("./utils/to-sources-and-destination"),h=e("./utils/to-trail"),f={parents:!1,flush:!0,format:"dag-pb",hashAlg:"sha2-256",cidVersion:0,shardSplitThreshold:1e3};t.exports=e=>async function(...t){const n=u(t,f);let{sources:o,destination:a}=await d(e,t);if(!o.length)throw i(new Error("Please supply at least one source"),"ERR_INVALID_PARAMS");if(!a)throw i(new Error("Please supply a destination"),"ERR_INVALID_PARAMS");n.parents=n.p||n.parents;const c=o.find((e=>!e.exists));if(c)throw i(new Error(`${c.path} does not exist`),"ERR_INVALID_PARAMS");const y=p(a);if(a.exists){if(s("Destination exists"),1===o.length&&!y)throw i(new Error("directory already has entry by that name"),"ERR_ALREADY_EXISTS")}else if(s("Destination does not exist"),o.length>1){if(!n.parents)throw i(new Error("destination did not exist, pass -p to create intermediate directories"),"ERR_INVALID_PARAMS");await r(e)(a.path,n),a=await l(e,a.path)}const _=p(a)?a.mfsPath:a.mfsDirectory,b=await h(e,_,n);if(1===o.length){const t=o.pop(),r=y?t.name:a.name;return s(`Only one source, copying to destination ${y?"directory":"file"} ${r}`),m(e,t,r,b,n)}return s("Multiple sources, wrapping in a directory"),g(e,o,a,b,n)};const p=e=>e.unixfs&&e.unixfs.type&&e.unixfs.type.includes("directory"),m=async(e,t,n,r,s)=>{let i=r.pop();i=await y(e,t,n,i,s),r.push(i);const c=await o(e,r,s);await a(e,c)},g=async(e,t,n,r,s)=>{for(let r=0;r<t.length;r++){const i=t[r];n=await y(e,i,i.name,n,s)}r[r.length-1]=n;const i=await o(e,r,s);await a(e,i)},y=async(e,t,n,r,s)=>{const i=await e.repo.blocks.get(t.cid),{node:o,cid:a}=await c(e,{parentCid:r.cid,size:i.data.length,cid:t.cid,name:n,format:s.format,hashAlg:s.hashAlg,cidVersion:s.cidVersion});return r.node=o,r.cid=a,r.size=o.size,r}}}},{package:"ipfs-mfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-mfs/src/core/cp.js"}],[4474,{mortice:5204},function(){with(this)return function(){"use strict";return function(e,t,n){const r=e("mortice");let s;t.exports=e=>{if(s)return s;const t=r({singleProcess:e});return s={readLock:e=>(...n)=>t.readLock((()=>e.apply(null,n))),writeLock:e=>(...n)=>t.writeLock((()=>e.apply(null,n)))},s}}}},{package:"ipfs-mfs",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/ipfs-mfs/src/core/utils/create-lock.js"}],[1250,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.GWEI=n.ERC1155_TOKEN_RECEIVER_INTERFACE_ID=n.ERC1155_METADATA_URI_INTERFACE_ID=n.ERC1155_INTERFACE_ID=n.ERC721_ENUMERABLE_INTERFACE_ID=n.ERC721_METADATA_INTERFACE_ID=n.ERC721_INTERFACE_ID=n.ERC20=n.ERC1155=n.ERC721=n.RINKEBY_CHAIN_ID=n.IPFS_DEFAULT_GATEWAY_URL=n.FALL_BACK_VS_CURRENCY=n.RPC=n.MAINNET=void 0,n.MAINNET="mainnet",n.RPC="rpc",n.FALL_BACK_VS_CURRENCY="ETH",n.IPFS_DEFAULT_GATEWAY_URL="https://cloudflare-ipfs.com/ipfs/",n.RINKEBY_CHAIN_ID="4",n.ERC721="ERC721",n.ERC1155="ERC1155",n.ERC20="ERC20",n.ERC721_INTERFACE_ID="0x80ac58cd",n.ERC721_METADATA_INTERFACE_ID="0x5b5e139f",n.ERC721_ENUMERABLE_INTERFACE_ID="0x780e9d63",n.ERC1155_INTERFACE_ID="0xd9b67a26",n.ERC1155_METADATA_URI_INTERFACE_ID="0x0e89341c",n.ERC1155_TOKEN_RECEIVER_INTERFACE_ID="0x4e2312e0",n.GWEI="gwei"}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/constants.js"}],[1233,{"../util":1292},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.fetchExchangeRate=void 0;const s=e("../util");n.fetchExchangeRate=function(e,t,n){return r(this,void 0,void 0,(function*(){const r=yield s.handleFetch(function(e,t,n){return`https://min-api.cryptocompare.com/data/price?fsym=${t.toUpperCase()}&tsyms=${e.toUpperCase()}`+(n&&"USD"!==e.toUpperCase()?",USD":"")}(e,t,n));if("Error"===r.Response)throw new Error(r.Message);const i=Number(r[e.toUpperCase()]),o=Number(r.USD);if(!Number.isFinite(i))throw new Error(`Invalid response for ${e.toUpperCase()}: ${r[e.toUpperCase()]}`);if(n&&!Number.isFinite(o))throw new Error(`Invalid response for usdConversionRate: ${r.USD}`);return{conversionRate:i,usdConversionRate:o}}))}}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/apis/crypto-compare.js"}],[1286,{"../BaseControllerV2":1230},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SubjectMetadataController=void 0;const r=e("../BaseControllerV2"),s={subjectMetadata:{persist:!0,anonymous:!1}},i={subjectMetadata:{}};class o extends r.BaseController{constructor({messenger:e,subjectCacheLimit:t,state:n={}}){if(!Number.isInteger(t)||t<1)throw new Error(`subjectCacheLimit must be a positive integer. Received: "${t}"`);const r=t=>e.call("PermissionController:hasPermissions",t);super({name:"SubjectMetadataController",metadata:s,messenger:e,state:Object.assign({},o.getTrimmedState(n,r))}),this.subjectHasPermissions=r,this.subjectCacheLimit=t,this.subjectsWithoutPermissionsEcounteredSinceStartup=new Set}clearState(){this.subjectsWithoutPermissionsEcounteredSinceStartup.clear(),this.update((e=>Object.assign({},i)))}addSubjectMetadata(e){const{origin:t}=e,n=Object.assign(Object.assign({},e),{extensionId:e.extensionId||null,iconUrl:e.iconUrl||null,name:e.name||null});let r=null;if(this.subjectsWithoutPermissionsEcounteredSinceStartup.size>=this.subjectCacheLimit){const e=this.subjectsWithoutPermissionsEcounteredSinceStartup.values().next().value;this.subjectsWithoutPermissionsEcounteredSinceStartup.delete(e),this.subjectHasPermissions(e)||(r=e)}this.subjectsWithoutPermissionsEcounteredSinceStartup.add(t),this.update((e=>{e.subjectMetadata[t]=n,"string"==typeof r&&delete e.subjectMetadata[r]}))}trimMetadataState(){this.update((e=>o.getTrimmedState(e,this.subjectHasPermissions)))}static getTrimmedState(e,t){const{subjectMetadata:n={}}=e;return{subjectMetadata:Object.keys(n).reduce(((e,r)=>(t(r)&&(e[r]=n[r]),e)),{})}}}n.SubjectMetadataController=o}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/subject-metadata/SubjectMetadataController.js"}],[1314,{"./url-alphabet/index.cjs":1315},function(){with(this)return function(){"use strict";return function(e,t,n){let{urlAlphabet:r}=e("./url-alphabet/index.cjs");let s=e=>crypto.getRandomValues(new Uint8Array(e)),i=(e,t,n)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,s=-~(1.6*r*t/e.length);return()=>{let i="";for(;;){let o=n(s),a=s;for(;a--;)if(i+=e[o[a]&r]||"",i.length===t)return i}}};t.exports={nanoid:(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let r=63&n[e];t+=r<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r<63?"_":"-"}return t},customAlphabet:(e,t)=>i(e,t,s),customRandom:i,urlAlphabet:r,random:s}}}},{package:"nanoid",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/nanoid/index.browser.cjs"}],[1267,{"../BaseController":1229,events:2085},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.AbstractMessageManager=void 0;const r=e("events"),s=e("../BaseController");class i extends s.BaseController{constructor(e,t){super(e,t),this.hub=new r.EventEmitter,this.name="AbstractMessageManager",this.defaultState={unapprovedMessages:{},unapprovedMessagesCount:0},this.messages=[],this.initialize()}saveMessageList(){const e=this.getUnapprovedMessages(),t=this.getUnapprovedMessagesCount();this.update({unapprovedMessages:e,unapprovedMessagesCount:t}),this.hub.emit("updateBadge")}setMessageStatus(e,t){const n=this.getMessage(e);if(!n)throw new Error(`${this.name}: Message not found for id: ${e}.`);n.status=t,this.updateMessage(n),this.hub.emit(`${e}:${t}`,n),"rejected"!==t&&"signed"!==t&&"errored"!==t||this.hub.emit(`${e}:finished`,n)}updateMessage(e){const t=this.messages.findIndex((t=>e.id===t.id));-1!==t&&(this.messages[t]=e),this.saveMessageList()}getUnapprovedMessagesCount(){return Object.keys(this.getUnapprovedMessages()).length}getUnapprovedMessages(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}addMessage(e){this.messages.push(e),this.saveMessageList()}getMessage(e){return this.messages.find((t=>t.id===e))}approveMessage(e){return this.setMessageStatusApproved(e.metamaskId),this.prepMessageForSigning(e)}setMessageStatusApproved(e){this.setMessageStatus(e,"approved")}setMessageStatusSigned(e,t){const n=this.getMessage(e);n&&(n.rawSig=t,this.updateMessage(n),this.setMessageStatus(e,"signed"))}rejectMessage(e){this.setMessageStatus(e,"rejected")}}n.AbstractMessageManager=i,n.default=i}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/message-manager/AbstractMessageManager.js"}],[1249,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.compareCollectiblesMetadata=void 0,n.compareCollectiblesMetadata=function(e,t){return["image","backgroundColor","imagePreview","imageThumbnail","imageOriginal","animation","animationOriginal","externalLink"].reduce(((n,r)=>e[r]&&e[r]!==t[r]?n+1:n),0)>0}}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/assets/assetsUtil.js"}],[1234,{"../util":1292},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.fetchTokenMetadata=n.fetchTokenList=void 0;const s=e("../util"),i="https://token-api.metaswap.codefi.network";function o(e,t){return r(this,void 0,void 0,(function*(){const n={referrer:e,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors",signal:t,cache:"default"};n.headers=new window.Headers,n.headers.set("Content-Type","application/json");try{return yield s.timeoutFetch(e,n,1e4)}catch(e){"AbortError"===e.name&&console.log("Request is aborted")}return undefined}))}function a(e){return r(this,void 0,void 0,(function*(){const t=yield e.json();if(null==t?void 0:t.error)throw new Error(`TokenService Error: ${t.error}`);return t}))}n.fetchTokenList=function(e,t){return r(this,void 0,void 0,(function*(){const n=function(e){return`${i}/tokens/${e}`}(e),r=yield o(n,t);return r?a(r):undefined}))},n.fetchTokenMetadata=function(e,t,n){return r(this,void 0,void 0,(function*(){const r=function(e,t){return`${i}/token/${e}?address=${t}`}(e,t),s=yield o(r,n);return s?a(s):undefined}))}}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/apis/token-service.js"}],[1252,{"./GasFeeController":1251},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0});const s=e("./GasFeeController");n.default=function({isEIP1559Compatible:e,isLegacyGasAPICompatible:t,fetchGasEstimates:n,fetchGasEstimatesUrl:i,fetchGasEstimatesViaEthFeeHistory:o,fetchLegacyGasPriceEstimates:a,fetchLegacyGasPriceEstimatesUrl:c,fetchEthGasPriceEstimate:u,calculateTimeEstimate:l,clientId:d,ethQuery:h}){return r(this,void 0,void 0,(function*(){try{if(e){let e;try{e=yield n(i,d)}catch(t){e=yield o(h)}const{suggestedMaxPriorityFeePerGas:t,suggestedMaxFeePerGas:r}=e.medium;return{gasFeeEstimates:e,estimatedGasFeeTimeBounds:l(t,r,e),gasEstimateType:s.GAS_ESTIMATE_TYPES.FEE_MARKET}}if(t){return{gasFeeEstimates:yield a(c,d),estimatedGasFeeTimeBounds:{},gasEstimateType:s.GAS_ESTIMATE_TYPES.LEGACY}}throw new Error("Main gas fee/price estimation failed. Use fallback")}catch(e){try{return{gasFeeEstimates:yield u(h),estimatedGasFeeTimeBounds:{},gasEstimateType:s.GAS_ESTIMATE_TYPES.ETH_GASPRICE}}catch(e){throw new Error(`Gas fee/price estimation failed. Message: ${e.message}`)}}}))}}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/gas/determineGasFeeCalculations.js"}],[1264,{"../util":1292,"ethereumjs-util":2524},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.calculateTimeEstimate=n.fetchEthGasPriceEstimate=n.fetchLegacyGasPriceEstimates=n.fetchGasEstimates=n.normalizeGWEIDecimalNumbers=void 0;const s=e("ethereumjs-util"),i=e("../util"),o=e=>({"X-Client-Id":e});function a(e){const t=i.gweiDecToWEIBN(e).toString(16);return i.weiHexToGweiDec(t).toString(10)}n.normalizeGWEIDecimalNumbers=a,n.fetchGasEstimates=function(e,t){return r(this,void 0,void 0,(function*(){const n=yield i.handleFetch(e,t?{headers:o(t)}:undefined);return{low:Object.assign(Object.assign({},n.low),{suggestedMaxPriorityFeePerGas:a(n.low.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:a(n.low.suggestedMaxFeePerGas)}),medium:Object.assign(Object.assign({},n.medium),{suggestedMaxPriorityFeePerGas:a(n.medium.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:a(n.medium.suggestedMaxFeePerGas)}),high:Object.assign(Object.assign({},n.high),{suggestedMaxPriorityFeePerGas:a(n.high.suggestedMaxPriorityFeePerGas),suggestedMaxFeePerGas:a(n.high.suggestedMaxFeePerGas)}),estimatedBaseFee:a(n.estimatedBaseFee),historicalBaseFeeRange:n.historicalBaseFeeRange,baseFeeTrend:n.baseFeeTrend,latestPriorityFeeRange:n.latestPriorityFeeRange,historicalPriorityFeeRange:n.historicalPriorityFeeRange,priorityFeeTrend:n.priorityFeeTrend,networkCongestion:n.networkCongestion}}))},n.fetchLegacyGasPriceEstimates=function(e,t){return r(this,void 0,void 0,(function*(){const n=yield i.handleFetch(e,{referrer:e,referrerPolicy:"no-referrer-when-downgrade",method:"GET",mode:"cors",headers:Object.assign({"Content-Type":"application/json"},t&&o(t))});return{low:n.SafeGasPrice,medium:n.ProposeGasPrice,high:n.FastGasPrice}}))},n.fetchEthGasPriceEstimate=function(e){return r(this,void 0,void 0,(function*(){const t=yield i.query(e,"gasPrice");return{gasPrice:i.weiHexToGweiDec(t).toString()}}))},n.calculateTimeEstimate=function(e,t,n){const{low:r,medium:o,high:a,estimatedBaseFee:c}=n,u=i.gweiDecToWEIBN(e),l=i.gweiDecToWEIBN(t),d=i.gweiDecToWEIBN(c),h=s.BN.min(u,l.sub(d)),f=i.gweiDecToWEIBN(r.suggestedMaxPriorityFeePerGas),p=i.gweiDecToWEIBN(o.suggestedMaxPriorityFeePerGas),m=i.gweiDecToWEIBN(a.suggestedMaxPriorityFeePerGas);let g,y;return h.lt(f)?(g=null,y="unknown"):h.gte(f)&&h.lt(p)?(g=r.minWaitTimeEstimate,y=r.maxWaitTimeEstimate):h.gte(p)&&h.lt(m)?(g=o.minWaitTimeEstimate,y=o.maxWaitTimeEstimate):h.eq(m)?(g=a.minWaitTimeEstimate,y=a.maxWaitTimeEstimate):(g=0,y=a.maxWaitTimeEstimate),{lowerTimeBound:g,upperTimeBound:y}}}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/gas/gas-util.js"}],[1254,{"../constants":1250,"./fetchGasEstimatesViaEthFeeHistory/BlockFeeHistoryDatasetFetcher":1255,"./fetchGasEstimatesViaEthFeeHistory/calculateBaseFeeRange":1256,"./fetchGasEstimatesViaEthFeeHistory/calculateBaseFeeTrend":1257,"./fetchGasEstimatesViaEthFeeHistory/calculateGasFeeEstimatesForPriorityLevels":1258,"./fetchGasEstimatesViaEthFeeHistory/calculateNetworkCongestion":1259,"./fetchGasEstimatesViaEthFeeHistory/calculatePriorityFeeRange":1260,"./fetchGasEstimatesViaEthFeeHistory/calculatePriorityFeeTrend":1261,"./fetchGasEstimatesViaEthFeeHistory/fetchLatestBlock":1262,"ethjs-unit":2576},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const i=e("ethjs-unit"),o=e("../constants"),a=s(e("./fetchGasEstimatesViaEthFeeHistory/BlockFeeHistoryDatasetFetcher")),c=s(e("./fetchGasEstimatesViaEthFeeHistory/calculateGasFeeEstimatesForPriorityLevels")),u=s(e("./fetchGasEstimatesViaEthFeeHistory/calculateBaseFeeRange")),l=s(e("./fetchGasEstimatesViaEthFeeHistory/calculateBaseFeeTrend")),d=s(e("./fetchGasEstimatesViaEthFeeHistory/calculatePriorityFeeRange")),h=s(e("./fetchGasEstimatesViaEthFeeHistory/calculatePriorityFeeTrend")),f=s(e("./fetchGasEstimatesViaEthFeeHistory/calculateNetworkCongestion")),p=s(e("./fetchGasEstimatesViaEthFeeHistory/fetchLatestBlock"));n.default=function(e){return r(this,void 0,void 0,(function*(){const t=yield p.default(e),n=new a.default({ethQuery:e,endBlockNumber:t.number}),r=yield n.forAll(),s=c.default(r.smallRange),m=i.fromWei(t.baseFeePerGas,o.GWEI),g=u.default(r.mediumRange),y=l.default(r.latestWithNextBlock),_=d.default(r.latest),b=d.default(r.mediumRange),v=h.default(r.tinyRange),w=f.default([]);return Object.assign(Object.assign({},s),{estimatedBaseFee:m,historicalBaseFeeRange:g,baseFeeTrend:y,latestPriorityFeeRange:_,historicalPriorityFeeRange:b,priorityFeeTrend:v,networkCongestion:w})}))}}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/gas/fetchGasEstimatesViaEthFeeHistory.js"}],[1284,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MethodNames=void 0,function(e){e.requestPermissions="wallet_requestPermissions",e.getPermissions="wallet_getPermissions"}(n.MethodNames||(n.MethodNames={}))}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/permissions/utils.js"}],[1276,{"./network-access":1277},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.endowmentPermissionBuilders=void 0;const r=e("./network-access");n.endowmentPermissionBuilders={[r.networkAccessEndowmentBuilder.targetKey]:r.networkAccessEndowmentBuilder}}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/permissions/endowments/index.js"}],[1274,{nanoid:1314},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hasSpecificationType=n.PermissionType=n.findCaveat=n.constructPermission=void 0;const r=e("nanoid");n.constructPermission=function(e){const{caveats:t=null,invoker:n,target:s}=e;return{id:r.nanoid(),parentCapability:s,invoker:n,caveats:t,date:(new Date).getTime()}},n.findCaveat=function(e,t){var n;return null===(n=e.caveats)||void 0===n?void 0:n.find((e=>e.type===t))},function(e){e.RestrictedMethod="RestrictedMethod",e.Endowment="Endowment"}(n.PermissionType||(n.PermissionType={})),n.hasSpecificationType=function(e,t){return e.permissionType===t}}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/permissions/Permission.js"}],[1273,{"./errors":1278},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.decorateWithCaveats=void 0;const s=e("./errors");n.decorateWithCaveats=function(e,t,n){const{caveats:i}=t;if(!i)return e;let o=t=>r(this,void 0,void 0,(function*(){return e(t)}));for(const e of i){const t=n[e.type];if(!t)throw new s.UnrecognizedCaveatTypeError(e.type);o=t.decorator(o,e)}return o}}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/permissions/Caveat.js"}],[1275,{"../BaseControllerV2":1230,"../util":1292,"./Caveat":1273,"./Permission":1274,"./errors":1278,"./permission-middleware":1280,"./utils":1284,"deep-freeze-strict":2260,immer:4405,nanoid:1314},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.PermissionController=n.CaveatMutatorOperation=void 0;const o=i(e("deep-freeze-strict")),a=e("immer"),c=e("nanoid"),u=e("../BaseControllerV2"),l=e("../util"),d=e("./Caveat"),h=e("./errors"),f=e("./Permission"),p=e("./permission-middleware"),m=e("./utils"),g="PermissionController";var y;!function(e){e[e.noop=0]="noop",e[e.updateValue=1]="updateValue",e[e.deleteCaveat=2]="deleteCaveat",e[e.revokePermission=3]="revokePermission"}(y=n.CaveatMutatorOperation||(n.CaveatMutatorOperation={}));class _ extends u.BaseController{constructor(e){const{caveatSpecifications:t,permissionSpecifications:n,unrestrictedMethods:r,messenger:s,state:i={}}=e;super({name:g,metadata:{subjects:{anonymous:!0,persist:!0}},messenger:s,state:Object.assign(Object.assign({},{subjects:{}}),i)}),this._unrestrictedMethods=new Set(r),this._caveatSpecifications=o.default(Object.assign({},t)),this.validatePermissionSpecifications(n,this._caveatSpecifications),this._permissionSpecifications=o.default(Object.assign({},n)),this.registerMessageHandlers(),this.createPermissionMiddleware=p.getPermissionMiddlewareFactory({executeRestrictedMethod:this._executeRestrictedMethod.bind(this),getRestrictedMethod:this.getRestrictedMethod.bind(this),isUnrestrictedMethod:this.unrestrictedMethods.has.bind(this.unrestrictedMethods)})}get unrestrictedMethods(){return this._unrestrictedMethods}getPermissionSpecification(e){return this._permissionSpecifications[e]}getCaveatSpecification(e){return this._caveatSpecifications[e]}validatePermissionSpecifications(e,t){Object.entries(e).forEach((([e,{permissionType:n,targetKey:r,allowedCaveats:s}])=>{if(!n||!l.hasProperty(f.PermissionType,n))throw new Error(`Invalid permission type: "${n}"`);if(!e||/_$/u.test(e)||/[^_]\*$/u.test(e))throw new Error(`Invalid permission target key: "${e}"`);if(e!==r)throw new Error(`Invalid permission specification: key "${e}" must match specification.target value "${r}".`);s&&s.forEach((e=>{if(!l.hasProperty(t,e))throw new h.UnrecognizedCaveatTypeError(e)}))}))}registerMessageHandlers(){this.messagingSystem.registerActionHandler(`${g}:clearPermissions`,(()=>this.clearState())),this.messagingSystem.registerActionHandler(`${g}:getEndowments`,((e,t,n)=>this.getEndowments(e,t,n))),this.messagingSystem.registerActionHandler(`${g}:getSubjectNames`,(()=>this.getSubjectNames())),this.messagingSystem.registerActionHandler(`${g}:getPermissions`,(e=>this.getPermissions(e))),this.messagingSystem.registerActionHandler(`${g}:hasPermission`,((e,t)=>this.hasPermission(e,t))),this.messagingSystem.registerActionHandler(`${g}:hasPermissions`,(e=>this.hasPermissions(e))),this.messagingSystem.registerActionHandler(`${g}:revokePermissions`,this.revokePermissions.bind(this)),this.messagingSystem.registerActionHandler(`${g}:revokeAllPermissions`,(e=>this.revokeAllPermissions(e))),this.messagingSystem.registerActionHandler(`${g}:requestPermissions`,((e,t)=>this.requestPermissions(e,t)))}clearState(){this.update((e=>Object.assign({},{subjects:{}})))}getTypedPermissionSpecification(e,t,n){const r=e===f.PermissionType.RestrictedMethod?h.methodNotFound(t,n?{origin:n}:undefined):new h.EndowmentPermissionDoesNotExistError(t,n),s=this.getTargetKey(t);if(!s)throw r;const i=this.getPermissionSpecification(s);if(!f.hasSpecificationType(i,e))throw r;return i}getRestrictedMethod(e,t){return this.getTypedPermissionSpecification(f.PermissionType.RestrictedMethod,e,t).methodImplementation}getSubjectNames(){return Object.keys(this.state.subjects)}getPermission(e,t){var n;return null===(n=this.state.subjects[e])||void 0===n?void 0:n.permissions[t]}getPermissions(e){var t;return null===(t=this.state.subjects[e])||void 0===t?void 0:t.permissions}hasPermission(e,t){return Boolean(this.getPermission(e,t))}hasPermissions(e){return Boolean(this.state.subjects[e])}revokeAllPermissions(e){this.update((t=>{if(!t.subjects[e])throw new h.UnrecognizedSubjectError(e);delete t.subjects[e]}))}revokePermission(e,t){this.revokePermissions({[e]:[t]})}revokePermissions(e){this.update((t=>{Object.keys(e).forEach((n=>{if(!l.hasProperty(t.subjects,n))throw new h.UnrecognizedSubjectError(n);e[n].forEach((e=>{const{permissions:r}=t.subjects[n];if(!l.hasProperty(r,e))throw new h.PermissionDoesNotExistError(n,e);this.deletePermission(t.subjects,n,e)}))}))}))}revokePermissionForAllSubjects(e){0!==this.getSubjectNames().length&&this.update((t=>{Object.entries(t.subjects).forEach((([n,r])=>{const{permissions:s}=r;l.hasProperty(s,e)&&this.deletePermission(t.subjects,n,e)}))}))}deletePermission(e,t,n){const{permissions:r}=e[t];Object.keys(r).length>1?delete r[n]:delete e[t]}hasCaveat(e,t,n){return Boolean(this.getCaveat(e,t,n))}getCaveat(e,t,n){const r=this.getPermission(e,t);if(!r)throw new h.PermissionDoesNotExistError(e,t);return f.findCaveat(r,n)}addCaveat(e,t,n,r){if(this.hasCaveat(e,t,n))throw new h.CaveatAlreadyExistsError(e,t,n);this.setCaveat(e,t,n,r)}updateCaveat(e,t,n,r){if(!this.hasCaveat(e,t,n))throw new h.CaveatDoesNotExistError(e,t,n);this.setCaveat(e,t,n,r)}setCaveat(e,t,n,r){this.update((s=>{const i=s.subjects[e];if(!i)throw new h.UnrecognizedSubjectError(e);const o=i.permissions[t];if(!o)throw new h.PermissionDoesNotExistError(e,t);const a={type:n,value:r};if(this.validateCaveat(a,e,t),o.caveats){const e=o.caveats.findIndex((e=>e.type===a.type));-1===e?o.caveats.push(a):o.caveats.splice(e,1,a)}else o.caveats=[a];this.validateModifiedPermission(o,e,t)}))}updatePermissionsByCaveat(e,t){0!==Object.keys(this.state.subjects).length&&this.update((n=>{Object.values(n.subjects).forEach((r=>{Object.values(r.permissions).forEach((s=>{const{caveats:i}=s,o=null==i?void 0:i.find((({type:t})=>t===e));if(!o)return;const a=t(o.value);switch(a.operation){case y.noop:break;case y.updateValue:o.value=a.value,this.validateCaveat(o,r.origin,s.parentCapability);break;case y.deleteCaveat:this.deleteCaveat(s,e,r.origin,s.parentCapability);break;case y.revokePermission:this.deletePermission(n.subjects,r.origin,s.parentCapability);break;default:throw new Error(`Unrecognized mutation result: "${a.operation}"`)}}))}))}))}removeCaveat(e,t,n){this.update((r=>{var s;const i=null===(s=r.subjects[e])||void 0===s?void 0:s.permissions[t];if(!i)throw new h.PermissionDoesNotExistError(e,t);if(!i.caveats)throw new h.CaveatDoesNotExistError(e,t,n);this.deleteCaveat(i,n,e,t)}))}deleteCaveat(e,t,n,r){if(!e.caveats)throw new h.CaveatDoesNotExistError(n,r,t);const s=e.caveats.findIndex((e=>e.type===t));if(-1===s)throw new h.CaveatDoesNotExistError(n,r,t);1===e.caveats.length?e.caveats=null:e.caveats.splice(s,1),this.validateModifiedPermission(e,n,r)}validateModifiedPermission(e,t,n){const r=this.getTargetKey(e.parentCapability);if(!r)throw new Error(`Fatal: Existing permission target key "${r}" has no specification.`);this.validatePermission(this.getPermissionSpecification(r),e,t,n)}getTargetKey(e){if(l.hasProperty(this._permissionSpecifications,e))return e;const t={};for(const e of Object.keys(this._permissionSpecifications)){const n=e.match(/(.+)\*$/u);n&&(t[n[1]]=!0)}const n=e.split("_");let r="";for(;n.length>0&&!l.hasProperty(this._permissionSpecifications,r)&&!t[r];)r+=`${n.shift()}_`;return t[r]?`${r}*`:undefined}grantPermissions({approvedPermissions:e,requestData:t,preserveExistingPermissions:n=!0,subject:r}){const{origin:s}=r;if(!s||"string"!=typeof s)throw new h.InvalidSubjectIdentifierError(s);const i=n?Object.assign({},this.getPermissions(s)):{};for(const[n,r]of Object.entries(e)){const e=this.getTargetKey(n);if(!e)throw h.methodNotFound(n);if(r.parentCapability!==undefined&&n!==r.parentCapability)throw new h.InvalidApprovedPermissionError(s,n,r);const o=n,a=this.getPermissionSpecification(e),c={caveats:this.constructCaveats(s,o,r.caveats),invoker:s,target:o};let u;a.factory?(u=a.factory(c,t),this.validatePermission(a,u,s,o)):(u=f.constructPermission(c),this.validatePermission(a,u,s,o,{invokePermissionValidator:!0,performCaveatValidation:!1})),i[o]=u}return this.setValidatedPermissions(s,i),i}validatePermission(e,t,n,r,{invokePermissionValidator:s,performCaveatValidation:i}={invokePermissionValidator:!0,performCaveatValidation:!0}){const{allowedCaveats:o,validator:a}=e;if(l.hasProperty(t,"caveats")){const{caveats:e}=t;if(null!==e&&!(Array.isArray(e)&&e.length>0))throw new h.InvalidCaveatsPropertyError(n,r,e);const s=new Set;null==e||e.forEach((e=>{if(i&&this.validateCaveat(e,n,r),!(null==o?void 0:o.includes(e.type)))throw new h.ForbiddenCaveatError(e.type,n,r);if(s.has(e.type))throw new h.DuplicateCaveatError(e.type,n,r);s.add(e.type)}))}s&&a&&a(t,n,r)}setValidatedPermissions(e,t){this.update((n=>{n.subjects[e]||(n.subjects[e]={origin:e,permissions:{}}),n.subjects[e].permissions=a.castDraft(t)}))}constructCaveats(e,t,n){const r=null==n?void 0:n.map((n=>{this.validateCaveat(n,e,t);const{type:r,value:s}=n;return{type:r,value:s}}));return r&&l.isNonEmptyArray(r)?r:undefined}validateCaveat(e,t,n){var r;if(!l.isPlainObject(e))throw new h.InvalidCaveatError(e,t,n);if(2!==Object.keys(e).length)throw new h.InvalidCaveatFieldsError(e,t,n);if("string"!=typeof e.type)throw new h.InvalidCaveatTypeError(e,t,n);const s=this.getCaveatSpecification(e.type);if(!s)throw new h.UnrecognizedCaveatTypeError(e.type,t,n);if(!l.hasProperty(e,"value")||e.value===undefined)throw new h.CaveatMissingValueError(e,t,n);if(!l.isValidJson(e.value))throw new h.CaveatInvalidJsonError(e,t,n);null===(r=s.validator)||void 0===r||r.call(s,e,t,n)}requestPermissions(e,t,n={}){return r(this,void 0,void 0,(function*(){const{origin:r}=e,{id:i=c.nanoid(),preserveExistingPermissions:o=!0}=n;this.validateRequestedPermissions(r,t);const a={id:i,origin:r},u={metadata:a,permissions:t},l=yield this.requestUserApproval(u),{permissions:d}=l,h=s(l,["permissions"]);return[this.grantPermissions({subject:e,approvedPermissions:d,preserveExistingPermissions:o,requestData:h}),a]}))}validateRequestedPermissions(e,t){if(!l.isPlainObject(t))throw h.invalidParams({message:`Requested permissions for origin "${e}" is not a plain object.`,data:{origin:e,requestedPermissions:t}});if(0===Object.keys(t).length)throw h.invalidParams({message:`Permissions request for origin "${e}" contains no permissions.`,data:{requestedPermissions:t}});for(const n of Object.keys(t)){const r=t[n],s=this.getTargetKey(n);if(!s)throw h.methodNotFound(n,{origin:e,requestedPermissions:t});if(!l.isPlainObject(r)||r.parentCapability!==undefined&&n!==r.parentCapability)throw h.invalidParams({message:`Permissions request for origin "${e}" contains invalid requested permission(s).`,data:{origin:e,requestedPermissions:t}});this.validatePermission(this.getPermissionSpecification(s),r,e,n,{invokePermissionValidator:!1,performCaveatValidation:!0})}}requestUserApproval(e){return r(this,void 0,void 0,(function*(){const{origin:t,id:n}=e.metadata,r=yield this.messagingSystem.call("ApprovalController:addRequest",{id:n,origin:t,requestData:e,type:m.MethodNames.requestPermissions},!0);return this.validateApprovedPermissions(r,{id:n,origin:t}),r}))}validateApprovedPermissions(e,t){const{id:n,origin:r}=t;if(!l.isPlainObject(e)||!l.isPlainObject(e.metadata))throw h.internalError(`Approved permissions request for subject "${r}" is invalid.`,{data:{approvedRequest:e}});const{metadata:{id:s,origin:i},permissions:o}=e;if(s!==n)throw h.internalError(`Approved permissions request for subject "${r}" mutated its id.`,{originalId:n,mutatedId:s});if(i!==r)throw h.internalError(`Approved permissions request for subject "${r}" mutated its origin.`,{originalOrigin:r,mutatedOrigin:i});try{this.validateRequestedPermissions(r,o)}catch(e){throw h.internalError(`Invalid approved permissions request: ${e.message}`,e.data)}}acceptPermissionsRequest(e){return r(this,void 0,void 0,(function*(){const{id:t}=e.metadata;if(!this.hasApprovalRequest({id:t}))throw new h.PermissionsRequestNotFoundError(t);if(0!==Object.keys(e.permissions).length)try{this.messagingSystem.call("ApprovalController:acceptRequest",t,e)}catch(e){throw this._rejectPermissionsRequest(t,e),e}else this._rejectPermissionsRequest(t,h.invalidParams({message:"Must request at least one permission."}))}))}rejectPermissionsRequest(e){return r(this,void 0,void 0,(function*(){if(!this.hasApprovalRequest({id:e}))throw new h.PermissionsRequestNotFoundError(e);this._rejectPermissionsRequest(e,h.userRejectedRequest())}))}hasApprovalRequest(e){return this.messagingSystem.call("ApprovalController:hasRequest",e)}_rejectPermissionsRequest(e,t){return this.messagingSystem.call("ApprovalController:rejectRequest",e,t)}getEndowments(e,t,n){return r(this,void 0,void 0,(function*(){if(!this.hasPermission(e,t))throw h.unauthorized({data:{origin:e,targetName:t}});return this.getTypedPermissionSpecification(f.PermissionType.Endowment,t,e).endowmentGetter({origin:e,requestData:n})}))}executeRestrictedMethod(e,t,n){return r(this,void 0,void 0,(function*(){const r=this.getRestrictedMethod(t,e),s=yield this._executeRestrictedMethod(r,{origin:e},t,n);if(s===undefined)throw new Error(`Internal request for method "${t}" as origin "${e}" returned no result.`);return s}))}_executeRestrictedMethod(e,t,n,r=[]){const{origin:s}=t,i=this.getPermission(s,n);if(!i)throw h.unauthorized({data:{origin:s,method:n}});return d.decorateWithCaveats(e,i,this._caveatSpecifications)({method:n,params:r,context:{origin:s}})}}n.PermissionController=_}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/permissions/PermissionController.js"}],[1282,{"./getPermissions":1281,"./requestPermissions":1283},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.handlers=void 0;const r=e("./requestPermissions"),s=e("./getPermissions");n.handlers=[r.requestPermissionsHandler,s.getPermissionsHandler]}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/permissions/rpc-methods/index.js"}],[1298,{"./hdkey":1297,"./thirdparty":1299,bs58check:2093,buffer:2084,crypto:2194,"ethereumjs-util":2524,randombytes:5557,"scrypt-js":5751,"uuid/v4":1302},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},r.apply(this,arguments)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(s=o.trys,(s=s.length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){o.label=i[1];break}if(6===i[0]&&o.label<s[1]){o.label=s[1],s=i;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(i);break}s[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};Object.defineProperty(n,"__esModule",{value:!0});var o=e("crypto"),a=e("ethereumjs-util"),c=e("scrypt-js"),u=e("./hdkey");Object.defineProperty(n,"hdkey",{enumerable:!0,get:function(){return u.default}});var l=e("./thirdparty");Object.defineProperty(n,"thirdparty",{enumerable:!0,get:function(){return l.default}});var d=e("bs58check"),h=e("randombytes"),f=e("uuid/v4");function p(e,t,n){if(t.toLowerCase().startsWith("0x")&&(t=t.slice(2)),!t&&!n)return t;if(n%2)throw new Error("Invalid length argument, must be an even number");if("number"==typeof n&&t.length!==n)throw new Error("Invalid "+e+", string must be "+n+" hex characters");if(!/^([0-9a-f]{2})+$/i.test(t))throw new Error("Invalid "+e+", string must be "+("number"==typeof n?n:"empty or a non-zero even number of")+" hex characters");return t}function m(e,n,r){if(!t.isBuffer(n))throw new Error("Invalid "+e+", must be a string ("+("number"==typeof r?""+2*r:"empty or a non-zero even number of")+" hex characters) or buffer"+("number"==typeof r?" ("+r+" bytes)":""));if("number"==typeof r&&n.length!==r)throw new Error("Invalid "+e+", buffer must be "+r+" bytes");return n}var g=function(){function e(e,t){if(void 0===t&&(t=undefined),this.privateKey=e,this.publicKey=t,e&&t)throw new Error("Cannot supply both a private and a public key to the constructor");if(e&&!a.isValidPrivate(e))throw new Error("Private key does not satisfy the curve requirements (ie. it is invalid)");if(t&&!a.isValidPublic(t))throw new Error("Invalid public key")}return e.generate=function(t){if(void 0===t&&(t=!1),!t)return new e(h(32));for(var n=new a.BN("088f924eeceeda7fe92e1f5b0fffffffffffffff",16);;){var r=h(32);if(new a.BN(a.privateToAddress(r)).lte(n))return new e(r)}},e.generateVanityAddress=function(t){for(t instanceof RegExp||(t=new RegExp(t));;){var n=h(32),r=a.privateToAddress(n);if(t.test(r.toString("hex")))return new e(n)}},e.fromPublicKey=function(t,n){return void 0===n&&(n=!1),n&&(t=a.importPublic(t)),new e(undefined,t)},e.fromExtendedPublicKey=function(t){if("xpub"!==t.slice(0,4))throw new Error("Not an extended public key");var n=d.decode(t).slice(45);return e.fromPublicKey(n,!0)},e.fromPrivateKey=function(t){return new e(t)},e.fromExtendedPrivateKey=function(t){if("xprv"!==t.slice(0,4))throw new Error("Not an extended private key");var n=d.decode(t);if(0!==n[45])throw new Error("Invalid extended private key");return e.fromPrivateKey(n.slice(46))},e.fromV1=function(n,r){return s(this,void 0,void 0,(function(){var s,u,l,d,h;return i(this,(function(i){switch(i.label){case 0:if("1"!==(s="object"==typeof n?n:JSON.parse(n)).Version)throw new Error("Not a V1 Wallet");if("scrypt"!==s.Crypto.KeyHeader.Kdf)throw new Error("Unsupported key derivation scheme");return u=s.Crypto.KeyHeader.KdfParams,[4,c.scrypt(t.from(r),t.from(s.Crypto.Salt,"hex"),u.N,u.R,u.P,u.DkLen)];case 1:if(l=i.sent(),d=t.from(s.Crypto.CipherText,"hex"),a.keccak256(t.concat([l.slice(16,32),d])).toString("hex")!==s.Crypto.MAC)throw new Error("Key derivation failed - possibly wrong passphrase");return h=o.createDecipheriv("aes-128-cbc",a.keccak256(l.slice(0,16)).slice(0,16),t.from(s.Crypto.IV,"hex")),[2,new e(y(h,d))]}}))}))},e.fromV3=function(n,r,u){return void 0===u&&(u=!1),s(this,void 0,void 0,(function(){var s,l,d,h,f;return i(this,(function(i){switch(i.label){case 0:if(3!==(s="object"==typeof n?n:JSON.parse(u?n.toLowerCase():n)).version)throw new Error("Not a V3 wallet");return"scrypt"!==s.crypto.kdf?[3,2]:(d=s.crypto.kdfparams,[4,c.scrypt(t.from(r),t.from(d.salt,"hex"),d.n,d.r,d.p,d.dklen)]);case 1:return l=i.sent(),[3,3];case 2:if("pbkdf2"!==s.crypto.kdf)throw new Error("Unsupported key derivation scheme");if("hmac-sha256"!==(d=s.crypto.kdfparams).prf)throw new Error("Unsupported parameters to PBKDF2");l=o.pbkdf2Sync(t.from(r),t.from(d.salt,"hex"),d.c,d.dklen,"sha256"),i.label=3;case 3:if(h=t.from(s.crypto.ciphertext,"hex"),a.keccak256(t.concat([t.from(l.slice(16,32)),h])).toString("hex")!==s.crypto.mac)throw new Error("Key derivation failed - possibly wrong passphrase");return f=o.createDecipheriv(s.crypto.cipher,l.slice(0,16),t.from(s.crypto.cipherparams.iv,"hex")),[2,new e(y(f,h))]}}))}))},e.fromEthSale=function(n,r){var s="object"==typeof n?n:JSON.parse(n),i=t.from(s.encseed,"hex"),c=o.pbkdf2Sync(r,r,2e3,32,"sha256").slice(0,16),u=y(o.createDecipheriv("aes-128-cbc",c,i.slice(0,16)),i.slice(16)),l=new e(a.keccak256(u));if(l.getAddress().toString("hex")!==s.ethaddr)throw new Error("Decoded key mismatch - possibly wrong passphrase");return l},Object.defineProperty(e.prototype,"pubKey",{get:function(){return _(this.publicKey)||(this.publicKey=a.privateToPublic(this.privateKey)),this.publicKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"privKey",{get:function(){if(!_(this.privateKey))throw new Error("This is a public key only wallet");return this.privateKey},enumerable:!1,configurable:!0}),e.prototype.getPrivateKey=function(){return this.privKey},e.prototype.getPrivateKeyString=function(){return a.bufferToHex(this.privKey)},e.prototype.getPublicKey=function(){return this.pubKey},e.prototype.getPublicKeyString=function(){return a.bufferToHex(this.getPublicKey())},e.prototype.getAddress=function(){return a.publicToAddress(this.pubKey)},e.prototype.getAddressString=function(){return a.bufferToHex(this.getAddress())},e.prototype.getChecksumAddressString=function(){return a.toChecksumAddress(this.getAddressString())},e.prototype.toV3=function(e,n){return s(this,void 0,void 0,(function(){var s,u,l,d,g,b;return i(this,(function(i){switch(i.label){case 0:if(!_(this.privateKey))throw new Error("This is a public key only wallet");switch(v=n,w={cipher:"aes-128-ctr",kdf:"scrypt",salt:h(32),iv:h(16),uuid:h(16),dklen:32,c:262144,n:262144,r:8,p:1},s=v?("string"==typeof v.salt&&(v.salt=t.from(p("salt",v.salt),"hex")),"string"==typeof v.iv&&(v.iv=t.from(p("iv",v.iv,32),"hex")),"string"==typeof v.uuid&&(v.uuid=t.from(p("uuid",v.uuid,32),"hex")),v.salt&&m("salt",v.salt),v.iv&&m("iv",v.iv,16),v.uuid&&m("uuid",v.uuid,16),r(r({},w),v)):w,s.kdf){case"pbkdf2":return[3,1];case"scrypt":return[3,2]}return[3,4];case 1:return u=function(e){return{dklen:e.dklen,salt:e.salt,c:e.c,prf:"hmac-sha256"}}(s),l=o.pbkdf2Sync(t.from(e),u.salt,u.c,u.dklen,"sha256"),[3,5];case 2:return u=function(e){return{dklen:e.dklen,salt:e.salt,n:e.n,r:e.r,p:e.p}}(s),[4,c.scrypt(t.from(e),u.salt,u.n,u.r,u.p,u.dklen)];case 3:return l=i.sent(),[3,5];case 4:throw new Error("Unsupported kdf");case 5:if(!(d=o.createCipheriv(s.cipher,l.slice(0,16),s.iv)))throw new Error("Unsupported cipher");return g=y(d,this.privKey),b=a.keccak256(t.concat([t.from(l.slice(16,32)),t.from(g)])),[2,{version:3,id:f({random:s.uuid}),address:this.getAddress().toString("hex"),crypto:{ciphertext:g.toString("hex"),cipherparams:{iv:s.iv.toString("hex")},cipher:s.cipher,kdf:s.kdf,kdfparams:r(r({},u),{salt:u.salt.toString("hex")}),mac:b.toString("hex")}}]}var v,w}))}))},e.prototype.getV3Filename=function(e){return["UTC--",(e?new Date(e):new Date).toJSON().replace(/:/g,"-"),"--",this.getAddress().toString("hex")].join("")},e.prototype.toV3String=function(e,t){return s(this,void 0,void 0,(function(){var n,r;return i(this,(function(s){switch(s.label){case 0:return r=(n=JSON).stringify,[4,this.toV3(e,t)];case 1:return[2,r.apply(n,[s.sent()])]}}))}))},e}();function y(e,n){return t.concat([e.update(n),e.final()])}function _(e){return e!==undefined&&null!==e}n.default=g}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethereumjs-wallet",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/ethereumjs-wallet/dist/index.js"}],[1243,{"../../constants":1250,"@metamask/metamask-eth-abis":1185},function(){with(this)return function(){"use strict";return function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.ERC20Standard=void 0;const s=e("@metamask/metamask-eth-abis"),i=e("../../constants");n.ERC20Standard=class{constructor(e){this.web3=e}getBalanceOf(e,t){return r(this,void 0,void 0,(function*(){const n=this.web3.eth.contract(s.abiERC20).at(e);return new Promise(((e,r)=>{n.balanceOf(t,((t,n)=>{t?r(t):e(n)}))}))}))}getTokenDecimals(e){return r(this,void 0,void 0,(function*(){const t=this.web3.eth.contract(s.abiERC20).at(e);return new Promise(((e,n)=>{t.decimals(((t,r)=>{t?n(t):e(r)}))}))}))}getTokenSymbol(e){return r(this,void 0,void 0,(function*(){const t=this.web3.eth.contract(s.abiERC20).at(e);return new Promise(((e,n)=>{t.symbol(((t,r)=>{t?n(t):e(r)}))}))}))}getDetails(e,t){return r(this,void 0,void 0,(function*(){const[n,r]=yield Promise.all([this.getTokenDecimals(e),this.getTokenSymbol(e)]);let s;return t&&(s=yield this.getBalanceOf(e,t)),{decimals:n,symbol:r,balance:s,standard:i.ERC20}}))}}}}},{package:"@metamask/controllers",file:"/Users/danfinlay/Documents/MetaMask/metamask-extension/node_modules/@metamask/rpc-methods/node_modules/@metamask/controllers/dist/assets/Standards/ERC20Standard.js"}]],[],{});